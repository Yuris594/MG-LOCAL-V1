(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{61774:(e,t,a)=>{Promise.resolve().then(a.bind(a,39319))},39319:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Copyright:()=>b,default:()=>A});var r=a(95155),o=a(9561),s=a(86898),n=a(75436),l=a(11451),i=a(46805),c=a(2295),u=a(78562),d=a(70152),h=a(80906),x=a(39244),m=a(70689),g=a(35761),p=a(76046),f=a(10897),S=a(8889),j=a(12115),v=a(48173),w=a.n(v);let C=j.forwardRef(function(e,t){return(0,r.jsx)(f.A,{elevation:6,ref:t,variant:"filled",...e})});function b(e){return(0,r.jsxs)(o.default,{variant:"body2",color:"text.secondary",align:"center",...e,children:["Departamento de Sistemas \xa9 Version 0.2 - ",new Date().getFullYear(),"."]})}let y=async(e,t)=>{let a=await fetch(S.c.url+"/usuarios/listar/".concat(e,"/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});return a.ok?a.json():404===a.status?{error:{detail:"Credenciales incorrectas"}}:{error:{detail:"Error desconocido"}}},A=function(){let e=(0,g.default)(),t=(0,p.useRouter)(),{login:a,auth:f}=(0,m.A)(),[S,v]=(0,j.useState)(""),[A,I]=(0,j.useState)(!1),[N,k]=(0,j.useState)(!1),[O,E]=(0,j.useState)(!1),[_,J]=(0,j.useState)("");(0,s.A)(e.breakpoints.down("sm"));let D=async e=>{e.preventDefault();try{let e=await y(_,S);e.error?(E(!0),k(!0)):(I(!0),a(e),t.push("../start"))}catch(e){E(!0),k(!0),console.log("Error en la pagina Iniciar Sesi\xf3n",e)}},R=e=>{"clicaway"!==e&&(I(!1),k(!1))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.default,{sx:{flexGrow:1},children:(0,r.jsx)(l.A,{position:"static",sx:{bgcolor:"#262626",height:"70px"},children:(0,r.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,r.jsx)(o.default,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1}}),(0,r.jsx)(c.default,{component:w(),href:"./components/ingresos",sx:{color:"white"},title:"Control de entredas y salidas de los empleados",children:(0,r.jsx)(x.A,{sx:{fontSize:40}})})]})})}),(0,r.jsx)(n.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",mt:5},children:(0,r.jsxs)(u.A,{component:"main",elevation:3,sx:{width:"380px",padding:"20px",borderRadius:"15px",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white",boxShadow:3},children:[(0,r.jsx)(n.default,{sx:{textAlign:"center",marginBottom:"20px",width:{xs:"100px",sm:"200px",md:"300px"},height:"auto"},children:(0,r.jsx)("img",{src:"/logo_miguelgomez.png",alt:"LOGO",style:{width:"100%",height:"auto",objectFit:"contain"}})}),(0,r.jsxs)(n.default,{component:"form",noValidate:!0,onSubmit:D,sx:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[(0,r.jsx)(d.A,{error:O,id:"usuario",label:"Usuario",margin:"normal",fullWidth:!0,name:"PER_Usuario",value:_,onChange:e=>J(e.target.value)}),(0,r.jsx)(d.A,{error:O,margin:"normal",required:!0,fullWidth:!0,type:"password",name:"PER_Clave",id:"contrase\xf1a",label:"Contrase\xf1a",value:S,onChange:e=>v(e.target.value)}),(0,r.jsx)(c.default,{type:"submit",fullWidth:!0,sx:{mt:2,backgroundColor:"#11eb6c",color:"white","$:hover":{backgroundColor:"#35eb11"}},children:"Iniciar sesi\xf3n"})]}),(0,r.jsx)(b,{sx:{mt:3,mb:1}})]})}),A?(0,r.jsx)(h.A,{open:A,autoHideDuration:6e3,onClose:R,children:(0,r.jsx)(C,{onClose:R,variant:"outlined",severity:"success",sx:{width:"100%"},children:"\xa1Hola, ".concat(f.PER_Nom,"! Tu sesi\xf3n ha comenzado.")})}):"",N?(0,r.jsx)(h.A,{open:N,autoHideDuration:6e3,onClose:R,children:(0,r.jsx)(C,{onClose:R,variant:"outlined",severity:"error",sx:{width:"100%"},children:"No se pudo iniciar sesi\xf3n. Verifica tus credenciales."})}):""]})}},8889:(e,t,a)=>{"use strict";a.d(t,{c:()=>r});let r={url:"http://172.20.20.3:8001"}},70689:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,AuthProvider:()=>i});var r=a(95155),o=a(12115),s=a(76046),n=a(89208);let l=(0,o.createContext)({login:e=>{},logout:()=>{}}),i=e=>{let{children:t}=e,a=(0,s.useRouter)(),[i]=(0,o.useState)(!0),[c,u]=(0,o.useState)({}),[d,h]=(0,o.useState)(null),[x,m]=(0,o.useState)({}),[g,p]=(0,o.useState)({}),[f,S]=(0,o.useState)({}),[j,v]=(0,o.useState)({}),[w,C]=(0,o.useState)({}),b=(0,o.useCallback)(function(e){n.A.set("authTokens",JSON.stringify(e)),localStorage.setItem("auth",JSON.stringify(e)),h(e)},[]),y=(0,o.useCallback)(function(){n.A.remove("authTokens"),localStorage.removeItem("auth"),h(null),a.push("/")},[]);(0,o.useEffect)(()=>{let e=localStorage.getItem("auth"),t=localStorage.getItem("caja"),a=localStorage.getItem("pedido"),r=localStorage.getItem("pedidoV"),o=localStorage.getItem("cartera"),s=localStorage.getItem("cliente"),n=localStorage.getItem("clienteV");n&&S(JSON.parse(n)),r&&v(JSON.parse(r)),o&&C(JSON.parse(o)),e&&h(JSON.parse(e)),s&&p(JSON.parse(s)),a&&m(JSON.parse(a)),t&&u(JSON.parse(t))},[]);let A=(0,o.useMemo)(()=>({auth:d,cliente:g,setCliente:p,pedido:x,setPedido:m,caja:c,setCaja:u,clienteV:f,setClienteV:S,pedidosV:j,setPedidosV:v,carteraV:w,setCarteraV:C,loading:i,login:b,logout:y}),[d,g,x,c,f,j,w,b,y]);return(0,r.jsx)(l.Provider,{value:A,children:t})},c=()=>(0,o.useContext)(l)}},e=>{var t=t=>e(e.s=t);e.O(0,[6058,5854,994,5975,1260,6403,152,8173,3882,4027,8441,1517,7358],()=>t(61774)),_N_E=e.O()}]);