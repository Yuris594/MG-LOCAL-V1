(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{61774:(e,t,a)=>{Promise.resolve().then(a.bind(a,39319))},39319:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Copyright:()=>C,default:()=>b});var r=a(95155),o=a(9561),s=a(75436),n=a(11451),l=a(46805),i=a(2295),c=a(78562),u=a(70152),d=a(80906),h=a(39244),x=a(70689),g=a(35761),m=a(76046),p=a(10897),f=a(8889),S=a(12115),j=a(48173),v=a.n(j);let w=S.forwardRef(function(e,t){return(0,r.jsx)(p.A,{elevation:6,ref:t,variant:"filled",...e})});function C(e){return(0,r.jsxs)(o.default,{variant:"body2",color:"text.secondary",align:"center",...e,children:["Departamento de Sistemas \xa9 Version 0.2 - ",new Date().getFullYear(),"."]})}let y=async(e,t)=>{let a=await fetch(f.c.url+"/usuarios/listar/".concat(e,"/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});return a.ok?a.json():404===a.status?{error:{detail:"Credenciales incorrectas"}}:{error:{detail:"Error desconocido"}}},b=function(){(0,g.default)();let e=(0,m.useRouter)(),{login:t,auth:a}=(0,x.A)(),[p,f]=(0,S.useState)(""),[j,b]=(0,S.useState)(!1),[A,I]=(0,S.useState)(!1),[N,O]=(0,S.useState)(!1),[k,E]=(0,S.useState)(""),_=async a=>{if(a.preventDefault(),!k||!p){O(!0),I(!0);return}try{let a=await y(k,p);a.error?(O(!0),I(!0)):(t(a),e.push("../start"),b(!0))}catch(e){O(!0),I(!0),console.log("Error en la pagina Iniciar Sesi\xf3n",e)}},J=e=>{"clicaway"!==e&&(b(!1),I(!1))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.default,{sx:{flexGrow:1},children:(0,r.jsx)(n.A,{position:"static",sx:{bgcolor:"#262626",height:"70px"},children:(0,r.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,r.jsx)(o.default,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1}}),(0,r.jsx)(i.default,{component:v(),href:"./components/ingresos",sx:{color:"white"},title:"Control de entredas y salidas de los empleados",children:(0,r.jsx)(h.A,{sx:{fontSize:40}})})]})})}),(0,r.jsx)(s.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",mt:5},children:(0,r.jsxs)(c.A,{component:"main",elevation:3,sx:{width:"380px",padding:"20px",borderRadius:"15px",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white",boxShadow:3},children:[(0,r.jsx)(s.default,{sx:{textAlign:"center",marginBottom:"20px",width:{xs:"250px",sm:"280px",md:"320px"},height:"auto"},children:(0,r.jsx)("img",{src:"/logo_miguelgomez.png",alt:"LOGO",style:{width:"100%",height:"auto",objectFit:"contain"}})}),(0,r.jsxs)(s.default,{component:"form",onSubmit:_,noValidate:!0,sx:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[(0,r.jsx)(u.A,{error:N,id:"usuario",label:"Usuario",margin:"normal",fullWidth:!0,name:"PER_Usuario",value:k,onChange:e=>E(e.target.value)}),(0,r.jsx)(u.A,{error:N,margin:"normal",required:!0,fullWidth:!0,type:"password",name:"PER_Clave",id:"contrase\xf1a",label:"Contrase\xf1a",value:p,onChange:e=>f(e.target.value)}),(0,r.jsx)(i.default,{type:"submit",fullWidth:!0,sx:{mt:2,backgroundColor:"#11eb6c",color:"white","$:hover":{backgroundColor:"#35eb11"}},children:"Iniciar sesi\xf3n"})]}),(0,r.jsx)(C,{sx:{mt:3,mb:1}})]})}),j?(0,r.jsx)(d.A,{open:j,autoHideDuration:6e3,onClose:J,children:(0,r.jsx)(w,{onClose:J,variant:"outlined",severity:"success",sx:{width:"100%"},children:"\xa1Hola, ".concat(a.PER_Nom,"! Tu sesi\xf3n ha comenzado.")})}):"",A?(0,r.jsx)(d.A,{open:A,autoHideDuration:6e3,onClose:J,children:(0,r.jsx)(w,{onClose:J,variant:"outlined",severity:"error",sx:{width:"100%"},children:"No se pudo iniciar sesi\xf3n. Verifica tus credenciales."})}):""]})}},8889:(e,t,a)=>{"use strict";a.d(t,{c:()=>r});let r={url:"http://172.20.20.3:8001"}},70689:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,AuthProvider:()=>i});var r=a(95155),o=a(12115),s=a(76046),n=a(89208);let l=(0,o.createContext)({login:e=>{},logout:()=>{}}),i=e=>{let{children:t}=e,a=(0,s.useRouter)(),[i]=(0,o.useState)(!0),[c,u]=(0,o.useState)({}),[d,h]=(0,o.useState)(null),[x,g]=(0,o.useState)({}),[m,p]=(0,o.useState)({}),[f,S]=(0,o.useState)({}),[j,v]=(0,o.useState)({}),[w,C]=(0,o.useState)({}),y=(0,o.useCallback)(function(e){n.A.set("authTokens",JSON.stringify(e)),localStorage.setItem("auth",JSON.stringify(e)),h(e)},[]),b=(0,o.useCallback)(function(){n.A.remove("authTokens"),localStorage.removeItem("auth"),h(null),a.push("/")},[]);(0,o.useEffect)(()=>{let e=localStorage.getItem("auth"),t=localStorage.getItem("caja"),a=localStorage.getItem("pedido"),r=localStorage.getItem("pedidoV"),o=localStorage.getItem("cartera"),s=localStorage.getItem("cliente"),n=localStorage.getItem("clienteV");n&&S(JSON.parse(n)),r&&v(JSON.parse(r)),o&&C(JSON.parse(o)),e&&h(JSON.parse(e)),s&&p(JSON.parse(s)),a&&g(JSON.parse(a)),t&&u(JSON.parse(t))},[]);let A=(0,o.useMemo)(()=>({auth:d,cliente:m,setCliente:p,pedido:x,setPedido:g,caja:c,setCaja:u,clienteV:f,setClienteV:S,pedidosV:j,setPedidosV:v,carteraV:w,setCarteraV:C,loading:i,login:y,logout:b}),[d,m,x,c,f,j,w,y,b]);return(0,r.jsx)(l.Provider,{value:A,children:t})},c=()=>(0,o.useContext)(l)}},e=>{var t=t=>e(e.s=t);e.O(0,[6058,5854,994,5975,1260,6403,152,8173,3882,1722,8441,1517,7358],()=>t(61774)),_N_E=e.O()}]);