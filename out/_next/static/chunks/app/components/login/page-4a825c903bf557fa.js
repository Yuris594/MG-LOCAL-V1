(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6602],{98648:function(e,t,r){Promise.resolve().then(r.bind(r,9960))},9960:function(e,t,r){"use strict";r.r(t),r.d(t,{Copyright:function(){return O},default:function(){return k}});var n=r(57437),o=r(24732),a=r(83719),s=r(31193),i=r(13100),l=r(71733),u=r(79806),c=r(60091),d=r(20124),x=r(14446),f=r(48801),h=r(23983),p=r(25774),m=r(24563),g=r(11810),j=r(19490),v=r(85800),S=r(16463),b=r(27270),y=r(2265),w=r(66648),C=r(87138);let Z=(0,o.Z)({components:{MuiTextField:{styleOverrides:{root:{borderRadius:"8px",boxShadow:"0px, 3px, 5px rgba(0,0,0,0.2)"}}},MuiButton:{styleOverrides:{root:{borderRadius:"8px",boxShadow:"0px 3px 5px rgba(0,0,0,0.2)",transition:"0.3s","&:hover":{boxShadow:"0px 5px 10px rgba(0,0,0,0.4)",backgroundColor:"#388e3c"}}}}}}),E=y.forwardRef(function(e,t){return(0,n.jsx)(b.Z,{elevation:6,ref:t,variant:"filled",...e})});function O(e){return(0,n.jsxs)(a.default,{variant:"body2",color:"text.secondary",align:"center",...e,children:["Departamento de Sistemas \xa9 Version 0.1 - ",new Date().getFullYear(),"."]})}let I=async(e,t)=>{try{let r=await fetch("/api/usuarios/listar/".concat(e,"/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await r.json();if(!r.ok||!n||(n.length,0))return{error:"Usuario o Clave incorrecta"};return n}catch(e){return console.error("Error en la petici\xf3n: ",e),{error:"Error en la conexi\xf3n"}}};function k(){let e=(0,S.useRouter)(),{login:t,auth:r}=(0,v.a)(),[o,b]=(0,y.useState)(),[k,N]=(0,y.useState)(""),[T,_]=(0,y.useState)(!1),[D,J]=(0,y.useState)(!1),[R,W]=(0,y.useState)(!1),[P,U]=(0,y.useState)(""),[F,G]=(0,y.useState)(!1);!1===F&&setTimeout(()=>{G(!0)},500);let M=async r=>{r.preventDefault();let n=await I(P,k);n.error?(W(!0),J(!0),console.log("Error",n.error)):(localStorage.setItem("usuarios",JSON.stringify(n)),_(!0),b(!0),t(n),e.push("../start"))},z=e=>{"clicaway"!==e&&_(!1)};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(s.default,{sx:{height:"100vh",display:"flex",flexDirection:"column"},children:[(0,n.jsx)(i.Z,{direction:"down",in:F,mountOnEnter:!0,unmountOnExit:!0,children:(0,n.jsx)(l.Z,{position:"static",sx:{bgcolor:"#262626",height:"80px"},children:(0,n.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,n.jsx)(a.default,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1,marginLeft:"10px"},children:" "}),(0,n.jsx)(c.default,{component:C.default,href:"/components/ingresos",sx:{color:"white"},title:"Control de entredas y salidas de los empleados",children:(0,n.jsx)(m.Z,{sx:{fontSize:40}})})]})})}),(0,n.jsx)(d.default,{}),(0,n.jsx)(x.default,{theme:Z,children:(0,n.jsxs)(f.default,{component:"main",maxWidth:"xs",sx:{backgroundColor:"#ffffff",padding:4,borderRadius:2,boxShadow:"0px 5px 15px rgba(0,0,0,0.3)",marginTop:8},children:[(0,n.jsxs)(s.default,{sx:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,n.jsx)(a.default,{variant:"h6",noWrap:!0,component:"div",sx:{margin:2},children:(0,n.jsx)(w.default,{className:"logo",src:"/logo_miguelgomez.png",width:"230",height:"200",alt:"Logo",priority:!0})}),"saved"==o?(0,n.jsx)(j.Z,{sx:{color:"green"}}):"","error"==o?(0,n.jsx)(g.Z,{sx:{color:"red"}}):"",(0,n.jsx)(s.default,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"}}),(0,n.jsxs)(s.default,{component:"form",noValidate:!0,onSubmit:M,sx:{mt:1},children:[(0,n.jsx)(h.Z,{error:R,id:"usuario",label:"Usuario",margin:"normal",fullWidth:!0,name:"PER_Usuario",value:P,onChange:e=>U(e.target.value)}),(0,n.jsx)(a.default,{component:"h1",variant:"h6"}),(0,n.jsx)(h.Z,{error:R,margin:"normal",required:!0,fullWidth:!0,type:"password",name:"PER_Clave",id:"contrase\xf1a",label:"Contrase\xf1a",value:k,onChange:e=>N(e.target.value)}),(0,n.jsx)(c.default,{type:"submit",variant:"contained",color:"success",sx:{marginTop:2,display:"flex",justifyContent:"center",alignItems:"center",minWidth:380},children:"Iniciar sesi\xf3n"})]})]}),T?(0,n.jsx)(p.Z,{open:T,autoHideDuration:6e3,onClose:z,children:(0,n.jsx)(E,{onClose:z,variant:"outlined",severity:"success",sx:{width:"100%"},children:"Usuario identificado."})}):"",D?(0,n.jsx)(p.Z,{open:D,autoHideDuration:6e3,onClose:z,children:(0,n.jsx)(E,{onClose:z,variant:"outlined",severity:"error",sx:{width:"100%"},children:"El usuario o la contrase\xf1a son incorrectos."})}):"",(0,n.jsx)(O,{sx:{mt:5,mb:5}})]})})]})})}},85800:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return i},a:function(){return l}});var n=r(57437),o=r(2265),a=r(44785);let s=(0,o.createContext)({login:e=>{},logout:()=>{}}),i=e=>{let{children:t}=e,[r,i]=(0,o.useState)(null),[l,u]=(0,o.useState)({}),[c,d]=(0,o.useState)({}),[x,f]=(0,o.useState)({}),[h]=(0,o.useState)(!0),p=(0,o.useCallback)(function(e){a.Z.set("authTokens",JSON.stringify(e)),localStorage.setItem("auth",JSON.stringify(e)),i(e)},[]),m=(0,o.useCallback)(function(){a.Z.remove("authTokens"),localStorage.removeItem("auth"),i(null)},[]);(0,o.useEffect)(()=>{let e=localStorage.getItem("auth"),t=localStorage.getItem("cliente"),r=localStorage.getItem("pedido"),n=localStorage.getItem("caja");e&&i(JSON.parse(e)),t&&u(JSON.parse(t)),r&&d(JSON.parse(r)),n&&f(JSON.parse(n))},[]);let g=(0,o.useMemo)(()=>({auth:r,cliente:l,setCliente:u,pedido:c,setPedido:d,caja:x,setCaja:f,loading:h,login:p,logout:m}),[r,l,c,x,p,m]);return(0,n.jsx)(s.Provider,{value:g,children:t})},l=()=>(0,o.useContext)(s)}},function(e){e.O(0,[4797,4129,6291,4275,3983,2561,7734,6648,6461,7931,956,2971,7023,1744],function(){return e(e.s=98648)}),_N_E=e.O()}]);