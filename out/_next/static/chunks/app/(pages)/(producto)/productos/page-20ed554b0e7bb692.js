(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9616],{20067:function(){},72061:function(){},37229:function(e,t,a){Promise.resolve().then(a.bind(a,14596))},24959:function(e,t,a){"use strict";var l=a(23963);t.Z=void 0;var o=l(a(19118)),i=a(57437);t.Z=(0,o.default)((0,i.jsx)("path",{d:"M11 18h2v-2h-2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4"}),"HelpOutline")},9504:function(e,t,a){"use strict";var l=a(23963);t.Z=void 0;var o=l(a(19118)),i=a(57437);t.Z=(0,o.default)((0,i.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu")},77699:function(e,t,a){"use strict";var l=a(23963);t.Z=void 0;var o=l(a(19118)),i=a(57437);t.Z=(0,o.default)((0,i.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},20124:function(e,t,a){"use strict";var l=a(2265),o=a(89211),i=a(95885),r=a(57437);let n="function"==typeof(0,o.zY)({}),d=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}}),s=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),c=function(e){var t,a;let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o={};l&&e.colorSchemes&&"function"==typeof e.getColorSchemeSelector&&Object.entries(e.colorSchemes).forEach(t=>{var a,l;let[i,r]=t,n=e.getColorSchemeSelector(i);n.startsWith("@")?o[n]={":root":{colorScheme:null===(a=r.palette)||void 0===a?void 0:a.mode}}:o[n.replace(/\s*&/,"")]={colorScheme:null===(l=r.palette)||void 0===l?void 0:l.mode}});let i={html:d(e,l),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...s(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...o},r=null===(a=e.components)||void 0===a?void 0:null===(t=a.MuiCssBaseline)||void 0===t?void 0:t.styleOverrides;return r&&(i=[i,r]),i},u="mui-ecs",h=e=>{let t=c(e,!1),a=Array.isArray(t)?t[0]:t;return!e.vars&&a&&(a.html[":root:has(".concat(u,")")]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(t=>{var l,o;let[i,r]=t,n=e.getColorSchemeSelector(i);n.startsWith("@")?a[n]={[":root:not(:has(.".concat(u,"))")]:{colorScheme:null===(l=r.palette)||void 0===l?void 0:l.mode}}:a[n.replace(/\s*&/,"")]={["&:not(:has(.".concat(u,"))")]:{colorScheme:null===(o=r.palette)||void 0===o?void 0:o.mode}}}),t},f=(0,o.zY)(n?e=>{let{theme:t,enableColorScheme:a}=e;return c(t,a)}:e=>{let{theme:t}=e;return h(t)});t.default=function(e){let{children:t,enableColorScheme:a=!1}=(0,i.i)({props:e,name:"MuiCssBaseline"});return(0,r.jsxs)(l.Fragment,{children:[n&&(0,r.jsx)(f,{enableColorScheme:a}),!n&&!a&&(0,r.jsx)("span",{className:u,style:{display:"none"}}),t]})}},14596:function(e,t,a){"use strict";a.r(t);var l=a(57437),o=a(2265),i=a(30736),r=a(40468),n=a(97183),d=a(99128),s=a(24959),c=a(61169),u=a(77699),h=a(60335),f=a(83719),x=a(23983),p=a(74275),m=a(52610),g=a(28027),j=a(92355),S=a(31193),C=a(41448),b=a.n(C),w=a(13726),v=a(10416);function N(e){let{children:t,value:a,index:o,...i}=e;return(0,l.jsx)("div",{role:"tabpanel",hidden:a!==o,id:"simple-tabpanel-".concat(o),"aria-labelledby":"simple-tab-".concat(o),...i,children:a===o&&(0,l.jsx)(S.default,{sx:{p:3},children:t})})}function O(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}N.propTypes={children:b().node,index:b().number.isRequired,value:b().number.isRequired};let E=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),A=[{field:"ARTICULO",headerName:"Cod",width:130},{field:"DESCRIPCION",headerName:"Referencia",width:700},{field:"SUBLINEA",headerName:"Sublinea",width:300},{field:"TOTAL_DISP",headerName:"Disp",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"PRECIO",headerName:"Precio",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"PORC_IMPUESTO",headerName:"IVA",width:130},{field:"PRECIOMASIVA",headerName:"Masiva",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"PORC_DCTO",headerName:"D1",width:130},{field:"UNIDAD_EMPAQUE",headerName:"Emp",width:130},{field:"EXIST_REAL",headerName:"Existreal",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"}],I=[{field:"FACTURA",headerName:"Factura",width:130},{field:"FECHA_DESPACHO",headerName:"Fecha",width:190,renderCell:e=>E(e.value)},{field:"ANULADA",headerName:"AN",width:50},{field:"PRECIO_TOTAL",headerName:"V.fact",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"PEDIDO",headerName:"Pedido",width:130},{field:"ARTICULO",headerName:"Articulo",width:130},{field:"DESCRIPCION",headerName:"Descripcion",width:700},{field:"CANTIDAD",headerName:"Cant",width:130,valueFormatter:e=>Number(e).toFixed(1),align:"right"},{field:"PRECIO_UNITARIO",headerName:"PrecioUni",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"PORCIVA",headerName:"IVA",width:130,align:"right"},{field:"PORDESC",headerName:"Desc",width:130,align:"right"},{field:"VDESC",headerName:"VDesc",width:130},{field:"TOTAL_MERCADERIA",headerName:"VTotal ",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"IDRUTERO",headerName:"IdRutero",width:130},{field:"FECHARUT",headerName:"FechaRut",width:300},{field:"IDGUIA",headerName:"IdGuia",width:130},{field:"FECHAGUIA",headerName:"FechaGuia",width:250,renderCell:e=>E(e.value)},{field:"OBSERVACIONES",headerName:"Observaciones",width:800},{field:"RUBRO1",headerName:"Docs2",width:500}],y=[{field:"FECHA",headerName:"Fecha",width:250,renderCell:e=>E(e.value)},{field:"CLIENTE",headerName:"Cliente",width:160},{field:"PEDIDO",headerName:"Pedido",width:100},{field:"VE",headerName:"VEND",width:80,align:"right"},{field:"PED",headerName:"Ped",width:100,align:"right"},{field:"DESP",headerName:"Desp",width:100,align:"right"},{field:"PEND",headerName:"Pend",width:100,align:"right"},{field:"ESTADO",headerName:"Estado",width:120},{field:"AUTORIZADONOM",headerName:"Autortizado",width:200,renderCell:e=>{let t=e.row.AUTORIZADONOM;return(0,l.jsx)(f.default,{style:{color:"APROBADO"===t?"#00FC00":"RETENIDO"===t?"#FF1507":"#000000",backgroundColor:"transparent"},children:t})}}],R=async e=>(await fetch("/api/productos/listar/".concat(e.BODEGA),{method:"GET",headers:{"Content-Type":"application/json"}})).json(),D=async e=>{let t=await fetch("/api/productos/facturas/".concat(e.ARTICULO),{method:"GET",headers:{"Content-Type":"application/json"}});return t.ok||404!==t.status?t.json():(console.log("No hay facturas para este producto."),[])},P=async e=>{let t=await fetch("/api/productos/pedidos/".concat(e.ARTICULO),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok&&404===t.status)return console.log("No hay pedidos para este producto."),[];let a=await t.json();return console.log(a),a},Z=async()=>(await fetch("/api/productos/bodegas",{method:"GET",headers:{"Content-Type":"application/json"}})).json();t.default=function(){let e=(0,o.useRef)(),[t,a]=(0,o.useState)(0),[C,b]=(0,o.useState)(!1),[E,T]=(0,o.useState)([]),[F,k]=(0,o.useState)([]),[L,U]=(0,o.useState)([]),[M,_]=(0,o.useState)([]),[z,B]=(0,o.useState)(""),[G,V]=(0,o.useState)([]),[H,W]=(0,o.useState)(!0),[q,J]=(0,o.useState)([]),[Y,Q]=(0,o.useState)([]),[X,K]=(0,o.useState)();(0,o.useEffect)(()=>{e.current.focus(),$()},[]),(0,o.useEffect)(()=>{X&&ee()},[X]);let $=async()=>{T(await Z())},ee=async()=>{if(X){b(!0);let e=await R(X);try{e?(b(!1),V(e),Q(e)):(b(!1),V([])),W(!1)}catch(e){b(!1)}}},et=async()=>{let e=await D(z);_([]);try{X&&(e?_(e):_([]),W(!1))}catch(e){b(!1)}},ea=async()=>{let e=await P(z);k([]);try{X&&(e?k(e):k([]),W(!1))}catch(e){console.log(e)}},el=e=>{let t=e.toLowerCase();V(Y.filter(e=>Object.values(e).map(e=>e?e.toString().toLowerCase():"").some(e=>e.includes(t))))},eo=(0,o.useCallback)(e=>{J(e),e.length>0&&B(Y.filter(t=>{let a=t.ARTICULO;return!!a&&a.toString().includes(e[0])})[0])},[G]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(S.default,{children:[" "," "," ",(0,l.jsx)(w.Z,{})," "," "]}),(0,l.jsx)(i.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:C,children:(0,l.jsx)(r.default,{color:"inherit"})}),(0,l.jsx)(S.default,{sx:{padding:"20px"},children:(0,l.jsx)(f.default,{variant:"h5",component:"h1",gutterBottom:!0,sx:{display:"flex",justifyContent:"column",alignItems:"center",width:"auto",margin:0,color:"#000000"},children:"PRODUCTOS"})}),(0,l.jsxs)(S.default,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,l.jsx)(g.Z,{children:(0,l.jsx)(c.Z,{options:E,value:X,onChange:(e,t)=>{t&&(K(t),ee(t))},getOptionLabel:e=>e.NOMBRE||"Bodegas",disablePortal:!0,id:"combo-box-demo",sx:{width:350},isOptionEqualToValue:(e,t)=>e.NOMBRE===t.NOMBRE,renderInput:e=>(0,l.jsx)(x.Z,{...e,label:"Bodegas",placeholder:"Selecciona una bodega",variant:"standard"}),disableClearable:!0})}),(0,l.jsx)(S.default,{children:(0,l.jsx)(f.default,{variant:"h5",component:"h1",gutterBottom:!0,sx:{display:"flex",justifyContent:"column",alignItems:"center",width:"auto",margin:0,color:"#920b0d"},children:z.DESCRIPCION})}),(0,l.jsxs)(S.default,{sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:[G.length>0?(0,l.jsx)(v.Z,{datos:G}):"",(0,l.jsxs)(g.Z,{sx:{p:"2px 4px",display:"flex",alignItems:"flex-rigth",width:400,margin:"10px"},children:[(0,l.jsx)(p.ZP,{sx:{ml:1,flex:1},placeholder:"Buscar",inputProps:{"aria-label":"search google maps"},id:"usuario",label:"Usuario",name:"PER_usuario",autoComplete:"usuario",autoFocus:!0,value:L,onChange:e=>{e.preventDefault(),U(e.target.value),el(e.target.value)},inputRef:e}),(0,l.jsx)(h.Z,{title:"buscar",sx:{p:"10px"},"aria-label":"search",children:(0,l.jsx)(u.Z,{})})]})]})]}),(0,l.jsxs)(S.default,{sx:{width:"100%"},children:[(0,l.jsx)(S.default,{sx:{borderBottom:1,borderColor:"divider"},children:(0,l.jsxs)(j.Z,{value:t,onChange:(e,t)=>{a(t)},"aria-label":"basic tabs example",children:[(0,l.jsx)(n.Z,{label:"Articulos",...O(0)}),(0,l.jsx)(n.Z,{label:"Pedidos:".concat(F.length),...O(1),onClick:ea}),(0,l.jsx)(n.Z,{label:"Facturas:".concat(M.length),...O(2),onClick:et})]})}),(0,l.jsx)(N,{component:S.default,value:t,index:0,children:(0,l.jsx)(S.default,{sx:{width:"100%",height:950},children:G.length<=0?(0,l.jsxs)(S.default,{sx:{width:"100%"},title:"Seleccione una bodega en la lista de arriba",children:[" ",(0,l.jsx)(s.Z,{})," "]}):(0,l.jsx)(m._,{rows:G,columns:A,initialState:{pagination:{paginationModel:{page:0,pageSize:16}}},pageSizeOptions:[5,16,20],onRowSelectionModelChange:eo,rowSelectionModel:q,getRowId:e=>e.ARTICULO,sx:{backgroundColor:"#ffffff"}})})}),(0,l.jsx)(N,{component:S.default,value:t,index:1,children:!0===H?(0,l.jsx)(S.default,{sx:{width:"100%"},children:(0,l.jsx)(d.Z,{})}):0===F.length?(0,l.jsx)("h1",{children:"NO HAY PEDIDOS"}):(0,l.jsx)(S.default,{sx:{width:"100%",height:950},children:(0,l.jsx)(m._,{rows:F,columns:y,initialState:{pagination:{paginationModel:{page:0,pageSize:16}}},pageSizeOptions:[5,16,20],getRowId:e=>e.PEDIDO,sx:{backgroundColor:"#ffffff"}})})}),(0,l.jsx)(N,{component:S.default,value:t,index:2,children:!0===H?(0,l.jsx)(S.default,{sx:{width:"100%"},children:(0,l.jsx)(d.Z,{})}):M&&M.length<=0?(0,l.jsx)("h1",{children:"NO HAY FACTURAS"}):(0,l.jsx)(S.default,{sx:{width:"100%",height:950},children:(0,l.jsx)(m._,{rows:M,columns:I,initialState:{pagination:{paginationModel:{page:0,pageSize:16}}},pageSizeOptions:[5,16,20],getRowId:e=>e.FACTURA,sx:{backgroundColor:"#ffffff"}})})})]})]})}},13726:function(e,t,a){"use strict";a.d(t,{Z:function(){return F}});var l=a(57437),o=a(20124),i=a(31193),r=a(71733),n=a(79806),d=a(60335),s=a(60091),c=a(83719),u=a(62501),h=a(6291),f=a(11656),x=a(66325),p=a(90922),m=a(26032),g=a(55693),j=a(42188),S=a(66299),C=a(78457),b=a(21704),w=a(66246),v=a(9504),N=a(16463),O=a(85800),E=a(2265),A=a(32184),I=a(7547),y=a(57300),R=a(86917),D=a(47905),P=a(87138),Z=e=>{let{page:t}=e;return(0,l.jsx)(i.default,{children:(0,l.jsx)(A.Z,{children:t.map(e=>(0,l.jsx)(I.ZP,{disablePadding:!0,children:(0,l.jsxs)(y.Z,{LinkComponent:P.default,href:e.url,onClick:e.onClick,children:[(0,l.jsx)(R.Z,{children:e.icon}),(0,l.jsx)(D.Z,{children:e.title})]})},e.title))})})};let T={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",alignItems:"center",justifyContext:"center",boxShadow:24,pt:2,px:4,pb:3};var F=()=>{let e=(0,N.useRouter)(),{auth:t}=(0,O.a)(),[a,A]=(0,E.useState)(!1),[I,y]=(0,E.useState)(null),[R,D]=(0,E.useState)(!1),[F,k]=(0,E.useState)(null),L=()=>{D(!1),y(null)},U=[{title:"USUARIOS ",url:"../../usuarios",icon:(0,l.jsx)(x.Z,{})},{title:"PEDIDOS",url:"../../pedidos",icon:(0,l.jsx)(p.Z,{})},{title:"CLIENTES",url:"../../clients",icon:(0,l.jsx)(m.Z,{})},{title:"PRODUCTOS",icon:(0,l.jsx)(g.Z,{}),onClick:e=>{D(!0),y(e.currentTarget)}},{title:"FACTURAS",url:"../../facturas",icon:(0,l.jsx)(j.Z,{})},{title:"CAJA",url:"../../pedidos/pedidosCaja",icon:(0,l.jsx)(S.Z,{})}];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.default,{}),(0,l.jsxs)(i.default,{sx:{flexGrow:1},children:[(0,l.jsx)(r.Z,{position:"static",sx:{bgcolor:"#262626",width:"auto"},children:(0,l.jsxs)(n.Z,{children:[(0,l.jsx)(d.Z,{color:"inherit",onClick:e=>{k(e.currentTarget)},sx:{display:{xs:"flex",md:"none"}},children:(0,l.jsx)(v.Z,{})}),(0,l.jsx)(i.default,{sx:{display:{xs:"none",md:"flex"}},children:U.map(e=>(0,l.jsx)(s.default,{sx:{fontWeight:"bold"},color:"inherit",size:"large",LinkComponent:P.default,href:e.url,onClick:e.onClick,children:e.title},e.title))}),(0,l.jsx)(c.default,{variant:"h6",sx:{flexGrow:1}}),(0,l.jsx)(s.default,{component:P.default,href:"/start",color:"inherit",children:(0,l.jsx)(w.Z,{})}),(0,l.jsxs)(s.default,{color:"inherit",children:[(0,l.jsx)(b.Z,{}),t&&t.PER_Nom]}),(0,l.jsx)(s.default,{color:"inherit",onClick:()=>A(!0),children:(0,l.jsx)(C.Z,{})})]})}),(0,l.jsx)(u.Z,{open:a,onClose:()=>A(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,l.jsxs)(i.default,{sx:T,children:[(0,l.jsx)(c.default,{id:"modal-modal-title",variant:"h6",component:"h2",children:"\xbfEstas seguro que quiere salir?"}),(0,l.jsx)(i.default,{children:(0,l.jsx)(s.default,{sx:{bgcolor:"red"},variant:"contained",onClick:()=>{e.push("/")},children:"SALIR"})})]})}),(0,l.jsxs)(h.Z,{id:"basic-menu",anchorEl:I,open:R,onClose:L,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,l.jsx)(f.Z,{onClick:L,component:P.default,href:"../../productos",children:"Productos Por Bodega"}),(0,l.jsx)(f.Z,{onClick:L,component:P.default,href:"../../productosMG",children:"Productos-MG"})]}),(0,l.jsx)(h.Z,{id:"basic-menu",anchorEl:I,MenuListProps:{"aria-labelledby":"basic-button"},open:!!F,onClose:()=>{k(null)},sx:{display:{xs:"flex",md:"none"}},children:(0,l.jsx)(Z,{page:U})})]})]})}},10416:function(e,t,a){"use strict";var l=a(57437),o=a(27800),i=a(2265),r=a(60091);t.Z=e=>{let{datos:t}=e,[a,n]=(0,i.useState)(!1);return(0,l.jsx)(r.default,{variant:"outlined",color:"success",onClick:()=>{if(!Array.isArray(t)||0===t.length){console.error("Datos no est\xe1n en el formato correcto o est\xe1n vac\xedos.");return}n(!0);try{let e=o.P6.book_new(),a=o.P6.json_to_sheet(t);o.P6.book_append_sheet(e,a,"Datos"),o.NC(e,"datos.xlsx")}catch(e){console.error("Error al generar el archivo Excel",e)}finally{n(!1)}},disabled:a,children:a?"Loading...":"Excel"})}},85800:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return r},a:function(){return n}});var l=a(57437),o=a(2265);let i=(0,o.createContext)(),r=e=>{let{children:t}=e,[a,r]=(0,o.useState)(null),[n,d]=(0,o.useState)({}),[s,c]=(0,o.useState)({}),[u,h]=(0,o.useState)({}),[f,x]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let e=localStorage.getItem("datos"),t=localStorage.getItem("clientTemp"),a=localStorage.getItem("pedidoTemp"),l=localStorage.getItem("caja");e&&r(JSON.parse(e)),t&&d(JSON.parse(t)),a&&c(JSON.parse(a)),l&&h(JSON.parse(l))},[]),(0,l.jsx)(i.Provider,{value:{auth:a,cliente:n,setCliente:d,pedido:s,setPedido:c,caja:u,setCaja:h,loading:f,login:e=>{r(e)},logout:()=>{r(null)}},children:t})},n=()=>(0,o.useContext)(i)}},function(e){e.O(0,[1425,4797,4129,6291,4275,3983,2561,6981,1980,2610,9696,2971,7023,1744],function(){return e(e.s=37229)}),_N_E=e.O()}]);