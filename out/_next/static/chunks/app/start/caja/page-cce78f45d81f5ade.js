(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1267],{94610:(e,t,l)=>{Promise.resolve().then(l.bind(l,28932))},450:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});var i=l(12983),a=l(95155);let n=(0,i.A)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},65068:(e,t,l)=>{"use strict";l.d(t,{A:()=>z});var i=l(95155),a=l(48173),n=l.n(a),r=l(75436),o=l(4918),s=l(41983),d=l(36017),c=l(2091),u=l(60391);let x=e=>{let{page:t}=e;return(0,i.jsx)(r.default,{children:(0,i.jsx)(o.A,{children:t.map(e=>(0,i.jsx)(s.Ay,{disablePadding:!0,children:(0,i.jsxs)(d.A,{LinkComponent:n(),href:e.url,onClick:e.onClick,children:[(0,i.jsx)(c.A,{children:e.icon}),(0,i.jsx)(u.A,{primaryTypographyProps:{fontSize:15,fontWeight:"medium",letterSpacing:0},children:e.title})]})},e.title))})})};var h=l(78897),f=l.n(h),p=l(12115),g=l(79046),j=l.n(g),m=l(2138),C=l(70689),A=l(96212),v=l(85067),S=l(85244),b=l(74676),k=l(92080),w=l(6069),N=l(9581),y=l(43677),E=l(20457),I=l(11451),L=l(46805),O=l(894),R=l(2295),T=l(9561),D=l(81894),B=l(91888);let z=()=>{let{auth:e,logout:t}=(0,C.A)(),[l,a]=(0,p.useState)(null),[o,s]=(0,p.useState)(!1),d=()=>{s(!1),a(null)},c=[{title:"USUARIOS ",url:"/start/usuarios/",icon:(0,i.jsx)(b.A,{})},{title:"PEDIDOS",url:"/start/pedidos/",icon:(0,i.jsx)(k.A,{})},{title:"CLIENTES",url:"/start/clients/",icon:(0,i.jsx)(A.A,{})},{title:"PRODUCTOS",icon:(0,i.jsx)(w.A,{}),onClick:e=>{s(!0),a(e.currentTarget)}},{title:"FACTURAS",url:"/start/facturas/",icon:(0,i.jsx)(N.A,{})},{title:"CAJA",url:"/start/pedidos/pedidosCaja/",icon:(0,i.jsx)(y.A,{})}];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(E.default,{}),(0,i.jsxs)(r.default,{sx:{flexGrow:1},children:[(0,i.jsx)(I.A,{position:"static",sx:{bgcolor:"#262626",width:"auto"},children:(0,i.jsxs)(L.A,{children:[(0,i.jsx)(O.A,{color:"inherit",onClick:e=>{a(e.currentTarget)},sx:{display:{xs:"flex",md:"none"}},children:(0,i.jsx)(S.A,{})}),(0,i.jsx)(r.default,{sx:{display:{xs:"none",md:"flex"}},children:c.map(e=>(0,i.jsx)(R.default,{sx:{fontSize:"15px"},color:"inherit",size:"large",LinkComponent:n(),href:e.url,onClick:e.onClick,children:e.title},e.title))}),(0,i.jsx)(T.default,{variant:"h6",sx:{flexGrow:1}}),(0,i.jsx)(R.default,{component:n(),href:"/start",color:"inherit",children:(0,i.jsx)(m.A,{})}),(0,i.jsxs)(R.default,{className:j().className,color:"inherit",sx:{fontSize:"15px"},children:[(0,i.jsx)(A.A,{}),e&&e.PER_Nom]}),(0,i.jsx)(R.default,{color:"inherit",onClick:()=>{f().fire({title:"\xbfQuieres terminar la Sesi\xf3n?",icon:"question",showCancelButton:!0,confirmButtonColor:"#09ff00",cancelButtonColor:"#fa0000",confirmButtonText:"Aceptar"}).then(e=>{e.isConfirmed&&t()})},children:(0,i.jsx)(v.A,{})})]})}),(0,i.jsxs)(D.A,{id:"basic-menu",anchorEl:l,open:o,onClose:d,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,i.jsx)(B.A,{onClick:d,component:n(),href:"/start/buscarProd/",children:"Buscar Por Referencias"}),(0,i.jsx)(B.A,{onClick:d,component:n(),href:"/start/productosMG/",children:"Lista de Todos Los Productos"})]}),(0,i.jsx)(D.A,{id:"basic-menu",anchorEl:l,MenuListProps:{"aria-labelledby":"basic-button"},open:!!l,onClose:()=>{a(null)},sx:{display:{xs:"flex",md:"none"}},children:(0,i.jsx)(x,{page:c})})]})]})}},28932:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>k});var i=l(95155),a=l(48173),n=l.n(a),r=l(12115),o=l(70689),s=l(65068),d=l(450),c=l(58896),u=l(75436),x=l(2295),h=l(2241),f=l(78562),p=l(9561),g=l(4918),j=l(36017),m=l(60391),C=l(41983),A=l(894),v=l(62347),S=l(23613);let b={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxHeight:"90vh",maxWidth:"80vw",overflowY:"auto",overflowX:"hidden",padding:"16px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:24},k=()=>{let[e]=(0,r.useState)([]),[t,l]=(0,r.useState)(0),[a,k]=(0,r.useState)(0),[w,N]=(0,r.useState)(!1),[y,E]=(0,r.useState)(0),[I,L]=(0,r.useState)(""),{caja:O,setCaja:R,cliente:T}=(0,o.A)(),[D,B]=(0,r.useState)(0),[z,M]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e=e=>{let t=e.keyCode||e.which;if(t>=48&&t<=57||13===t){let e;0===z?e=E:1===z?e=l:2===z&&B(O.total),e&&e(e=>0===e?String.fromCharCode(t):e+String.fromCharCode(t))}},t=e=>{8===(e.keyCode||e.which)&&J()};return document.addEventListener("keypress",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("keypress",e),document.removeEventListener("keydown",t)}},[y,z]),(0,r.useEffect)(()=>{let l=[...e,{dinero:y},{dinero:t}].reduce((e,t)=>e+parseInt(t.dinero),0),i=O.total,a=parseInt(i.replace(/\./g,""));if(i===D){if(isNaN(D)||isNaN(a))L(0),k(0);else{let e=a-a,t=a-a;L(e>=0?e:0),k(t>=0?t:0)}}else if(isNaN(l)||isNaN(a))L(0),k(0);else{let e=a-l,t=l-a;console.log("Restante"+e),console.log("Restante"+t),L(e>=0?e:0),k(t>=0?t:0)}},[y,t,D,z]);let P=(e,t)=>{2===t&&B(O.total),M(t)},F=e=>{let t;let i=e.currentTarget.value;0===z?t=E:1===z?t=l:2===z&&B(O.total),t&&t(e=>0===e?i:e+i)},J=()=>{let e;0===z?e=E:1===z?e=l:2===z&&B(0),e&&e(e=>e.length>1?e.slice(0,-1):0)},_=e=>{let t;let i=parseInt(e.currentTarget.value);0===i?t=E:1===i?t=l:2===i&&(t=B),t&&t(e=>e.length>10?e.slice(0,-1):0)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.default,{children:[" "," "," ",(0,i.jsx)(s.A,{})," "," "," "]}),(0,i.jsxs)(u.default,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",backgroundColor:"#f5f5f5",borderRadius:"10px",boxShadow:"0px 4px 12px rgba(0,0,0,0.1)"},children:[(0,i.jsxs)(u.default,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"90%",margin:1},children:[(0,i.jsxs)("h2",{style:{fontSize:"2rem",alignItems:"center",justifyContent:"center"},children:[" "," PAGO "," "]}),(0,i.jsx)(x.default,{component:n(),variant:"outlined",href:"../pedidos/pedidosCaja/",sx:{bgcolor:"#B0DDFF",color:"black"},onClick:()=>{localStorage.removeItem("pago"),R({})},children:"Atras"})]}),(0,i.jsx)(h.A,{}),(0,i.jsxs)(f.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,i.jsxs)(f.A,{sx:{width:"50%",bgcolor:"background"},children:[(0,i.jsx)(f.A,{sx:{backgroundColor:"#ffffff"},children:(0,i.jsx)(p.default,{sx:{fontSize:17},color:"primary",gutterBottom:!0,children:"Metodo de Pago"})}),(0,i.jsx)(f.A,{children:(0,i.jsxs)(g.A,{component:"nav","aria-label":"main mailbox folders",children:[(0,i.jsx)(j.A,{selected:0===z,onClick:e=>P(e,0),children:(0,i.jsx)(m.A,{primary:"Efectivo"})}),(0,i.jsx)(j.A,{selected:1===z,onClick:e=>P(e,1),children:(0,i.jsx)(m.A,{primary:"Banco"})}),(0,i.jsx)(j.A,{selected:2===z,onClick:e=>P(e,2),children:(0,i.jsx)(m.A,{primary:"Cuenta Cliente"})})]})}),(0,i.jsx)(f.A,{sx:{backgroundColor:"#ffffff"},children:(0,i.jsx)(p.default,{sx:{fontSize:17,marginBottom:1},color:"primary",gutterBottom:!0,children:"Resumen"})}),(0,i.jsxs)(f.A,{children:[(0,i.jsx)(C.Ay,{secondaryAction:(0,i.jsx)(A.A,{value:0,onClick:_,edge:"end: ","aria-label":"delete",children:(0,i.jsx)(d.A,{})}),children:(0,i.jsx)(m.A,{primary:"Efectivo:  ".concat(y.toLocaleString("es"))})}),(0,i.jsx)(C.Ay,{secondaryAction:(0,i.jsx)(A.A,{value:1,onClick:_,edge:"end","aria-label":"delete",children:(0,i.jsx)(d.A,{})}),children:(0,i.jsx)(m.A,{primary:"Banco:   "+t.toLocaleString("es")})}),(0,i.jsx)(C.Ay,{secondaryAction:(0,i.jsx)(A.A,{value:2,onClick:_,edge:"end","aria-label":"delete",children:(0,i.jsx)(d.A,{})}),children:(0,i.jsx)(m.A,{primary:"Cuenta Cliente: "+D.toLocaleString("es")})})]}),(0,i.jsx)(v.A,{orientation:"vertical","aria-label":"vertical outlined button group",variant:"text",sx:{margin:0,width:"100%",height:"100%"},children:(0,i.jsx)(x.default,{component:n(),href:"../pedidos/ReciboCaja/",variant:"outlined",onClick:()=>{let l=[...e,{efectivo:y},{banco:t},{cuentaCliente:D}],i=JSON.parse(localStorage.getItem("pago"))||{};i.cliente=T,i.tipoPago=l,i.cambio=a,localStorage.setItem("pago",JSON.stringify(i)),R(i)},sx:{width:"100%",height:250,backgroundColor:0===I?"#00796b":"transparent",color:0===I?"white":"black"},children:"Validar"})})]}),(0,i.jsxs)(f.A,{sx:{display:"flex",flexDirection:"column",width:"50%"},children:[(0,i.jsx)(u.default,{sx:{display:"flex",flexDirection:"column",zoom:2,width:"auto"},children:(0,i.jsxs)(v.A,{variant:"text","aria-label":"text button group",sx:{height:60},children:[(0,i.jsxs)(x.default,{sx:{flexDirection:"row"},children:[(0,i.jsxs)(p.default,{variant:"outline",sx:{display:"flex",paddingRight:2,color:"black",fontSize:"8px"},gutterBottom:!0,children:[" ","Cambio: "," "]}),(0,i.jsxs)(p.default,{sx:{fontSize:"8px"},gutterBottom:!0,children:[" ","$",a.toLocaleString("es")," "]})]}),(0,i.jsxs)(x.default,{sx:{flexDirection:"row"},children:[(0,i.jsxs)(p.default,{variant:"outline",sx:{display:"flex",paddingRight:2,color:"black",fontSize:"8px"},gutterBottom:!0,children:[" ","Restante: "," "]}),(0,i.jsxs)(p.default,{sx:{fontSize:"8px"},gutterBottom:!0,children:[" ","$",I.toLocaleString("es")," "]})]}),(0,i.jsxs)(x.default,{sx:{flexDirection:"row"},children:[(0,i.jsxs)(p.default,{variant:"outline",sx:{display:"flex",paddingRight:2,color:"black",fontSize:"8px"},gutterBottom:!0,children:[" ","Total: "," "]}),(0,i.jsxs)(p.default,{sx:{fontSize:"8px"},gutterBottom:!0,children:[" ","$",O.total," "]})]})]})}),(0,i.jsxs)(u.default,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",alignContent:"center",width:"100%",height:"100%",zoom:1.5},children:[(0,i.jsxs)(v.A,{orientation:"vertical","aria-label":"vertical outlined button group",variant:"text",sx:{margin:"2px",width:"50%",height:"100%"},children:[(0,i.jsx)(x.default,{variant:"outlined",sx:{height:"100px"},value:1,onClick:F,children:"1"}),(0,i.jsx)(x.default,{variant:"outlined",sx:{height:"100px"},value:4,onClick:F,children:"4"}),(0,i.jsx)(x.default,{variant:"outlined",sx:{height:"100px"},value:7,onClick:F,children:"7"}),(0,i.jsx)(x.default,{variant:"outlined",sx:{height:"100px"},value:0,onClick:F,children:"+/-"})]}),(0,i.jsxs)(v.A,{orientation:"vertical","aria-label":"vertical contained button group",variant:"text",sx:{margin:"2px",width:"50%",height:"100%"},children:[(0,i.jsx)(x.default,{variant:"outlined",sx:{height:"100px"},value:2,onClick:F,children:"2"}),(0,i.jsx)(x.default,{variant:"outlined",sx:{height:"100px"},value:5,onClick:F,children:"5"}),(0,i.jsx)(x.default,{variant:"outlined",sx:{height:"100px"},value:8,onClick:F,children:"8"}),(0,i.jsx)(x.default,{variant:"outlined",sx:{height:"100px"},value:0,onClick:F,children:"0"})]}),(0,i.jsxs)(v.A,{orientation:"vertical","aria-label":"vertical contained button group",variant:"text",sx:{margin:"2px",width:"50%",height:"100%"},children:[(0,i.jsx)(x.default,{variant:"outlined",sx:{height:"100px"},value:3,onClick:F,children:"3"}),(0,i.jsx)(x.default,{variant:"outlined",sx:{height:"100px"},value:6,onClick:F,children:"6"}),(0,i.jsx)(x.default,{variant:"outlined",sx:{height:"100px"},value:9,onClick:F,children:"9"}),(0,i.jsx)(x.default,{variant:"outlined",sx:{height:"100px"},value:",",onClick:F,children:","})]}),(0,i.jsxs)(v.A,{orientation:"vertical","aria-label":"vertical contained button group",variant:"text",sx:{margin:"2px",width:"50%",height:"100%"},children:[(0,i.jsx)(x.default,{variant:"outlined",sx:{height:"100px"},value:10,onClick:F,children:"+10"}),(0,i.jsx)(x.default,{variant:"outlined",sx:{height:"100px"},value:20,onClick:F,children:"+20"}),(0,i.jsx)(x.default,{variant:"outlined",sx:{height:"100px"},value:50,onClick:F,children:"+50"}),(0,i.jsx)(x.default,{variant:"outlined",sx:{height:"100px"},onClick:J,children:"X"})]})]})]}),(0,i.jsxs)(f.A,{sx:{width:"20%",bgcolor:"background.paper"},children:[(0,i.jsxs)(g.A,{component:"nav","aria-label":"main mailbox folders",sx:{marginTop:-47},children:[(0,i.jsx)(j.A,{selected:3===z,onClick:()=>N(!0),children:(0,i.jsx)(m.A,{primary:"CLIENTE: ".concat(T.NOMBREALIAS)})}),(0,i.jsx)(j.A,{selected:4===z,onClick:e=>P(e,4),children:(0,i.jsx)(m.A,{primary:"FACTURA"})})]}),(0,i.jsx)(S.A,{open:w,onClose:()=>N(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,i.jsx)(u.default,{sx:b,children:(0,i.jsx)(c.default,{setOpen:N})})})]})]})]})]})}},58896:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>h});var i=l(95155),a=l(75436),n=l(8889),r=l(39241),o=l(70152),s=l(71014),d=l(70689),c=l(12115);let u=[{field:"CLIENTE",headerName:"NIT",width:130,headerClassName:"super-app-theme--header"},{field:"NOMBREALIAS",headerName:"NOMBRE",width:600,headerClassName:"super-app-theme--header"},{field:"DIRECCION",headerName:"DIRECCION",width:300,headerClassName:"super-app-theme--header"},{field:"TELEFONO1",headerName:"TELEFONO",width:190,headerClassName:"super-app-theme--header"},{field:"NOMVENDEDOR",headerName:"VENDEDOR",width:200,headerClassName:"super-app-theme--header"},{field:"SALDO",headerName:"CARTERA",type:"number",width:120,headerClassName:"super-app-theme--header",valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"}],x=async()=>{try{let e=await fetch(n.c.url+"/clientes/listar",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Network response was not ok");return await e.json()}catch(e){return console.error("Error fetching clients:",e),[]}},h=e=>{let{setOpen:t,seleccionarCliente:l}=e,{setCliente:n}=(0,d.A)(),[h,f]=(0,c.useState)(""),[p,g]=(0,c.useState)([]),[j,m]=(0,c.useState)([]),[C,A]=(0,c.useState)([]);(0,c.useEffect)(()=>{(async()=>{let e=await x();e&&e.length>0?(A(e),m(e)):console.log("No se encontraron clientes")})()},[]);let v=e=>{A(j.filter(t=>{let l=t.CLIENTE&&t.CLIENTE.toString().toLowerCase(),i=t.NOMVENDEDOR&&t.NOMVENDEDOR.toString().toLowerCase(),a=t.NOMBREALIAS&&t.NOMBREALIAS.toLowerCase();return(null==l?void 0:l.includes(e.toLowerCase()))||(null==i?void 0:i.includes(e.toLowerCase()))||(null==a?void 0:a.includes(e.toLowerCase()))}))},S=(0,c.useCallback)(e=>{if(g(e),e.length>0){let i=j.filter(t=>{let l=t.CLIENTE;return l&&l.toString().includes(e[0])});localStorage.setItem("clientTemp",JSON.stringify(i)),n(i[0]),t(!1),l(i[0])}},[j]);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(r.A,{container:!0,direction:"column",sx:{minHeight:"80vh",backgroundColor:"#ffffff",padding:2},children:[(0,i.jsxs)(a.default,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)(r.A,{size:6,children:(0,i.jsx)("h2",{children:(0,i.jsx)("strong",{children:"CLIENTES"})})}),(0,i.jsx)(r.A,{size:6,children:(0,i.jsx)(o.A,{id:"outlined-basic",variant:"outlined",label:"Buscador...",value:h,onChange:e=>{e.preventDefault(),f(e.target.value),v(e.target.value)},sx:{width:"100%"}})})]}),(0,i.jsx)(r.A,{size:12,sx:{flexGrow:1,marginBottom:2},children:(0,i.jsx)(a.default,{sx:{height:650,width:"100%","& .super-app-theme--header":{backgroundColor:"#80f5e7",color:"#000000"}},children:(0,i.jsx)(s.z,{rows:C,columns:u,pageSizeOptions:[5,10,20,30],onRowSelectionModelChange:S,rowSelectionModel:p,getRowId:e=>e.CLIENTE,sx:{backgroundColor:"#ffffff"},initialState:{pagination:{paginationModel:{page:0,pageSize:10}}}})})})]})})}},8889:(e,t,l)=>{"use strict";l.d(t,{c:()=>i,m:()=>a});let i={url:"http://172.20.20.3:8001"},a={url:"http://192.168.1.3:3010/api"}},70689:(e,t,l)=>{"use strict";l.d(t,{A:()=>d,AuthProvider:()=>s});var i=l(95155),a=l(12115),n=l(76046),r=l(89208);let o=(0,a.createContext)({login:e=>{},logout:()=>{}}),s=e=>{let{children:t}=e,l=(0,n.useRouter)(),[s]=(0,a.useState)(!0),[d,c]=(0,a.useState)(null),[u,x]=(0,a.useState)({}),[h,f]=(0,a.useState)({}),[p,g]=(0,a.useState)({}),j=(0,a.useCallback)(function(e){r.A.set("authTokens",JSON.stringify(e)),localStorage.setItem("auth",JSON.stringify(e)),c(e)},[]),m=(0,a.useCallback)(function(){l.push("/"),r.A.remove("authTokens"),localStorage.removeItem("auth"),c(null)},[]);(0,a.useEffect)(()=>{let e=localStorage.getItem("auth")||r.A.get("authTokens"),t=localStorage.getItem("pedido"),l=localStorage.getItem("caja"),i=localStorage.getItem("cliente");i&&x(JSON.parse(i)),t&&f(JSON.parse(t)),l&&g(JSON.parse(l)),e&&c(JSON.parse(e))},[]);let C=(0,a.useMemo)(()=>({auth:d,cliente:u,setCliente:x,pedido:h,setPedido:f,caja:p,setCaja:g,loading:s,login:j,logout:m}),[d,u,h,p,j,m]);return(0,i.jsx)(o.Provider,{value:C,children:t})},d=()=>(0,a.useContext)(o)}},e=>{var t=t=>e(e.s=t);e.O(0,[339,8320,9754,1083,1260,6403,152,3685,2670,7493,1669,1014,3975,8441,1517,7358],()=>t(94610)),_N_E=e.O()}]);