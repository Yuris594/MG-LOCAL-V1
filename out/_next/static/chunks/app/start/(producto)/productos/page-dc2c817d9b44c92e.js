(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2793],{20067:function(){},72061:function(){},38421:function(e,t,a){Promise.resolve().then(a.bind(a,78760))},24959:function(e,t,a){"use strict";var i=a(23963);t.Z=void 0;var r=i(a(19118)),n=a(57437);t.Z=(0,r.default)((0,n.jsx)("path",{d:"M11 18h2v-2h-2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4"}),"HelpOutline")},55357:function(e,t,a){"use strict";a.d(t,{Z:function(){return g}});var i=a(2265),r=a(44839),n=a(70587),l=a(76990),o=a(97434),d=a(13820),s=a(49134),c=a(7173),h=a(57437);let u=(0,c.Z)(),f=(0,s.Z)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,t[`maxWidth${(0,o.Z)(String(a.maxWidth))}`],a.fixed&&t.fixed,a.disableGutters&&t.disableGutters]}}),p=e=>(0,d.default)({props:e,name:"MuiContainer",defaultTheme:u}),x=(e,t)=>{let{classes:a,fixed:i,disableGutters:r,maxWidth:d}=e,s={root:["root",d&&`maxWidth${(0,o.Z)(String(d))}`,i&&"fixed",r&&"disableGutters"]};return(0,l.Z)(s,e=>(0,n.ZP)(t,e),a)};function g(e={}){let{createStyledComponent:t=f,useThemeProps:a=p,componentName:n="MuiContainer"}=e,l=t(({theme:e,ownerState:t})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}}),({theme:e,ownerState:t})=>t.fixed&&Object.keys(e.breakpoints.values).reduce((t,a)=>{let i=e.breakpoints.values[a];return 0!==i&&(t[e.breakpoints.up(a)]={maxWidth:`${i}${e.breakpoints.unit}`}),t},{}),({theme:e,ownerState:t})=>({..."xs"===t.maxWidth&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},...t.maxWidth&&"xs"!==t.maxWidth&&{[e.breakpoints.up(t.maxWidth)]:{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`}}}));return i.forwardRef(function(e,t){let i=a(e),{className:o,component:d="div",disableGutters:s=!1,fixed:c=!1,maxWidth:u="lg",classes:f,...p}=i,g={...i,component:d,disableGutters:s,fixed:c,maxWidth:u},m=x(g,n);return(0,h.jsx)(l,{as:d,ownerState:g,className:(0,r.Z)(m.root,o),ref:t,...p})})}},10416:function(e,t,a){"use strict";var i=a(57437),r=a(27800),n=a(2265),l=a(60091);t.Z=e=>{let{datos:t}=e,[a,o]=(0,n.useState)(!1);return(0,i.jsx)(l.default,{variant:"outlined",color:"success",onClick:()=>{if(!Array.isArray(t)||0===t.length){console.error("Datos no est\xe1n en el formato correcto o est\xe1n vac\xedos.");return}o(!0);try{let e=r.P6.book_new(),a=r.P6.json_to_sheet(t);r.P6.book_append_sheet(e,a,"Datos"),r.NC(e,"datos.xlsx")}catch(e){console.error("Error al generar el archivo Excel",e)}finally{o(!1)}},disabled:a,children:a?"Loading...":"Excel"})}},78760:function(e,t,a){"use strict";a.r(t);var i=a(57437),r=a(2265),n=a(30736),l=a(40468),o=a(97183),d=a(99128),s=a(24959),c=a(61169),h=a(77699),u=a(60335),f=a(83719),p=a(23983),x=a(74275),g=a(68265),m=a(28027),w=a(92355),N=a(31193),C=a(41448),b=a.n(C),j=a(13726),E=a(10416),O=a(41223);function S(e){let{children:t,value:a,index:r,...n}=e;return(0,i.jsx)("div",{role:"tabpanel",hidden:a!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r),...n,children:a===r&&(0,i.jsx)(N.default,{sx:{p:3},children:t})})}function A(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}S.propTypes={children:b().node,index:b().number.isRequired,value:b().number.isRequired};let R=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),I=[{field:"ARTICULO",headerName:"Cod",width:130},{field:"DESCRIPCION",headerName:"Referencia",width:700},{field:"SUBLINEA",headerName:"Sublinea",width:300},{field:"TOTAL_DISP",headerName:"Disp",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"PRECIO",headerName:"Precio",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"PORC_IMPUESTO",headerName:"IVA",width:130},{field:"PRECIOMASIVA",headerName:"Masiva",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"PORC_DCTO",headerName:"D1",width:130},{field:"UNIDAD_EMPAQUE",headerName:"Emp",width:130},{field:"EXIST_REAL",headerName:"Existreal",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"}],v=[{field:"FACTURA",headerName:"Factura",width:130},{field:"FECHA_DESPACHO",headerName:"Fecha",width:190,renderCell:e=>R(e.value)},{field:"ANULADA",headerName:"AN",width:50},{field:"PRECIO_TOTAL",headerName:"V.fact",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"PEDIDO",headerName:"Pedido",width:130},{field:"ARTICULO",headerName:"Articulo",width:130},{field:"DESCRIPCION",headerName:"Descripcion",width:700},{field:"CANTIDAD",headerName:"Cant",width:130,valueFormatter:e=>Number(e).toFixed(1),align:"right"},{field:"PRECIO_UNITARIO",headerName:"PrecioUni",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"PORCIVA",headerName:"IVA",width:130,align:"right"},{field:"PORDESC",headerName:"Desc",width:130,align:"right"},{field:"VDESC",headerName:"VDesc",width:130},{field:"TOTAL_MERCADERIA",headerName:"VTotal ",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"IDRUTERO",headerName:"IdRutero",width:130},{field:"FECHARUT",headerName:"FechaRut",width:300},{field:"IDGUIA",headerName:"IdGuia",width:130},{field:"FECHAGUIA",headerName:"FechaGuia",width:250,renderCell:e=>R(e.value)},{field:"OBSERVACIONES",headerName:"Observaciones",width:800},{field:"RUBRO1",headerName:"Docs2",width:500}],D=[{field:"FECHA",headerName:"Fecha",width:250,renderCell:e=>R(e.value)},{field:"CLIENTE",headerName:"Cliente",width:160},{field:"PEDIDO",headerName:"Pedido",width:100},{field:"VE",headerName:"VEND",width:80,align:"right"},{field:"PED",headerName:"Ped",width:100,align:"right"},{field:"DESP",headerName:"Desp",width:100,align:"right"},{field:"PEND",headerName:"Pend",width:100,align:"right"},{field:"ESTADO",headerName:"Estado",width:120},{field:"AUTORIZADONOM",headerName:"Autortizado",width:200,renderCell:e=>{let t=e.row.AUTORIZADONOM;return(0,i.jsx)(f.default,{style:{color:"APROBADO"===t?"#00FC00":"RETENIDO"===t?"#FF1507":"#000000",backgroundColor:"transparent"},children:t})}}],F=async()=>{let e=await fetch("/api/productos/bodegas",{method:"GET",headers:{"Content-Type":"application/json"}});return await e.json()},P=async e=>(await fetch("/api/productos/listar/".concat(e.BODEGA),{method:"GET",headers:{"Content-Type":"application/json"}})).json(),T=async e=>{let t=await fetch("/api/productos/facturas/".concat(e.ARTICULO),{method:"GET",headers:{"Content-Type":"application/json"}});return t.ok||404!==t.status?t.json():(console.log("No hay facturas para este producto."),[])},y=async e=>{let t=await fetch("/api/productos/pedidos/".concat(e.ARTICULO),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok&&404===t.status)return console.log("No hay pedidos para este producto."),[];let a=await t.json();return console.log(a),a};t.default=function(){let e=(0,r.useRef)(),[t,a]=(0,r.useState)(0),[C,b]=(0,r.useState)(!1),[R,Z]=(0,r.useState)([]),[L,k]=(0,r.useState)([]),[U,_]=(0,r.useState)([]),[M,B]=(0,r.useState)([]),[G,V]=(0,r.useState)(""),[z,W]=(0,r.useState)([]),[H,$]=(0,r.useState)(!0),[q,Y]=(0,r.useState)([]),[Q,X]=(0,r.useState)([]),[J,K]=(0,r.useState)(null),ee=async()=>{let e=await F();try{e&&Z(e)}catch(e){(0,O.conexion)()}};(0,r.useEffect)(()=>{ee()},[]),(0,r.useEffect)(()=>{J&&(e.current.focus(),et())},[J]),(0,r.useEffect)(()=>{$(!0)},[t]);let et=async()=>{if(J){b(!0);let e=await P(J);try{e?(b(!1),W(e),X(e)):(b(!1),W([])),$(!1)}catch(e){b(!1)}}},ea=async()=>{let e=await T(G);B([]);try{J&&(e?B(e):B([]),$(!1))}catch(e){b(!1)}},ei=async()=>{let e=await y(G);k([]);try{J&&(e?k(e):k([]),$(!1))}catch(e){console.log(e)}},er=e=>{let t=e.toLowerCase();W(Q.filter(e=>Object.values(e).map(e=>e?e.toString().toLowerCase():"").some(e=>e.includes(t))))},en=(0,r.useCallback)(e=>{if(Y(e),e.length>0){let t=Q.filter(t=>{let a=t.ARTICULO;if(a){let t=a.toString();return e.includes(t)}return!1});t.length>0&&(V(t[0]),ea(),ei())}},[Q]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(N.default,{children:[" "," "," ",(0,i.jsx)(j.Z,{})," "," "]}),(0,i.jsx)(n.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:C,children:(0,i.jsx)(l.default,{color:"inherit"})}),(0,i.jsx)(N.default,{sx:{padding:"20px"},children:(0,i.jsx)(f.default,{variant:"h5",component:"h1",gutterBottom:!0,sx:{display:"flex",justifyContent:"column",alignItems:"center",width:"auto",margin:0,color:"#000000"},children:"PRODUCTOS"})}),(0,i.jsxs)(N.default,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,i.jsx)(m.Z,{children:(0,i.jsx)(c.Z,{options:R,value:J,onChange:(e,t)=>{t&&(K(null),K(t),et(t))},getOptionLabel:e=>e.NOMBRE||"Bodegas",disablePortal:!0,id:"combo-box-demo",sx:{width:350},isOptionEqualToValue:(e,t)=>e.NOMBRE===t.NOMBRE,renderInput:e=>(0,i.jsx)(p.Z,{...e,label:"Bodegas",placeholder:"Selecciona una bodega",variant:"standard"})})}),(0,i.jsx)(N.default,{children:(0,i.jsx)(f.default,{variant:"h5",component:"h1",gutterBottom:!0,sx:{display:"flex",justifyContent:"column",alignItems:"center",width:"auto",margin:0,color:"#920b0d"},children:G.DESCRIPCION})}),(0,i.jsxs)(N.default,{sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:[z.length>0?(0,i.jsx)(E.Z,{datos:z}):"",(0,i.jsxs)(m.Z,{elevation:3,sx:{p:"2px 4px",display:"flex",alignItems:"flex-rigth",width:400,margin:"10px"},children:[(0,i.jsx)(x.ZP,{sx:{ml:1,flex:1},placeholder:"Buscar",inputProps:{"aria-label":"search google maps"},id:"usuario",label:"Usuario",name:"PER_usuario",autoComplete:"usuario",autoFocus:!0,value:U,onChange:e=>{e.preventDefault(),_(e.target.value),er(e.target.value)},inputRef:e}),(0,i.jsx)(u.Z,{title:"buscar",sx:{p:"10px"},"aria-label":"search",children:(0,i.jsx)(h.Z,{})})]})]})]}),(0,i.jsxs)(N.default,{sx:{width:"100%"},children:[(0,i.jsx)(N.default,{sx:{borderBottom:1,borderColor:"divider"},children:(0,i.jsxs)(w.Z,{value:t,onChange:(e,t)=>{a(t)},"aria-label":"basic tabs example",children:[(0,i.jsx)(o.Z,{label:"Articulos",...A(0)}),(0,i.jsx)(o.Z,{label:"Pedidos:".concat(L.length),...A(1),onClick:ei}),(0,i.jsx)(o.Z,{label:"Facturas:".concat(M.length),...A(2),onClick:ea})]})}),(0,i.jsx)(S,{component:N.default,value:t,index:0,children:(0,i.jsx)(N.default,{sx:{width:"100%",height:950},children:z.length<=0?(0,i.jsxs)(N.default,{sx:{width:"100%"},title:"Seleccione una bodega en la lista de arriba",children:[" ",(0,i.jsx)(s.Z,{})," "]}):(0,i.jsx)(g._,{rows:z,columns:I,initialState:{pagination:{paginationModel:{page:0,pageSize:16}}},pageSizeOptions:[5,16,20],onRowSelectionModelChange:en,rowSelectionModel:q,getRowId:e=>e.ARTICULO,sx:{backgroundColor:"#ffffff"}})})}),(0,i.jsx)(S,{component:N.default,value:t,index:1,children:!0===H?(0,i.jsx)(N.default,{sx:{width:"100%"},children:(0,i.jsx)(d.Z,{})}):0===L.length?(0,i.jsx)("h1",{children:"NO HAY PEDIDOS"}):(0,i.jsx)(N.default,{sx:{width:"100%",height:950},children:(0,i.jsx)(g._,{rows:L,columns:D,initialState:{pagination:{paginationModel:{page:0,pageSize:16}}},pageSizeOptions:[5,16,20],getRowId:e=>e.PEDIDO,sx:{backgroundColor:"#ffffff"}})})}),(0,i.jsx)(S,{component:N.default,value:t,index:2,children:!0===H?(0,i.jsx)(N.default,{sx:{width:"100%"},children:(0,i.jsx)(d.Z,{})}):M&&M.length<=0?(0,i.jsx)("h1",{children:"NO HAY FACTURAS"}):(0,i.jsx)(N.default,{sx:{width:"100%",height:950},children:(0,i.jsx)(g._,{rows:M,columns:v,initialState:{pagination:{paginationModel:{page:0,pageSize:16}}},pageSizeOptions:[5,16,20],getRowId:e=>e.FACTURA,sx:{backgroundColor:"#ffffff"}})})})]})]})}}},function(e){e.O(0,[4488,1425,9461,4797,4129,6291,4275,3983,2561,6981,8265,9105,7734,8433,9696,4264,1223,2971,7023,1744],function(){return e(e.s=38421)}),_N_E=e.O()}]);