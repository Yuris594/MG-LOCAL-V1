(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4207],{83686:()=>{},32383:()=>{},63913:(e,t,a)=>{Promise.resolve().then(a.bind(a,89372))},39241:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(46123),l=a(89142),i=a(12567),o=a(35761);let s=(0,r.A)({createStyledComponent:(0,l.default)("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.container&&t.container]}}),componentName:"MuiGrid2",useThemeProps:e=>(0,i.b)({props:e,name:"MuiGrid2"}),useTheme:o.default})},86898:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(1297),l=a(26366);let i=(0,r.unstable_createUseMediaQuery)({themeId:l.A})},65068:(e,t,a)=>{"use strict";a.d(t,{A:()=>k});var r=a(95155),l=a(20457),i=a(75436),o=a(11451),s=a(46805),n=a(894),d=a(2295),c=a(9561),u=a(81894),h=a(91888),x=a(74676),p=a(92080),f=a(96212),m=a(6069),A=a(9581),C=a(43677),S=a(85244),E=a(85067),N=a(2138);a(76046);var g=a(70689),j=a(12115),O=a(4918),I=a(41983),w=a(36017),T=a(2091),R=a(60391),D=a(48173),b=a.n(D);let P=e=>{let{page:t}=e;return(0,r.jsx)(i.default,{children:(0,r.jsx)(O.A,{children:t.map(e=>(0,r.jsx)(I.Ay,{disablePadding:!0,children:(0,r.jsxs)(w.A,{LinkComponent:b(),href:e.url,onClick:e.onClick,children:[(0,r.jsx)(T.A,{children:e.icon}),(0,r.jsx)(R.A,{primaryTypographyProps:{fontSize:15,fontWeight:"medium",letterSpacing:0},children:e.title})]})},e.title))})})};var v=a(78897),y=a.n(v),F=a(79046),L=a.n(F);let k=()=>{let{auth:e,logout:t}=(0,g.A)(),[a,O]=(0,j.useState)(null),[I,w]=(0,j.useState)(!1),T=()=>{w(!1),O(null)},R=[{title:"USUARIOS ",url:"/start/usuarios",icon:(0,r.jsx)(x.A,{})},{title:"PEDIDOS",url:"/start/pedidos",icon:(0,r.jsx)(p.A,{})},{title:"CLIENTES",url:"/start/clients",icon:(0,r.jsx)(f.A,{})},{title:"PRODUCTOS",icon:(0,r.jsx)(m.A,{}),onClick:e=>{w(!0),O(e.currentTarget)}},{title:"FACTURAS",url:"/start/facturas",icon:(0,r.jsx)(A.A,{})},{title:"CAJA",url:"/start/pedidos/pedidosCaja",icon:(0,r.jsx)(C.A,{})}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.default,{}),(0,r.jsxs)(i.default,{sx:{flexGrow:1},children:[(0,r.jsx)(o.A,{position:"static",sx:{bgcolor:"#262626",width:"auto"},children:(0,r.jsxs)(s.A,{children:[(0,r.jsx)(n.A,{color:"inherit",onClick:e=>{O(e.currentTarget)},sx:{display:{xs:"flex",md:"none"}},children:(0,r.jsx)(S.A,{})}),(0,r.jsx)(i.default,{sx:{display:{xs:"none",md:"flex"}},children:R.map(e=>(0,r.jsx)(d.default,{sx:{fontSize:"15px"},color:"inherit",size:"large",LinkComponent:b(),href:e.url,onClick:e.onClick,children:e.title},e.title))}),(0,r.jsx)(c.default,{variant:"h6",sx:{flexGrow:1}}),(0,r.jsx)(d.default,{component:b(),href:"/start",color:"inherit",children:(0,r.jsx)(N.A,{})}),(0,r.jsxs)(d.default,{className:L().className,color:"inherit",sx:{fontSize:"15px"},children:[(0,r.jsx)(f.A,{}),e&&e.PER_Nom]}),(0,r.jsx)(d.default,{color:"inherit",onClick:()=>{y().fire({title:"\xbfQuieres Terminar La Sesi\xf3n?",icon:"question",showCancelButton:!0,confirmButtonColor:"#28ee32",cancelButtonColor:"#f12260",confirmButtonText:"Aceptar"}).then(e=>{e.isConfirmed&&t()})},children:(0,r.jsx)(E.A,{})})]})}),(0,r.jsxs)(u.A,{id:"basic-menu",anchorEl:a,open:I,onClose:T,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,r.jsx)(h.A,{onClick:T,component:b(),href:"/start/buscarProd",children:"Buscar Por Referencias"}),(0,r.jsx)(h.A,{onClick:T,component:b(),href:"/start/productosMG",children:"Lista de Todos Los Productos"})]}),(0,r.jsx)(u.A,{id:"basic-menu",anchorEl:a,MenuListProps:{"aria-labelledby":"basic-button"},open:!!a,onClose:()=>{O(null)},sx:{display:{xs:"flex",md:"none"}},children:(0,r.jsx)(P,{page:R})})]})]})}},76134:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(95155),l=a(7660),i=a(12115),o=a(2295);let s=e=>{let{datos:t}=e,[a,s]=(0,i.useState)(!1);return(0,r.jsx)(o.default,{variant:"outlined",color:"success",onClick:()=>{if(!Array.isArray(t)||0===t.length){console.error("Datos no est\xe1n en el formato correcto o est\xe1n vac\xedos.");return}s(!0);try{let e=l.Wp.book_new(),a=l.Wp.json_to_sheet(t);l.Wp.book_append_sheet(e,a,"Datos"),l._h(e,"datos.xlsx")}catch(e){console.error("Error al generar el archivo Excel",e)}finally{s(!1)}},disabled:a,children:a?"Loading...":"Excel"})}},89372:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>P});var r=a(95155),l=a(12115),i=a(81996),o=a.n(i),s=a(39241),n=a(74205),d=a(65068);let c=(0,a(12983).A)((0,r.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");var u=a(76134),h=a(75436),x=a(9561),p=a(35761),f=a(86898),m=a(4230),A=a(70152),C=a(894),S=a(73378),E=a(79987),N=a(54255),g=a(8889);function j(e){let{children:t,value:a,index:l,...i}=e;return(0,r.jsx)("div",{role:"tabpanel",hidden:a!==l,id:"simple-tabpanel-".concat(l),"aria-labelledby":"simple-tab-".concat(l),...i,children:a===l&&(0,r.jsx)(h.default,{sx:{p:3},children:t})})}function O(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}j.propTypes={children:o().node,index:o().number.isRequired,value:o().number.isRequired};let I=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),w=[{field:"ARTICULO",headerName:"COD",width:130},{field:"DESCRIPCION",headerName:"REFERENCIA",width:700},{field:"SUBLINEA",headerName:"SUBLINEA",width:300},{field:"TOTAL_DISP",headerName:"DISP-MG",width:130},{field:"EXIST_REAL",headerName:"EXISTREAL",width:130},{field:"PRECIO",headerName:"PRECIO",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"PORC_IMPUESTO",headerName:"IVA",width:130},{field:"PRECIOMASIVA",headerName:"MASIVA",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"PORC_DCTO",headerName:"D1",width:130},{field:"UNIDAD_EMPAQUE",headerName:"EMP",width:130}],T=[{field:"FACTURA",headerName:"FACTURA",width:130},{field:"FECHA_DESPACHO",headerName:"FECHA",width:190,renderCell:e=>I(e.value)},{field:"ANULADA",headerName:"AN",width:50},{field:"PRECIO_TOTAL",headerName:"V. FACT",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"PEDIDO",headerName:"PEDIDO",width:130,cellClassName:"pedido-cell"},{field:"ARTICULO",headerName:"ARTICULO",width:130},{field:"DESCRIPCION",headerName:"DESCRIPCION",width:700},{field:"CANTIDAD",headerName:"CANT",width:130},{field:"PRECIO_UNITARIO",headerName:"PRECIO UNI.",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"PORCIVA",headerName:"IVA",width:130},{field:"PORDESC",headerName:"DESC",width:130},{field:"VDESC",headerName:"V. DESC",width:130},{field:"TOTAL_MERCADERIA",headerName:"V. TOTAL",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))},cellClassName:"autor-cell"},{field:"IDRUTERO",headerName:"ID RUTERO",width:130},{field:"IDGUIA",headerName:"ID GUIA",width:130},{field:"OBSERVACIONES",headerName:"OBSERVACIONES",width:800},{field:"RUBRO1",headerName:"DOCS 2",width:500}],R=[{field:"FECHA",headerName:"FECHA",width:250,renderCell:e=>I(e.value)},{field:"CLIENTE",headerName:"CLIENTE",width:160},{field:"PEDIDO",headerName:"PEDIDO",width:100,cellClassName:"pedido-cell"},{field:"PED",headerName:"PED",width:100},{field:"DESP",headerName:"DESP",width:100},{field:"PEND",headerName:"PEND",width:100},{field:"ESTADO",headerName:"ESTADO",width:120},{field:"AUTORIZADONOM",headerName:"AUTORIZADO",width:200,renderCell:e=>{let t=e.row.AUTORIZADONOM;return(0,r.jsx)(x.default,{style:{color:"APROBADO"===t?"#00FC00":"RETENIDO"===t?"#FF1507":"#000000",backgroundColor:"transparent"},children:t})}},{field:"VE",headerName:"VEND",width:80,cellClassName:"autor-cell"}],D=async e=>{let t=await fetch(g.c.url+"/productos/facturas/".concat(e.ARTICULO),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok){if(404===t.status)return console.log("No hay facturas para este producto."),[];throw Error("Error en la solicitud: ".concat(t.status))}try{return await t.json()}catch(e){throw console.error("Error al analizar JSON:",e),Error("La respuesta no tiene un formato JSON v\xe1lido.")}},b=async e=>{let t=await fetch(g.c.url+"/productos/pedidos/".concat(e.ARTICULO),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok&&404===t.status)return console.log("No hay pedidos para este producto."),[];try{return await t.json()}catch(e){throw console.error("Error al analizar JSON:",e),Error("La respuesta no tiene un formato JSON v\xe1lido.")}},P=()=>{let[e,t]=(0,l.useState)(0),[a,i]=(0,l.useState)([]),[o,x]=(0,l.useState)([]),[I,P]=(0,l.useState)(null),[v,y]=(0,l.useState)([]),[F,L]=(0,l.useState)(!0),[k,U]=(0,l.useState)(""),[M,z]=(0,l.useState)(""),[_,G]=(0,l.useState)(!1),[V,B]=(0,l.useState)(!1),J=(0,p.default)();(0,f.A)(J.breakpoints.down("sm"));let H=async()=>{I?G(!1):G(!0),k.trim()?B(!1):B(!0),L(!0);try{let e="ARTICULO"===I?g.c.url+"/productos/".concat(k):g.c.url+"/productos/descripcion/".concat(k),t=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(t.ok){let e=await t.json();y(e)}else console.log("Error en la busqueda:",t.statusText),y([])}catch(e){console.log("Error al momento de realizar la busqueda",e),y([])}finally{L(!1)}},q=async()=>{let e=await D(M);x([]);try{e?x(e):x([]),L(!1)}catch(e){console.log("Este articulo no tiene facturas",e)}},W=async()=>{let e=await b(M);i([]);try{e?i(e):i([]),L(!1)}catch(e){console.log("Este articulo no tiene pedidos",e)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.A,{}),(0,r.jsxs)(s.A,{container:!0,direction:"column",sx:{minHeight:"90vh",backgroundColor:"#ffffff",padding:2},children:[(0,r.jsx)(s.A,{size:12,children:(0,r.jsxs)(h.default,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[(0,r.jsxs)(h.default,{display:"flex",alignItems:"center",gap:2,children:[(0,r.jsx)("h2",{children:(0,r.jsx)("strong",{children:"Buscar Por Referencias"})}),(0,r.jsx)(m.A,{id:"size-small-outlined",size:"small",disablePortal:!0,options:[{label:"ARTICULO"},{label:"REFERENCIA"}],value:I,onChange:(e,t)=>{P((null==t?void 0:t.label)||"")},renderInput:e=>(0,r.jsx)(A.A,{...e,label:"Criterio de Busqueda",variant:"outlined",error:_,helperText:_?"El criterio es requerido":""}),sx:{width:190}}),(0,r.jsx)(A.A,{id:"outlined-basic",size:"small",value:k,onChange:e=>U(e.target.value),onKeyPress:e=>{"Enter"===e.key&&H()},error:V,helperText:V?"Este valor es requerido":"",sx:{width:190}}),(0,r.jsx)(C.A,{onClick:H,children:(0,r.jsx)(c,{sx:{fontSize:45},color:"success"})})]}),(0,r.jsx)(h.default,{children:(0,r.jsx)("h3",{style:{margin:0,color:"#db2093"},children:M.DESCRIPCION})}),(0,r.jsx)(u.A,{datos:v})]})}),(0,r.jsx)(s.A,{size:12,children:(0,r.jsxs)(h.default,{sx:{width:"100%"},children:[(0,r.jsx)(h.default,{sx:{borderBottom:1,borderColor:"divider"},children:(0,r.jsxs)(S.A,{value:e,onChange:(e,a)=>{t(a)},variant:"fullWidth","aria-label":"full width tabs example",children:[(0,r.jsx)(E.A,{label:"Articulos",...O(0)}),(0,r.jsx)(E.A,{label:"Pedidos: ".concat(a.length),...O(1),onClick:W}),(0,r.jsx)(E.A,{label:"Facturas: ".concat(o.length),...O(2),onClick:q})]})}),(0,r.jsx)(j,{component:h.default,value:e,index:0,dir:J.direction,children:(0,r.jsx)(h.default,{sx:{width:"100%",height:750},children:(0,r.jsx)(n.z,{rows:v,columns:w,pageSizeOptions:[5,12,20],getRowId:e=>e.ARTICULO,onRowClick:e=>{z(e.row)},initialState:{pagination:{paginationModel:{page:0,pageSize:12}}},sx:{"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"}}})})}),(0,r.jsx)(j,{component:h.default,value:e,index:1,dir:J.direction,children:!0===F?(0,r.jsx)(h.default,{sx:{width:"100%"},children:(0,r.jsx)(N.A,{})}):a.length<=0?(0,r.jsx)("h2",{children:"NO HAY PEDIDOS"}):(0,r.jsx)(h.default,{sx:{width:"100%",height:750},children:(0,r.jsx)(n.z,{rows:a,columns:R,initialState:{pagination:{paginationModel:{page:0,pageSize:12}}},pageSizeOptions:[5,12,20],getRowId:e=>e.PEDIDO,sx:{"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"}}})})}),(0,r.jsx)(j,{component:h.default,value:e,index:2,dir:J.direction,children:!0===F?(0,r.jsx)(h.default,{sx:{width:"100%"},children:(0,r.jsx)(N.A,{})}):o.length<=0?(0,r.jsx)("h2",{children:"NO HAY FACTURAS"}):(0,r.jsx)(h.default,{sx:{width:"100%",height:750},children:(0,r.jsx)(n.z,{rows:o,columns:T,initialState:{pagination:{paginationModel:{page:0,pageSize:12}}},pageSizeOptions:[5,12,20],getRowId:e=>e.FACTURA,sx:{"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"}}})})})]})})]})]})}},8889:(e,t,a)=>{"use strict";a.d(t,{c:()=>r});let r={url:"http://172.20.20.3:8001"}},70689:(e,t,a)=>{"use strict";a.d(t,{A:()=>d,AuthProvider:()=>n});var r=a(95155),l=a(12115),i=a(76046),o=a(89208);let s=(0,l.createContext)({login:e=>{},logout:()=>{}}),n=e=>{let{children:t}=e,a=(0,i.useRouter)(),[n]=(0,l.useState)(!0),[d,c]=(0,l.useState)({}),[u,h]=(0,l.useState)(null),[x,p]=(0,l.useState)({}),[f,m]=(0,l.useState)({}),[A,C]=(0,l.useState)({}),[S,E]=(0,l.useState)({}),[N,g]=(0,l.useState)({}),j=(0,l.useCallback)(function(e){o.A.set("authTokens",JSON.stringify(e)),localStorage.setItem("auth",JSON.stringify(e)),h(e)},[]),O=(0,l.useCallback)(function(){o.A.remove("authTokens"),localStorage.removeItem("auth"),h(null),a.push("/")},[]);(0,l.useEffect)(()=>{let e=localStorage.getItem("auth"),t=localStorage.getItem("caja"),a=localStorage.getItem("pedido"),r=localStorage.getItem("pedidoV"),l=localStorage.getItem("cartera"),i=localStorage.getItem("cliente"),o=localStorage.getItem("clienteV");o&&C(JSON.parse(o)),r&&E(JSON.parse(r)),l&&g(JSON.parse(l)),e&&h(JSON.parse(e)),i&&m(JSON.parse(i)),a&&p(JSON.parse(a)),t&&c(JSON.parse(t))},[]);let I=(0,l.useMemo)(()=>({auth:u,cliente:f,setCliente:m,pedido:x,setPedido:p,caja:d,setCaja:c,clienteV:A,setClienteV:C,pedidosV:S,setPedidosV:E,carteraV:N,setCarteraV:g,loading:n,login:j,logout:O}),[u,f,x,d,A,S,N,j,O]);return(0,r.jsx)(s.Provider,{value:I,children:t})},d=()=>(0,l.useContext)(s)}},e=>{var t=t=>e(e.s=t);e.O(0,[339,8320,3524,6058,5854,994,5975,1260,6403,152,8173,2670,7493,6675,4205,6899,914,8441,1517,7358],()=>t(63913)),_N_E=e.O()}]);