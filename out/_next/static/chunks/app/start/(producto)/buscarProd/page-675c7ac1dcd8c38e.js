(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4207],{83686:()=>{},32383:()=>{},63913:(e,t,a)=>{Promise.resolve().then(a.bind(a,89372))},39241:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(46123),l=a(89142),o=a(12567),i=a(35761);let n=(0,r.A)({createStyledComponent:(0,l.default)("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.container&&t.container]}}),componentName:"MuiGrid2",useThemeProps:e=>(0,o.b)({props:e,name:"MuiGrid2"}),useTheme:i.default})},86898:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(1297),l=a(26366);let o=(0,r.unstable_createUseMediaQuery)({themeId:l.A})},65068:(e,t,a)=>{"use strict";a.d(t,{A:()=>k});var r=a(95155),l=a(20457),o=a(75436),i=a(11451),n=a(46805),s=a(894),d=a(2295),c=a(9561),u=a(81894),h=a(91888),p=a(74676),m=a(92080),x=a(96212),f=a(6069),A=a(9581),C=a(43677),S=a(85244),E=a(85067),g=a(2138),j=a(70689),N=a(79046),F=a.n(N),O=a(12115),I=a(78897),w=a.n(I),b=a(4918),R=a(41983),T=a(36017),D=a(2091),y=a(60391),v=a(48173),P=a.n(v);let L=e=>{let{page:t}=e;return(0,r.jsx)(o.default,{children:(0,r.jsx)(b.A,{children:t.map(e=>(0,r.jsx)(R.Ay,{disablePadding:!0,children:(0,r.jsxs)(T.A,{LinkComponent:P(),href:e.url,onClick:e.onClick,children:[(0,r.jsx)(D.A,{children:e.icon}),(0,r.jsx)(y.A,{primaryTypographyProps:{fontSize:15,fontWeight:"medium",letterSpacing:0},children:e.title})]})},e.title))})})},k=()=>{let{auth:e,logout:t}=(0,j.A)(),[a,N]=(0,O.useState)(null),[I,b]=(0,O.useState)(!1),R=()=>{b(!1),N(null)},T=[{title:"USUARIOS ",url:"/start/usuarios/",icon:(0,r.jsx)(p.A,{})},{title:"PEDIDOS",url:"/start/pedidos/",icon:(0,r.jsx)(m.A,{})},{title:"CLIENTES",url:"/start/clients/",icon:(0,r.jsx)(x.A,{})},{title:"PRODUCTOS",icon:(0,r.jsx)(f.A,{}),onClick:e=>{b(!0),N(e.currentTarget)}},{title:"FACTURAS",url:"/start/facturas/",icon:(0,r.jsx)(A.A,{})},{title:"CAJA",url:"/start/pedidos/pedidosCaja/",icon:(0,r.jsx)(C.A,{})}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.default,{}),(0,r.jsxs)(o.default,{sx:{flexGrow:1},children:[(0,r.jsx)(i.A,{position:"static",sx:{bgcolor:"#262626",width:"auto"},children:(0,r.jsxs)(n.A,{children:[(0,r.jsx)(s.A,{color:"inherit",onClick:e=>{N(e.currentTarget)},sx:{display:{xs:"flex",md:"none"}},children:(0,r.jsx)(S.A,{})}),(0,r.jsx)(o.default,{sx:{display:{xs:"none",md:"flex"}},children:T.map(e=>(0,r.jsx)(d.default,{sx:{fontSize:"15px"},color:"inherit",size:"large",LinkComponent:P(),href:e.url,onClick:e.onClick,children:e.title},e.title))}),(0,r.jsx)(c.default,{variant:"h6",sx:{flexGrow:1}}),(0,r.jsx)(d.default,{component:P(),href:"/start",color:"inherit",children:(0,r.jsx)(g.A,{})}),(0,r.jsxs)(d.default,{className:F().className,color:"inherit",sx:{fontSize:"15px"},children:[(0,r.jsx)(x.A,{}),e&&e.PER_Nom]}),(0,r.jsx)(d.default,{color:"inherit",onClick:()=>{w().fire({title:"\xbfQuieres Terminar La Sesi\xf3n?",icon:"question",showCancelButton:!0,confirmButtonColor:"#28ee32",cancelButtonColor:"#f12260",confirmButtonText:"Aceptar"}).then(e=>{e.isConfirmed&&t()})},children:(0,r.jsx)(E.A,{})})]})}),(0,r.jsxs)(u.A,{id:"basic-menu",anchorEl:a,open:I,onClose:R,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,r.jsx)(h.A,{onClick:R,component:P(),href:"/start/buscarProd/",children:"Buscar Por Referencias"}),(0,r.jsx)(h.A,{onClick:R,component:P(),href:"/start/productosMG/",children:"Lista de Todos Los Productos"})]}),(0,r.jsx)(u.A,{id:"basic-menu",anchorEl:a,MenuListProps:{"aria-labelledby":"basic-button"},open:!!a,onClose:()=>{N(null)},sx:{display:{xs:"flex",md:"none"}},children:(0,r.jsx)(L,{page:T})})]})]})}},76134:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(95155),l=a(7660),o=a(12115),i=a(2295);let n=e=>{let{datos:t}=e,[a,n]=(0,o.useState)(!1);return(0,r.jsx)(i.default,{variant:"outlined",color:"success",onClick:()=>{if(!Array.isArray(t)||0===t.length){console.error("Datos no est\xe1n en el formato correcto o est\xe1n vac\xedos.");return}n(!0);try{let e=l.Wp.book_new(),a=l.Wp.json_to_sheet(t);l.Wp.book_append_sheet(e,a,"Datos"),l._h(e,"datos.xlsx")}catch(e){console.error("Error al generar el archivo Excel",e)}finally{n(!1)}},disabled:a,children:a?"Loading...":"Excel"})}},89372:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>D});var r=a(95155),l=a(12115),o=a(81996),i=a.n(o),n=a(39241),s=a(74205),d=a(65068);let c=(0,a(12983).A)((0,r.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");var u=a(76134),h=a(75436),p=a(9561),m=a(35761),x=a(86898),f=a(4230),A=a(70152),C=a(894),S=a(73378),E=a(79987),g=a(54255),j=a(8889);function N(e){let{children:t,value:a,index:l,...o}=e;return(0,r.jsx)("div",{role:"tabpanel",hidden:a!==l,id:"simple-tabpanel-".concat(l),"aria-labelledby":"simple-tab-".concat(l),...o,children:a===l&&(0,r.jsx)(h.default,{sx:{p:3},children:t})})}function F(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}N.propTypes={children:i().node,index:i().number.isRequired,value:i().number.isRequired};let O=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),I=[{field:"ARTICULO",headerName:"COD",width:130},{field:"DESCRIPCION",headerName:"REFERENCIA",width:700},{field:"SUBLINEA",headerName:"SUBLINEA",width:300},{field:"TOTAL_DISP",headerName:"DISP-MG",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"EXIST_REAL",headerName:"EXISTREAL",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"PRECIO",headerName:"PRECIO",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"PORC_IMPUESTO",headerName:"IVA",width:130,valueFormatter:e=>{let t=parseFloat(e).toLocaleString();return"".concat(parseFloat(t).toFixed(1))},type:"number"},{field:"PRECIOMASIVA",headerName:"MASIVA",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"PORC_DCTO",headerName:"D1",width:130,valueFormatter:e=>{let t=parseFloat(e).toLocaleString();return"".concat(parseFloat(t).toFixed(1))},type:"number"},{field:"UNIDAD_EMPAQUE",headerName:"EMP",width:130}],w=[{field:"FACTURA",headerName:"FACTURA",width:130},{field:"FECHA_DESPACHO",headerName:"FECHA",width:190,renderCell:e=>O(e.value)},{field:"ANULADA",headerName:"AN",width:50},{field:"PRECIO_TOTAL",headerName:"V. FACT",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"PEDIDO",headerName:"PEDIDO",width:130,cellClassName:"pedido-cell"},{field:"ARTICULO",headerName:"ARTICULO",width:130},{field:"DESCRIPCION",headerName:"DESCRIPCION",width:700},{field:"CANTIDAD",headerName:"CANT",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"PRECIO_UNITARIO",headerName:"PRECIO UNI.",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"PORCIVA",headerName:"IVA",width:130,valueFormatter:e=>{let t=parseFloat(e).toLocaleString();return"".concat(parseFloat(t).toFixed(1))},type:"number"},{field:"PORDESC",headerName:"DESC",width:130,valueFormatter:e=>{let t=parseFloat(e).toLocaleString();return"".concat(parseFloat(t).toFixed(1))},type:"number"},{field:"VDESC",headerName:"V. DESC",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())}},{field:"TOTAL_MERCADERIA",headerName:"V. TOTAL",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number",cellClassName:"autor-cell"},{field:"IDRUTERO",headerName:"ID RUTERO",width:130},{field:"IDGUIA",headerName:"ID GUIA",width:130},{field:"OBSERVACIONES",headerName:"OBSERVACIONES",width:800},{field:"RUBRO1",headerName:"DOCS 2",width:500}],b=[{field:"FECHA",headerName:"FECHA",width:250,renderCell:e=>O(e.value)},{field:"CLIENTE",headerName:"CLIENTE",width:160},{field:"PEDIDO",headerName:"PEDIDO",width:100,cellClassName:"pedido-cell"},{field:"PED",headerName:"PED",width:100,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"DESP",headerName:"DESP",width:100,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"PEND",headerName:"PEND",width:100,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},type:"number"},{field:"ESTADO",headerName:"ESTADO",width:120},{field:"AUTORIZADONOM",headerName:"AUTORIZADO",width:200,renderCell:e=>{let t=e.row.AUTORIZADONOM;return(0,r.jsx)(p.default,{style:{color:"APROBADO"===t?"#00FC00":"RETENIDO"===t?"#FF1507":"#000000",backgroundColor:"transparent"},children:t})}},{field:"VE",headerName:"VEND",width:80,cellClassName:"autor-cell"}],R=async e=>{let t=await fetch(j.c.url+"/productos/facturas/".concat(e.ARTICULO),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok){if(404===t.status)return console.log("No hay facturas para este producto."),[];throw Error("Error en la solicitud: ".concat(t.status))}try{return await t.json()}catch(e){throw console.error("Error al analizar JSON:",e),Error("La respuesta no tiene un formato JSON v\xe1lido.")}},T=async e=>{let t=await fetch(j.c.url+"/productos/pedidos/".concat(e.ARTICULO),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok&&404===t.status)return console.log("No hay pedidos para este producto."),[];try{return await t.json()}catch(e){throw console.error("Error al analizar JSON:",e),Error("La respuesta no tiene un formato JSON v\xe1lido.")}},D=()=>{let[e,t]=(0,l.useState)(0),[a,o]=(0,l.useState)([]),[i,p]=(0,l.useState)([]),[O,D]=(0,l.useState)("ARTICULO"),[y,v]=(0,l.useState)([]),[P,L]=(0,l.useState)(!0),[k,U]=(0,l.useState)(""),[M,z]=(0,l.useState)(""),[_,G]=(0,l.useState)(!1),[B,V]=(0,l.useState)(!1),H=(0,m.default)();(0,x.A)(H.breakpoints.down("sm"));let J=(0,l.useRef)(null),q=async()=>{O?G(!1):G(!0),k.trim()?V(!1):V(!0),L(!0);try{let e="ARTICULO"===O?j.c.url+"/productos/".concat(k):j.c.url+"/productos/descripcion/".concat(k),a=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(a.ok){let e=await a.json();v(e),e.length>0&&(z(e[0]),t(0))}else console.log("Error en la busqueda:",a.statusText),v([])}catch(e){console.log("Error al momento de realizar la busqueda",e),v([])}finally{L(!1)}},W=async()=>{let e=await R(M);p([]);try{e?p(e):p([]),L(!1)}catch(e){console.log("Este articulo no tiene facturas",e)}},Q=async()=>{let e=await T(M);o([]);try{e?o(e):o([]),L(!1)}catch(e){console.log("Este articulo no tiene pedidos",e)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.A,{}),(0,r.jsxs)(n.A,{container:!0,direction:"column",sx:{minHeight:"90vh",backgroundColor:"#ffffff",padding:2},children:[(0,r.jsx)(n.A,{size:12,children:(0,r.jsxs)(h.default,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[(0,r.jsxs)(h.default,{display:"flex",alignItems:"center",gap:2,children:[(0,r.jsx)("h2",{children:(0,r.jsx)("strong",{children:"Buscar Por Referencias"})}),(0,r.jsx)(f.A,{id:"size-small-outlined",size:"small",disablePortal:!0,options:[{label:"ARTICULO"},{label:"REFERENCIA"}],value:O,onChange:(e,t)=>{D((null==t?void 0:t.label)||""),t&&J.current.focus()},renderInput:e=>(0,r.jsx)(A.A,{...e,label:"Criterio de Busqueda",variant:"outlined",error:_,helperText:_?"El criterio es requerido":""}),sx:{width:190}}),(0,r.jsx)(A.A,{inputRef:J,id:"outlined-basic",size:"small",value:k,onChange:e=>{U(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&q()},error:B,helperText:B?"Este valor es requerido":"",sx:{width:190}}),(0,r.jsx)(C.A,{onClick:q,children:(0,r.jsx)(c,{sx:{fontSize:45},color:"success"})})]}),(0,r.jsx)(h.default,{children:(0,r.jsxs)("h3",{style:{margin:0,color:"#db2093"},children:[M.ARTICULO," - ",M.DESCRIPCION]})}),(0,r.jsx)(u.A,{datos:y})]})}),(0,r.jsx)(n.A,{size:12,children:(0,r.jsxs)(h.default,{sx:{width:"100%"},children:[(0,r.jsx)(h.default,{sx:{borderBottom:1,borderColor:"divider"},children:(0,r.jsxs)(S.A,{value:e,onChange:(e,a)=>{t(a)},variant:"fullWidth","aria-label":"full width tabs example",children:[(0,r.jsx)(E.A,{label:"Articulos",...F(0)}),(0,r.jsx)(E.A,{label:"Pedidos: ".concat(a.length),...F(1),onClick:Q}),(0,r.jsx)(E.A,{label:"Facturas: ".concat(i.length),...F(2),onClick:W})]})}),(0,r.jsx)(N,{component:h.default,value:e,index:0,dir:H.direction,children:(0,r.jsx)(h.default,{sx:{width:"100%",height:750},children:(0,r.jsx)(s.z,{rows:y,columns:I,pageSizeOptions:[5,12,20],getRowId:e=>e.ARTICULO,onRowClick:e=>{z(e.row)},initialState:{pagination:{paginationModel:{page:0,pageSize:12}}},sx:{"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"}}})})}),(0,r.jsx)(N,{component:h.default,value:e,index:1,dir:H.direction,children:!0===P?(0,r.jsx)(h.default,{sx:{width:"100%"},children:(0,r.jsx)(g.A,{})}):a.length<=0?(0,r.jsx)("h2",{children:"NO HAY PEDIDOS"}):(0,r.jsx)(h.default,{sx:{width:"100%",height:750},children:(0,r.jsx)(s.z,{rows:a,columns:b,initialState:{pagination:{paginationModel:{page:0,pageSize:12}}},pageSizeOptions:[5,12,20],getRowId:e=>e.PEDIDO,sx:{"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"}}})})}),(0,r.jsx)(N,{component:h.default,value:e,index:2,dir:H.direction,children:!0===P?(0,r.jsx)(h.default,{sx:{width:"100%"},children:(0,r.jsx)(g.A,{})}):i.length<=0?(0,r.jsx)("h2",{children:"NO HAY FACTURAS"}):(0,r.jsx)(h.default,{sx:{width:"100%",height:750},children:(0,r.jsx)(s.z,{rows:i,columns:w,initialState:{pagination:{paginationModel:{page:0,pageSize:12}}},pageSizeOptions:[5,12,20],getRowId:e=>e.FACTURA,sx:{"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"}}})})})]})})]})]})}},8889:(e,t,a)=>{"use strict";a.d(t,{c:()=>r});let r={url:"http://172.20.20.3:8001"}},70689:(e,t,a)=>{"use strict";a.d(t,{A:()=>d,AuthProvider:()=>s});var r=a(95155),l=a(12115),o=a(76046),i=a(89208);let n=(0,l.createContext)({login:e=>{},logout:()=>{}}),s=e=>{let{children:t}=e,a=(0,o.useRouter)(),[s]=(0,l.useState)(!0),[d,c]=(0,l.useState)(null),[u,h]=(0,l.useState)({}),[p,m]=(0,l.useState)({}),[x,f]=(0,l.useState)({}),A=(0,l.useCallback)(function(e){i.A.set("authTokens",JSON.stringify(e)),localStorage.setItem("auth",JSON.stringify(e)),c(e)},[]),C=(0,l.useCallback)(function(){a.push("/"),i.A.remove("authTokens"),localStorage.removeItem("auth"),c(null)},[]);(0,l.useEffect)(()=>{let e=localStorage.getItem("auth")||i.A.get("authTokens"),t=localStorage.getItem("pedido"),a=localStorage.getItem("caja"),r=localStorage.getItem("cliente");r&&h(JSON.parse(r)),t&&m(JSON.parse(t)),a&&f(JSON.parse(a)),e&&c(JSON.parse(e))},[]);let S=(0,l.useMemo)(()=>({auth:d,cliente:u,setCliente:h,pedido:p,setPedido:m,caja:x,setCaja:f,loading:s,login:A,logout:C}),[d,u,p,x,A,C]);return(0,r.jsx)(n.Provider,{value:S,children:t})},d=()=>(0,l.useContext)(n)}},e=>{var t=t=>e(e.s=t);e.O(0,[339,8320,3524,9754,1083,1260,6403,152,8173,2670,7493,4205,6899,914,8441,1517,7358],()=>t(63913)),_N_E=e.O()}]);