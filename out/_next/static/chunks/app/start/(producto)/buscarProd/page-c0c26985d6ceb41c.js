(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4207],{83686:()=>{},32383:()=>{},63913:(e,t,a)=>{Promise.resolve().then(a.bind(a,89372))},39241:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var l=a(46123),r=a(89142),i=a(12567),o=a(35761);let n=(0,l.A)({createStyledComponent:(0,r.default)("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.container&&t.container]}}),componentName:"MuiGrid2",useThemeProps:e=>(0,i.b)({props:e,name:"MuiGrid2"}),useTheme:o.default})},86898:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var l=a(1297),r=a(26366);let i=(0,l.unstable_createUseMediaQuery)({themeId:r.A})},65068:(e,t,a)=>{"use strict";a.d(t,{A:()=>U});var l=a(95155),r=a(20457),i=a(75436),o=a(11451),n=a(46805),s=a(894),d=a(2295),c=a(9561),h=a(81894),u=a(91888),p=a(74676),x=a(92080),f=a(96212),m=a(6069),A=a(9581),C=a(43677),S=a(85244),E=a(85067),N=a(2138);a(76046);var g=a(70689),j=a(12115),O=a(4918),I=a(41983),w=a(36017),R=a(2091),D=a(60391),T=a(48173),b=a.n(T);let P=e=>{let{page:t}=e;return(0,l.jsx)(i.default,{children:(0,l.jsx)(O.A,{children:t.map(e=>(0,l.jsx)(I.Ay,{disablePadding:!0,children:(0,l.jsxs)(w.A,{LinkComponent:b(),href:e.url,onClick:e.onClick,children:[(0,l.jsx)(R.A,{children:e.icon}),(0,l.jsx)(D.A,{primaryTypographyProps:{fontSize:15,fontWeight:"medium",letterSpacing:0},children:e.title})]})},e.title))})})};var v=a(78897),y=a.n(v),F=a(79046),L=a.n(F);let U=()=>{let{auth:e,logout:t}=(0,g.A)(),[a,O]=(0,j.useState)(null),[I,w]=(0,j.useState)(!1),R=()=>{w(!1),O(null)},D=[{title:"USUARIOS ",url:"/start/usuarios",icon:(0,l.jsx)(p.A,{})},{title:"PEDIDOS",url:"/start/pedidos",icon:(0,l.jsx)(x.A,{})},{title:"CLIENTES",url:"/start/clients",icon:(0,l.jsx)(f.A,{})},{title:"PRODUCTOS",icon:(0,l.jsx)(m.A,{}),onClick:e=>{w(!0),O(e.currentTarget)}},{title:"FACTURAS",url:"/start/facturas",icon:(0,l.jsx)(A.A,{})},{title:"CAJA",url:"/start/pedidos/pedidosCaja",icon:(0,l.jsx)(C.A,{})}];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.default,{}),(0,l.jsxs)(i.default,{sx:{flexGrow:1},children:[(0,l.jsx)(o.A,{position:"static",sx:{bgcolor:"#262626",width:"auto"},children:(0,l.jsxs)(n.A,{children:[(0,l.jsx)(s.A,{color:"inherit",onClick:e=>{O(e.currentTarget)},sx:{display:{xs:"flex",md:"none"}},children:(0,l.jsx)(S.A,{})}),(0,l.jsx)(i.default,{sx:{display:{xs:"none",md:"flex"}},children:D.map(e=>(0,l.jsx)(d.default,{sx:{fontSize:"15px"},color:"inherit",size:"large",LinkComponent:b(),href:e.url,onClick:e.onClick,children:e.title},e.title))}),(0,l.jsx)(c.default,{variant:"h6",sx:{flexGrow:1}}),(0,l.jsx)(d.default,{component:b(),href:"/start",color:"inherit",children:(0,l.jsx)(N.A,{})}),(0,l.jsxs)(d.default,{className:L().className,color:"inherit",sx:{fontSize:"15px"},children:[(0,l.jsx)(f.A,{}),e&&e.PER_Nom]}),(0,l.jsx)(d.default,{color:"inherit",onClick:()=>{y().fire({title:"\xbfQuieres Terminar La Sesi\xf3n?",icon:"question",showCancelButton:!0,confirmButtonColor:"#28ee32",cancelButtonColor:"#f12260",confirmButtonText:"Aceptar"}).then(e=>{e.isConfirmed&&t()})},children:(0,l.jsx)(E.A,{})})]})}),(0,l.jsxs)(h.A,{id:"basic-menu",anchorEl:a,open:I,onClose:R,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,l.jsx)(u.A,{onClick:R,component:b(),href:"/start/productosMG",children:"Productos"}),(0,l.jsx)(u.A,{onClick:R,component:b(),href:"/start/buscarProd",children:"Buscar Referencias"})]}),(0,l.jsx)(h.A,{id:"basic-menu",anchorEl:a,MenuListProps:{"aria-labelledby":"basic-button"},open:!!a,onClose:()=>{O(null)},sx:{display:{xs:"flex",md:"none"}},children:(0,l.jsx)(P,{page:D})})]})]})}},76134:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var l=a(95155),r=a(7660),i=a(12115),o=a(2295);let n=e=>{let{datos:t}=e,[a,n]=(0,i.useState)(!1);return(0,l.jsx)(o.default,{variant:"outlined",color:"success",onClick:()=>{if(!Array.isArray(t)||0===t.length){console.error("Datos no est\xe1n en el formato correcto o est\xe1n vac\xedos.");return}n(!0);try{let e=r.Wp.book_new(),a=r.Wp.json_to_sheet(t);r.Wp.book_append_sheet(e,a,"Datos"),r._h(e,"datos.xlsx")}catch(e){console.error("Error al generar el archivo Excel",e)}finally{n(!1)}},disabled:a,children:a?"Loading...":"Excel"})}},89372:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var l=a(95155),r=a(12115),i=a(81996),o=a.n(i),n=a(39241),s=a(57653),d=a(65068);let c=(0,a(12983).A)((0,l.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");var h=a(76134),u=a(75436),p=a(9561),x=a(35761),f=a(86898),m=a(4230),A=a(70152),C=a(894),S=a(73378),E=a(79987),N=a(54255),g=a(8889);function j(e){let{children:t,value:a,index:r,...i}=e;return(0,l.jsx)("div",{role:"tabpanel",hidden:a!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r),...i,children:a===r&&(0,l.jsx)(u.default,{sx:{p:3},children:t})})}function O(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}j.propTypes={children:o().node,index:o().number.isRequired,value:o().number.isRequired};let I=[{label:"ARTICULO"},{label:"REFERENCIA"}],w=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),R=[{field:"ARTICULO",headerName:"COD",width:130},{field:"DESCRIPCION",headerName:"REFERENCIA",width:700},{field:"SUBLINEA",headerName:"SUBLINEA",width:300},{field:"TOTAL_DISP",headerName:"DISP",width:130},{field:"PRECIO",headerName:"PRECIO",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"PORC_IMPUESTO",headerName:"IVA",width:130},{field:"PRECIOMASIVA",headerName:"MASIVA",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"PORC_DCTO",headerName:"D1",width:130},{field:"UNIDAD_EMPAQUE",headerName:"EMP",width:130},{field:"EXIST_REAL",headerName:"EXISTREAL",width:130}],D=[{field:"FACTURA",headerName:"FACTURA",width:130},{field:"FECHA_DESPACHO",headerName:"FECHA",width:190,renderCell:e=>w(e.value)},{field:"ANULADA",headerName:"AN",width:50},{field:"PRECIO_TOTAL",headerName:"V. FACT",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"PEDIDO",headerName:"PEDIDO",width:130,cellClassName:"pedido-cell"},{field:"ARTICULO",headerName:"ARTICULO",width:130},{field:"DESCRIPCION",headerName:"DESCRIPCION",width:700},{field:"CANTIDAD",headerName:"CANT",width:130},{field:"PRECIO_UNITARIO",headerName:"PRECIO UNI.",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"PORCIVA",headerName:"IVA",width:130},{field:"PORDESC",headerName:"DESC",width:130},{field:"VDESC",headerName:"V. DESC",width:130},{field:"TOTAL_MERCADERIA",headerName:"V. TOTAL",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))},cellClassName:"autor-cell"},{field:"IDRUTERO",headerName:"ID RUTERO",width:130},{field:"IDGUIA",headerName:"ID GUIA",width:130},{field:"OBSERVACIONES",headerName:"OBSERVACIONES",width:800},{field:"RUBRO1",headerName:"DOCS 2",width:500}],T=[{field:"FECHA",headerName:"FECHA",width:250,renderCell:e=>w(e.value)},{field:"CLIENTE",headerName:"CLIENTE",width:160},{field:"PEDIDO",headerName:"PEDIDO",width:100,cellClassName:"pedido-cell"},{field:"PED",headerName:"PED",width:100},{field:"DESP",headerName:"DESP",width:100},{field:"PEND",headerName:"PEND",width:100},{field:"ESTADO",headerName:"ESTADO",width:120},{field:"AUTORIZADONOM",headerName:"AUTORIZADO",width:200,renderCell:e=>{let t=e.row.AUTORIZADONOM;return(0,l.jsx)(p.default,{style:{color:"APROBADO"===t?"#00FC00":"RETENIDO"===t?"#FF1507":"#000000",backgroundColor:"transparent"},children:t})}},{field:"VE",headerName:"VEND",width:80,cellClassName:"autor-cell"}],b=async e=>{let t=await fetch(g.c.url+"/productos/facturas/".concat(e.ARTICULO),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok){if(404===t.status)return console.log("No hay facturas para este producto."),[];throw Error("Error en la solicitud: ".concat(t.status))}try{return await t.json()}catch(e){throw console.error("Error al analizar JSON:",e),Error("La respuesta no tiene un formato JSON v\xe1lido.")}},P=async e=>{let t=await fetch(g.c.url+"/productos/pedidos/".concat(e.ARTICULO),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok&&404===t.status)return console.log("No hay pedidos para este producto."),[];try{return await t.json()}catch(e){throw console.error("Error al analizar JSON:",e),Error("La respuesta no tiene un formato JSON v\xe1lido.")}},v=()=>{let[e,t]=(0,r.useState)(0),[a,i]=(0,r.useState)([]),[o,p]=(0,r.useState)([]),[w,v]=(0,r.useState)(""),[y,F]=(0,r.useState)([]),[L,U]=(0,r.useState)(!0),[k,z]=(0,r.useState)(""),[M,_]=(0,r.useState)(""),G=(0,x.default)(),V=(0,f.A)(G.breakpoints.down("sm")),J=async()=>{if(k)try{let e;e="ARTICULO"===w?await fetch(g.c.url+"/productos/".concat(k),{method:"GET",headers:{"Content-Type":"application/json"}}):await fetch("/api/productos/descripcion/".concat(k),{method:"GET",headers:{"Content-Type":"application/json"}});let t=await e.json();F(t)}catch(e){console.log("Error al momento de realizar la busqueda",e)}},B=async()=>{let e=await b(M);p([]);try{e?p(e):p([]),U(!1)}catch(e){console.log("Este articulo no tiene facturas",e)}},H=async()=>{let e=await P(M);i([]);try{e?i(e):i([]),U(!1)}catch(e){console.log("Este articulo no tiene pedidos",e)}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.A,{}),(0,l.jsxs)(n.A,{container:!0,direction:"column",sx:{minHeight:"100vh",backgroundColor:"#ffffff",padding:2},children:[(0,l.jsx)(n.A,{size:12,children:(0,l.jsxs)(u.default,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[(0,l.jsx)("h2",{children:(0,l.jsx)("strong",{children:"BUSCADOR DE REFERENCIAS"})}),(0,l.jsx)(h.A,{datos:y})]})}),(0,l.jsx)(n.A,{size:12,children:(0,l.jsxs)(u.default,{display:"flex",flexDirection:V?"column":"row",alignItems:"center",gap:2,sx:{width:"100%"},children:[(0,l.jsx)("h3",{style:{margin:0,color:"#db2093"},children:M.DESCRIPCION}),(0,l.jsxs)(u.default,{display:"flex",alignItems:"center",gap:2,sx:{marginLeft:V?0:"auto"},children:[(0,l.jsx)(m.A,{id:"size-small-outlined",size:"small",disablePortal:!0,sx:{width:190},options:I,onChange:(e,t)=>{v((null==t?void 0:t.label)||"")},renderInput:e=>(0,l.jsx)(A.A,{...e,label:"Tipo de Referencia"})}),(0,l.jsx)(A.A,{id:"outlined-basic",size:"small",value:k,onChange:e=>z(e.target.value),sx:{width:190}}),(0,l.jsx)(C.A,{onClick:J,children:(0,l.jsx)(c,{sx:{fontSize:45},color:"success"})})]})]})}),(0,l.jsx)(n.A,{size:12,children:(0,l.jsxs)(u.default,{sx:{width:"100%"},children:[(0,l.jsx)(u.default,{sx:{borderBottom:1,borderColor:"divider"},children:(0,l.jsxs)(S.A,{value:e,onChange:(e,a)=>{t(a)},variant:"fullWidth","aria-label":"full width tabs example",children:[(0,l.jsx)(E.A,{label:"Articulos",...O(0)}),(0,l.jsx)(E.A,{label:"Pedidos: ".concat(a.length),...O(1),onClick:H}),(0,l.jsx)(E.A,{label:"Facturas: ".concat(o.length),...O(2),onClick:B})]})}),(0,l.jsx)(j,{component:u.default,value:e,index:0,dir:G.direction,children:(0,l.jsx)(u.default,{sx:{width:"100%",height:950},children:(0,l.jsx)(s.z,{rows:y,columns:R,pageSizeOptions:[5,15,20],getRowId:e=>e.ARTICULO,onRowClick:e=>{_(e.row)},initialState:{pagination:{paginationModel:{page:0,pageSize:15}}},sx:{"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"}}})})}),(0,l.jsx)(j,{component:u.default,value:e,index:1,dir:G.direction,children:!0===L?(0,l.jsx)(u.default,{sx:{width:"100%"},children:(0,l.jsx)(N.A,{})}):a.length<=0?(0,l.jsx)("h2",{children:"NO HAY PEDIDOS"}):(0,l.jsx)(u.default,{sx:{width:"100%",height:950},children:(0,l.jsx)(s.z,{rows:a,columns:T,initialState:{pagination:{paginationModel:{page:0,pageSize:15}}},pageSizeOptions:[5,15,20],getRowId:e=>e.PEDIDO,sx:{"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"}}})})}),(0,l.jsx)(j,{component:u.default,value:e,index:2,dir:G.direction,children:!0===L?(0,l.jsx)(u.default,{sx:{width:"100%"},children:(0,l.jsx)(N.A,{})}):o.length<=0?(0,l.jsx)("h2",{children:"NO HAY FACTURAS"}):(0,l.jsx)(u.default,{sx:{width:"100%",height:950},children:(0,l.jsx)(s.z,{rows:o,columns:D,initialState:{pagination:{paginationModel:{page:0,pageSize:15}}},pageSizeOptions:[5,15,20],getRowId:e=>e.FACTURA,sx:{"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"}}})})})]})})]})]})}},8889:(e,t,a)=>{"use strict";a.d(t,{c:()=>l});let l={url:"http://172.20.20.3:8001"}},70689:(e,t,a)=>{"use strict";a.d(t,{A:()=>d,AuthProvider:()=>s});var l=a(95155),r=a(12115),i=a(76046),o=a(89208);let n=(0,r.createContext)({login:e=>{},logout:()=>{}}),s=e=>{let{children:t}=e,a=(0,i.useRouter)(),[s]=(0,r.useState)(!0),[d,c]=(0,r.useState)({}),[h,u]=(0,r.useState)(null),[p,x]=(0,r.useState)({}),[f,m]=(0,r.useState)({}),[A,C]=(0,r.useState)({}),[S,E]=(0,r.useState)({}),[N,g]=(0,r.useState)({}),j=(0,r.useCallback)(function(e){o.A.set("authTokens",JSON.stringify(e)),localStorage.setItem("auth",JSON.stringify(e)),u(e)},[]),O=(0,r.useCallback)(function(){o.A.remove("authTokens"),localStorage.removeItem("auth"),u(null),a.push("/")},[]);(0,r.useEffect)(()=>{let e=localStorage.getItem("auth"),t=localStorage.getItem("caja"),a=localStorage.getItem("pedido"),l=localStorage.getItem("pedidoV"),r=localStorage.getItem("cartera"),i=localStorage.getItem("cliente"),o=localStorage.getItem("clienteV");o&&C(JSON.parse(o)),l&&E(JSON.parse(l)),r&&g(JSON.parse(r)),e&&u(JSON.parse(e)),i&&m(JSON.parse(i)),a&&x(JSON.parse(a)),t&&c(JSON.parse(t))},[]);let I=(0,r.useMemo)(()=>({auth:h,cliente:f,setCliente:m,pedido:p,setPedido:x,caja:d,setCaja:c,clienteV:A,setClienteV:C,pedidosV:S,setPedidosV:E,carteraV:N,setCarteraV:g,loading:s,login:j,logout:O}),[h,f,p,d,A,S,N,j,O]);return(0,l.jsx)(n.Provider,{value:I,children:t})},d=()=>(0,r.useContext)(n)}},e=>{var t=t=>e(e.s=t);e.O(0,[339,8320,3524,6058,5854,994,5975,1260,6403,152,8173,2670,7493,6675,7653,6899,914,8441,1517,7358],()=>t(63913)),_N_E=e.O()}]);