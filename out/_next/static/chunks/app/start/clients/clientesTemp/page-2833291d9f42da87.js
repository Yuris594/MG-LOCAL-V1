(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6054],{72754:(e,t,l)=>{Promise.resolve().then(l.bind(l,16397))},65068:(e,t,l)=>{"use strict";l.d(t,{A:()=>z});var a=l(95155),i=l(48173),s=l.n(i),r=l(75436),n=l(4918),d=l(41983),o=l(36017),c=l(2091),h=l(60391);let x=e=>{let{page:t}=e;return(0,a.jsx)(r.default,{children:(0,a.jsx)(n.A,{children:t.map(e=>(0,a.jsx)(d.Ay,{disablePadding:!0,children:(0,a.jsxs)(o.A,{LinkComponent:s(),href:e.url,onClick:e.onClick,children:[(0,a.jsx)(c.A,{children:e.icon}),(0,a.jsx)(h.A,{primaryTypographyProps:{fontSize:15,fontWeight:"medium",letterSpacing:0},children:e.title})]})},e.title))})})};var u=l(78897),m=l.n(u),f=l(12115),p=l(79046),A=l.n(p),C=l(2138),j=l(70689),N=l(96212),S=l(85067),O=l(85244),g=l(74676),E=l(92080),w=l(6069),D=l(9581),T=l(43677),I=l(20457),F=l(11451),b=l(46805),y=l(894),R=l(2295),L=l(9561),v=l(81894),P=l(91888);let z=()=>{let{auth:e,logout:t}=(0,j.A)(),[l,i]=(0,f.useState)(null),[n,d]=(0,f.useState)(!1),o=()=>{d(!1),i(null)},c=[{title:"USUARIOS ",url:"/start/usuarios/",icon:(0,a.jsx)(g.A,{})},{title:"PEDIDOS",url:"/start/pedidos/",icon:(0,a.jsx)(E.A,{})},{title:"CLIENTES",url:"/start/clients/",icon:(0,a.jsx)(N.A,{})},{title:"PRODUCTOS",icon:(0,a.jsx)(w.A,{}),onClick:e=>{d(!0),i(e.currentTarget)}},{title:"FACTURAS",url:"/start/facturas/",icon:(0,a.jsx)(D.A,{})},{title:"CAJA",url:"/start/pedidos/pedidosCaja/",icon:(0,a.jsx)(T.A,{})}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.default,{}),(0,a.jsxs)(r.default,{sx:{flexGrow:1},children:[(0,a.jsx)(F.A,{position:"static",sx:{bgcolor:"#262626",width:"auto"},children:(0,a.jsxs)(b.A,{children:[(0,a.jsx)(y.A,{color:"inherit",onClick:e=>{i(e.currentTarget)},sx:{display:{xs:"flex",md:"none"}},children:(0,a.jsx)(O.A,{})}),(0,a.jsx)(r.default,{sx:{display:{xs:"none",md:"flex"}},children:c.map(e=>(0,a.jsx)(R.default,{sx:{fontSize:"15px"},color:"inherit",size:"large",LinkComponent:s(),href:e.url,onClick:e.onClick,children:e.title},e.title))}),(0,a.jsx)(L.default,{variant:"h6",sx:{flexGrow:1}}),(0,a.jsx)(R.default,{component:s(),href:"/start",color:"inherit",children:(0,a.jsx)(C.A,{})}),(0,a.jsxs)(R.default,{className:A().className,color:"inherit",sx:{fontSize:"15px"},children:[(0,a.jsx)(N.A,{}),e&&e.PER_Nom]}),(0,a.jsx)(R.default,{color:"inherit",onClick:()=>{m().fire({title:"\xbfQuieres Terminar La Sesi\xf3n?",icon:"question",showCancelButton:!0,confirmButtonColor:"#28ee32",cancelButtonColor:"#f12260",confirmButtonText:"Aceptar"}).then(e=>{e.isConfirmed&&t()})},children:(0,a.jsx)(S.A,{})})]})}),(0,a.jsxs)(v.A,{id:"basic-menu",anchorEl:l,open:n,onClose:o,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,a.jsx)(P.A,{onClick:o,component:s(),href:"/start/buscarProd/",children:"Buscar Por Referencias"}),(0,a.jsx)(P.A,{onClick:o,component:s(),href:"/start/productosMG/",children:"Lista de Todos Los Productos"})]}),(0,a.jsx)(v.A,{id:"basic-menu",anchorEl:l,MenuListProps:{"aria-labelledby":"basic-button"},open:!!l,onClose:()=>{i(null)},sx:{display:{xs:"flex",md:"none"}},children:(0,a.jsx)(x,{page:c})})]})]})}},16397:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>P});var a=l(95155),i=l(48173),s=l.n(i),r=l(81996),n=l.n(r),d=l(8889),o=l(39241),c=l(12115),h=l(74205),x=l(76046),u=l(70689),m=l(65068),f=l(75436),p=l(86898),A=l(78562),C=l(2295),j=l(2241),N=l(9561),S=l(70152),O=l(62347),g=l(73378),E=l(79987),w=l(54255);function D(e){let{children:t,value:l,index:i,...s}=e;return(0,a.jsx)("div",{role:"tabpanel",hidden:l!==i,id:"simple-tabpanel-".concat(i),"aria-labelledby":"simple-tab-".concat(i),...s,children:l===i&&(0,a.jsx)(f.default,{sx:{p:3},children:t})})}function T(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}D.propTypes={children:n().node,index:n().number.isRequired,value:n().number.isRequired};let I=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),F=[{field:"FECHA_PEDIDO",headerName:"FECHA",width:150,renderCell:e=>I(e.value)},{field:"PEDIDO",headerName:"PEDIDO",width:130,cellClassName:"pedido-cell"},{field:"ESTADO",headerName:"ESTADO",width:130},{field:"AUTORIZADONOM",headerName:"AUTORIZADO",width:130,cellClassName:"autor-cell"},{field:"TOTAL_A_FACTURAR",headerName:"TOTAL A FACTURAR",width:200,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"CreatedBy",headerName:"CREADO POR",width:150},{field:"U_EDITADOPOR",headerName:"EDITADO POR ",width:150},{field:"OBSERVACIONES",headerName:"NOTAS",width:200},{field:"COMENTARIO_CXC",headerName:"COMENTARIOS CL",width:200}],b=[{field:"FACTURA",headerName:"FACTURA",width:130},{field:"FECHA_DESPACHO",headerName:"FECHA",width:190,renderCell:e=>I(e.value)},{field:"ANULADA",headerName:"AN",width:130},{field:"PRECIO_TOTAL",headerName:"V. FACT",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"PEDIDO",headerName:"PEDIDO",width:130,cellClassName:"pedido-cell"},{field:"ARTICULO",headerName:"ARTICULO",width:130},{field:"DESCRIPCION",headerName:"DESCRIPCION",width:700},{field:"CANTIDAD",headerName:"CANT",width:130},{field:"PRECIO_UNITARIO",headerName:"PRECIO UNI.",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"PORCIVA",headerName:"IVA",width:100},{field:"PORDESC",headerName:"DESC",width:130},{field:"VDESC",headerName:"V DESC",width:130},{field:"TOTAL_MERCADERIA",headerName:"V. TOTAL ",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"IDRUTERO",headerName:"ID RUTERO",width:100},{field:"IDGUIA",headerName:"ID GUIA",width:100},{field:"OBSERVACIONES",headerName:"OBSERVACIONES",width:400},{field:"RUBRO1",headerName:"DOCS 2",width:200}],y=[{field:"DOC",headerName:"DOC",width:130},{field:"FECHADOC",headerName:"FECHA DOC",width:190,renderCell:e=>I(e.value)},{field:"FECHAVENC",headerName:"FECHA VENC",width:190,renderCell:e=>I(e.value)},{field:"NUMDOC",headerName:"NUM DOC",width:130,cellClassName:"autor-cell"},{field:"DIASVENC",headerName:"VENC",width:130},{field:"MONTO",headerName:"MONTO",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"SALDO",headerName:"SALDO",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))},cellClassName:"plazo-cell"},{field:"SMenorA30",headerName:"VENC < 30",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"SMayorA60",headerName:"VENC < 60",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"SMenorA60",headerName:"VENC > 60",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"PLAZO",headerName:"PLAZO",width:130,cellClassName:"plazo-cell"},{field:"VENDEDOR",headerName:"VENDEDOR",width:130}],R=async e=>{let t=await fetch(d.c.url+"/clientes/pedidos/".concat(e.CLIENTE),{method:"GET",headers:{"Content-Type":"application/json"}});return t.ok||404!==t.status?t.json():(console.log("No hay pedidos para este cliente."),[])},L=async e=>{let t=await fetch(d.c.url+"/clientes/facturas/".concat(e.CLIENTE),{method:"GET",headers:{"Content-Type":"application/json"}});return t.ok||404!==t.status?t.json():(console.log("No hay facturas para este cliente."),[])},v=async e=>{let t=await fetch(d.c.url+"/clientes/cartera/".concat(e.CLIENTE),{method:"GET",headers:{"Content-Type":"application/json"}});return t.ok||404!==t.status?t.json():(console.log("No hay cartera para este cliente."),[])},P=()=>{let{cliente:e}=(0,u.A)();(0,x.useRouter)();let[t]=(0,c.useState)([]),[l,i]=(0,c.useState)(3),[r,n]=(0,c.useState)([]),[d,I]=(0,c.useState)([]),[P,z]=(0,c.useState)([]),[k,M]=(0,c.useState)(!1),[U,V]=(0,c.useState)(e[0]),[_,B]=(0,c.useState)(0),[$,H]=(0,c.useState)(0),G=(0,p.A)("(max-width: 600px)");(0,c.useEffect)(()=>{M(!0),U&&(J(U.CLIENTE),Z(U.CLIENTE),q(U.CLIENTE))},[l]),(0,c.useEffect)(()=>{if(Array.isArray(r)){let e=Number(r.reduce((e,t)=>e+t.SMayorA60,0)).toFixed(0);H("".concat(parseFloat(e).toLocaleString()));let t=Number(r.reduce((e,t)=>e+t.SALDO,0)).toFixed(0);B("".concat(parseFloat(t).toLocaleString()))}},[r]);let J=async()=>{let e=await R(U);e?I(e):(console.log("Error al obtener los datos"),I([])),M(!1)},Z=async()=>{let e=await L(U);e?z(e):(console.log("Error al obtener los datos"),z([])),M(!1)},q=async()=>{let e=await v(U);e?n(e):(console.log("Error al obtener los datos"),n([])),M(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.default,{children:(0,a.jsx)(m.A,{})}),(0,a.jsxs)(A.A,{elevation:3,sx:{padding:3,margin:"0 auto",marginTop:3,maxWidth:1e3,width:"100%"},children:[(0,a.jsxs)(f.default,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,a.jsxs)(f.default,{sx:{display:"flex",flexDirection:G?"column":"row",justifyContent:"flex-end",alignItems:"center",gap:2},children:[(0,a.jsx)(C.default,{variant:"contained",sx:{bgcolor:"#ffa28a",color:"white"},LinkComponent:s(),href:"../",children:"Cerrar"}),(0,a.jsx)(C.default,{variant:"contained",sx:{bgcolor:"#12e7dd",color:"white"},LinkComponent:s(),href:"../../pedidos/crearPedido",children:"Crear Pedido"})]}),(0,a.jsx)(j.A,{orientation:"horizontal"}),(0,a.jsx)("h3",{children:(0,a.jsx)("strong",{style:{fontSize:20,color:"#6d32f7"},children:(null==U?void 0:U.NOMBREALIAS)||""})}),(0,a.jsx)(f.default,{sx:{display:"flex",justifyContent:"space-between",flexDirection:G?"column":"row",alignItems:"center"},children:(0,a.jsxs)(o.A,{container:!0,rowSpacing:1.5,columnSpacing:{xs:1,sm:2,md:3},sx:{p:1},children:[(0,a.jsxs)(o.A,{size:{xs:9,sm:6,md:3},children:[(0,a.jsx)("strong",{children:"NIT"}),(0,a.jsx)(N.default,{sx:{mb:1.5,display:"flex"},children:(null==U?void 0:U.CLIENTE)||""})]}),(0,a.jsxs)(o.A,{size:{xs:9,sm:6,md:3},children:[(0,a.jsx)("strong",{children:"Cupo"}),(0,a.jsxs)(N.default,{sx:{mb:1.5,display:"flex",color:"#16f50f"},children:["$",Number((null==U?void 0:U.CUPO)||"0").toLocaleString("es-ES")]})]}),(0,a.jsxs)(o.A,{size:{xs:9,sm:6,md:3},children:[(0,a.jsx)("strong",{children:"Debe"}),(0,a.jsxs)(N.default,{sx:{mb:1.5,display:"flex",color:"#f50f0f"},children:["$",Number((null==U?void 0:U.SALDO)||"0").toLocaleString("es-ES")]})]}),(0,a.jsxs)(o.A,{size:{xs:9,sm:6,md:3},children:[(0,a.jsx)("strong",{children:"Direcci\xf3n"}),(0,a.jsx)(N.default,{sx:{mb:1.5,display:"flex"},children:(null==U?void 0:U.DIRECCION)||""})]}),(0,a.jsxs)(o.A,{size:{xs:9,sm:6,md:3},children:[(0,a.jsx)("strong",{children:"Tel\xe9fono"}),(0,a.jsx)(N.default,{sx:{mb:1.5,display:"flex"},children:(null==U?void 0:U.TELEFONO1)||""})]}),(0,a.jsxs)(o.A,{size:{xs:9,sm:6,md:3},children:[(0,a.jsx)("strong",{children:"Celular"}),(0,a.jsx)(N.default,{sx:{mb:1.5,display:"flex"},children:(null==U?void 0:U.TELEFONO1)||""})]}),(0,a.jsxs)(o.A,{size:{xs:9,sm:6,md:3},children:[(0,a.jsx)("strong",{children:"Ciudad"}),(0,a.jsx)(N.default,{sx:{mb:1.5,display:"flex"},children:(null==U?void 0:U.CIUDAD)||""})]}),(0,a.jsxs)(o.A,{size:{xs:9,sm:6,md:3},children:[(0,a.jsx)("strong",{children:"Departamento"}),(0,a.jsx)(N.default,{sx:{mb:1.5,display:"flex"},children:(null==U?void 0:U.DEPARTAMENTO)||""})]}),(0,a.jsxs)(o.A,{size:{xs:12,sm:8,md:8},children:[(0,a.jsx)("strong",{children:"Email"}),(0,a.jsx)(N.default,{sx:{mb:1.5,display:"flex"},children:(null==U?void 0:U.E_MAIL)||""})]}),(0,a.jsx)(o.A,{size:{xs:12,sm:8,md:8},children:(0,a.jsx)(S.A,{id:"outlined-basic",multiline:!0,rows:3,defaultValue:(null==U?void 0:U.NOTAS)||"",variant:"outlined",sx:{width:"100%",border:"2px solid #13ace9"}})}),(0,a.jsx)(o.A,{size:{xs:12,sm:8,md:4},children:(0,a.jsx)(f.default,{sx:{dispĺay:"flex",justifyContent:"space-around",alignItems:"center",gap:2,flexWrap:G?"wrap":"nowrap"},children:(0,a.jsx)(f.default,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,a.jsxs)(O.A,{variant:"text","aria-label":"text button group",sx:{height:60},children:[(0,a.jsxs)(C.default,{sx:{flexDirection:"column"},children:[(0,a.jsxs)(N.default,{sx:{display:"flex",fontSize:14,paddingRight:5},gutterBottom:!0,children:["$",_]}),(0,a.jsx)("strong",{children:"Saldo"})]}),(0,a.jsxs)(C.default,{sx:{flexDirection:"column"},children:[(0,a.jsxs)(N.default,{sx:{display:"flex",fontSize:14,paddingRight:5},gutterBottom:!0,children:["$",$]}),(0,a.jsx)("strong",{children:"Saldo Mayor a 60"})]})]})})})})]})})]}),(0,a.jsxs)(f.default,{sx:{width:"100%",mt:3},children:[(0,a.jsxs)(g.A,{value:l,onChange:(e,t)=>{i(t)},"aria-label":"basic tabs example",children:[(0,a.jsx)(E.A,{label:"Pedidos",...T(0),onClick:J}),(0,a.jsx)(E.A,{label:"Facturas",...T(1),onClick:Z}),(0,a.jsx)(E.A,{label:"Cartera",...T(2),onClick:q}),(0,a.jsx)(E.A,{label:"",...T(3)})]}),(0,a.jsx)(D,{value:l,index:0,children:(0,a.jsx)(f.default,{sx:{width:"100%",height:350},children:!0===k?(0,a.jsx)(f.default,{sx:{width:"100%"},children:(0,a.jsx)(w.A,{})}):d.length<=0?(0,a.jsx)("h2",{children:"NO HAY PEDIDOS"}):(0,a.jsx)(h.z,{density:"compact",rows:d,columns:F,pageSizeOptions:[5,10],rowSelectionModel:t,getRowId:e=>e.PEDIDO,initialState:{pagination:{paginationModel:{page:0,pageSize:10}}}})})}),(0,a.jsx)(D,{value:l,index:1,children:(0,a.jsx)(f.default,{sx:{width:"100%",height:350},children:!0===k?(0,a.jsx)(f.default,{sx:{width:"100%"},children:(0,a.jsx)(w.A,{})}):P.length<=0?(0,a.jsx)("h2",{children:"NO HAY FACTURAS"}):(0,a.jsx)(h.z,{density:"compact",rows:P,columns:b,getRowId:e=>e.ID,pageSize:[5,10],rowSelectionModel:t,initialState:{pagination:{paginationModel:{page:0,pageSize:10}}}})})}),(0,a.jsx)(D,{value:l,index:2,children:(0,a.jsx)(f.default,{sx:{width:"100%",height:350},children:!0===k?(0,a.jsx)(f.default,{sx:{width:"100%"},children:(0,a.jsx)(w.A,{})}):r.length<=0?(0,a.jsx)("h2",{children:"NO HAY CARTERA"}):(0,a.jsx)(h.z,{density:"compact",rows:r,columns:y,pageSizeOptions:[5,10],rowSelectionModel:t,getRowId:e=>e.NUMDOC,initialState:{pagination:{paginationModel:{page:0,pageSize:10}}}})})})]})]})]})}},8889:(e,t,l)=>{"use strict";l.d(t,{c:()=>a});let a={url:"http://172.20.20.3:8001"}},70689:(e,t,l)=>{"use strict";l.d(t,{A:()=>o,AuthProvider:()=>d});var a=l(95155),i=l(12115),s=l(76046),r=l(89208);let n=(0,i.createContext)({login:e=>{},logout:()=>{}}),d=e=>{let{children:t}=e,l=(0,s.useRouter)(),[d]=(0,i.useState)(!0),[o,c]=(0,i.useState)(null),[h,x]=(0,i.useState)({}),[u,m]=(0,i.useState)({}),[f,p]=(0,i.useState)({}),A=(0,i.useCallback)(function(e){r.A.set("authTokens",JSON.stringify(e)),localStorage.setItem("auth",JSON.stringify(e)),c(e)},[]),C=(0,i.useCallback)(function(){l.push("/"),r.A.remove("authTokens"),localStorage.removeItem("auth"),c(null)},[]);(0,i.useEffect)(()=>{let e=localStorage.getItem("auth")||r.A.get("authTokens"),t=localStorage.getItem("pedido"),l=localStorage.getItem("caja"),a=localStorage.getItem("cliente");a&&x(JSON.parse(a)),t&&m(JSON.parse(t)),l&&p(JSON.parse(l)),e&&c(JSON.parse(e))},[]);let j=(0,i.useMemo)(()=>({auth:o,cliente:h,setCliente:x,pedido:u,setPedido:m,caja:f,setCaja:p,loading:d,login:A,logout:C}),[o,h,u,f,A,C]);return(0,a.jsx)(n.Provider,{value:j,children:t})},o=()=>(0,i.useContext)(n)}},e=>{var t=t=>e(e.s=t);e.O(0,[339,8320,9754,1083,1260,6403,152,8173,2670,7493,4205,6899,914,4520,8441,1517,7358],()=>t(72754)),_N_E=e.O()}]);