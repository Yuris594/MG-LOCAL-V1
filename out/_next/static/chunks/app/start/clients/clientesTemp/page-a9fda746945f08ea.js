(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6054],{72754:(e,t,l)=>{Promise.resolve().then(l.bind(l,16397))},65068:(e,t,l)=>{"use strict";l.d(t,{A:()=>z});var a=l(95155),i=l(20457),s=l(75436),r=l(11451),n=l(46805),o=l(894),d=l(2295),c=l(9561),h=l(81894),x=l(91888),u=l(74676),m=l(92080),f=l(96212),p=l(6069),A=l(9581),C=l(43677),j=l(85244),S=l(85067),N=l(2138);l(76046);var g=l(70689),O=l(12115),E=l(4918),w=l(41983),I=l(36017),D=l(2091),T=l(60391),b=l(48173),F=l.n(b);let y=e=>{let{page:t}=e;return(0,a.jsx)(s.default,{children:(0,a.jsx)(E.A,{children:t.map(e=>(0,a.jsx)(w.Ay,{disablePadding:!0,children:(0,a.jsxs)(I.A,{LinkComponent:F(),href:e.url,onClick:e.onClick,children:[(0,a.jsx)(D.A,{children:e.icon}),(0,a.jsx)(T.A,{primaryTypographyProps:{fontSize:15,fontWeight:"medium",letterSpacing:0},children:e.title})]})},e.title))})})};var R=l(78897),v=l.n(R),L=l(79046),P=l.n(L);let z=()=>{let{auth:e,logout:t}=(0,g.A)(),[l,E]=(0,O.useState)(null),[w,I]=(0,O.useState)(!1),D=()=>{I(!1),E(null)},T=[{title:"USUARIOS ",url:"/start/usuarios",icon:(0,a.jsx)(u.A,{})},{title:"PEDIDOS",url:"/start/pedidos",icon:(0,a.jsx)(m.A,{})},{title:"CLIENTES",url:"/start/clients",icon:(0,a.jsx)(f.A,{})},{title:"PRODUCTOS",icon:(0,a.jsx)(p.A,{}),onClick:e=>{I(!0),E(e.currentTarget)}},{title:"FACTURAS",url:"/start/facturas",icon:(0,a.jsx)(A.A,{})},{title:"CAJA",url:"/start/pedidos/pedidosCaja",icon:(0,a.jsx)(C.A,{})}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.default,{}),(0,a.jsxs)(s.default,{sx:{flexGrow:1},children:[(0,a.jsx)(r.A,{position:"static",sx:{bgcolor:"#262626",width:"auto"},children:(0,a.jsxs)(n.A,{children:[(0,a.jsx)(o.A,{color:"inherit",onClick:e=>{E(e.currentTarget)},sx:{display:{xs:"flex",md:"none"}},children:(0,a.jsx)(j.A,{})}),(0,a.jsx)(s.default,{sx:{display:{xs:"none",md:"flex"}},children:T.map(e=>(0,a.jsx)(d.default,{sx:{fontSize:"15px"},color:"inherit",size:"large",LinkComponent:F(),href:e.url,onClick:e.onClick,children:e.title},e.title))}),(0,a.jsx)(c.default,{variant:"h6",sx:{flexGrow:1}}),(0,a.jsx)(d.default,{component:F(),href:"/start",color:"inherit",children:(0,a.jsx)(N.A,{})}),(0,a.jsxs)(d.default,{className:P().className,color:"inherit",sx:{fontSize:"15px"},children:[(0,a.jsx)(f.A,{}),e&&e.PER_Nom]}),(0,a.jsx)(d.default,{color:"inherit",onClick:()=>{v().fire({title:"\xbfQuieres Terminar La Sesi\xf3n?",icon:"question",showCancelButton:!0,confirmButtonColor:"#28ee32",cancelButtonColor:"#f12260",confirmButtonText:"Aceptar"}).then(e=>{e.isConfirmed&&t()})},children:(0,a.jsx)(S.A,{})})]})}),(0,a.jsxs)(h.A,{id:"basic-menu",anchorEl:l,open:w,onClose:D,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,a.jsx)(x.A,{onClick:D,component:F(),href:"/start/productosMG",children:"Productos"}),(0,a.jsx)(x.A,{onClick:D,component:F(),href:"/start/buscarProd",children:"Buscar Referencias"})]}),(0,a.jsx)(h.A,{id:"basic-menu",anchorEl:l,MenuListProps:{"aria-labelledby":"basic-button"},open:!!l,onClose:()=>{E(null)},sx:{display:{xs:"flex",md:"none"}},children:(0,a.jsx)(y,{page:T})})]})]})}},16397:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>M});var a=l(95155),i=l(75436),s=l(86898),r=l(78562),n=l(2295),o=l(2241),d=l(60615),c=l(79283),h=l(62347),x=l(9561),u=l(70152),m=l(73378),f=l(79987),p=l(54255),A=l(65068),C=l(70689),j=l(12115),S=l(57653),N=l(76046),g=l(39241),O=l(81996),E=l.n(O),w=l(48173),I=l.n(w),D=l(8889);function T(e){let{children:t,value:l,index:s,...r}=e;return(0,a.jsx)("div",{role:"tabpanel",hidden:l!==s,id:"simple-tabpanel-".concat(s),"aria-labelledby":"simple-tab-".concat(s),...r,children:l===s&&(0,a.jsx)(i.default,{sx:{p:3},children:t})})}function b(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}T.propTypes={children:E().node,index:E().number.isRequired,value:E().number.isRequired};let F=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),y=[{field:"FECHA_PEDIDO",headerName:"FECHA",width:150,renderCell:e=>F(e.value)},{field:"PEDIDO",headerName:"PEDIDO",width:130,cellClassName:"pedido-cell"},{field:"ESTADO",headerName:"ESTADO",width:130},{field:"AUTORIZADONOM",headerName:"AUTORIZADO",width:130,cellClassName:"autor-cell"},{field:"TOTAL_A_FACTURAR",headerName:"TOTAL A FACTURAR",width:200,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"CreatedBy",headerName:"CREADO POR",width:150},{field:"U_EDITADOPOR",headerName:"EDITADO POR ",width:150},{field:"OBSERVACIONES",headerName:"NOTAS",width:200},{field:"COMENTARIO_CXC",headerName:"COMENTARIOS CL",width:200}],R=[{field:"FACTURA",headerName:"FACTURA",width:130},{field:"FECHA_DESPACHO",headerName:"FECHA",width:190,renderCell:e=>F(e.value)},{field:"ANULADA",headerName:"AN",width:130},{field:"PRECIO_TOTAL",headerName:"V. FACT",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"PEDIDO",headerName:"PEDIDO",width:130,cellClassName:"pedido-cell"},{field:"ARTICULO",headerName:"ARTICULO",width:130},{field:"DESCRIPCION",headerName:"DESCRIPCION",width:700},{field:"CANTIDAD",headerName:"CANT",width:130},{field:"PRECIO_UNITARIO",headerName:"PRECIO UNI.",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"PORCIVA",headerName:"IVA",width:100},{field:"PORDESC",headerName:"DESC",width:130},{field:"VDESC",headerName:"V DESC",width:130},{field:"TOTAL_MERCADERIA",headerName:"V. TOTAL ",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"IDRUTERO",headerName:"ID RUTERO",width:100},{field:"IDGUIA",headerName:"ID GUIA",width:100},{field:"OBSERVACIONES",headerName:"OBSERVACIONES",width:400},{field:"RUBRO1",headerName:"DOCS 2",width:200}],v=[{field:"DOC",headerName:"DOC",width:130},{field:"FECHADOC",headerName:"FECHA DOC",width:190,renderCell:e=>F(e.value)},{field:"FECHAVENC",headerName:"FECHA VENC",width:190,renderCell:e=>F(e.value)},{field:"NUMDOC",headerName:"NUM DOC",width:130,cellClassName:"autor-cell"},{field:"DIASVENC",headerName:"VENC",width:130},{field:"MONTO",headerName:"MONTO",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"SALDO",headerName:"SALDO",width:130,cellClassName:"plazo-cell",valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"SMenorA30",headerName:"VENC < 30",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"SMayorA60",headerName:"VENC < 60",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"SMenorA60",headerName:"VENC > 60",width:130,valueFormatter:e=>{let t=parseFloat(e).toFixed(0);return"$".concat(parseFloat(t).toLocaleString("es-CO"))}},{field:"PLAZO",headerName:"PLAZO",width:130,cellClassName:"plazo-cell"},{field:"VENDEDOR",headerName:"VENDEDOR",width:130}],L=async e=>{let t=await fetch(D.c.url+"/clientes/pedidos/".concat(e.CLIENTE),{method:"GET",headers:{"Content-Type":"application/json"}});return t.ok||404!==t.status?t.json():(console.log("No hay pedidos para este cliente."),[])},P=async e=>{let t=await fetch(D.c.url+"/clientes/facturas/".concat(e.CLIENTE),{method:"GET",headers:{"Content-Type":"application/json"}});return t.ok||404!==t.status?t.json():(console.log("No hay facturas para este cliente."),[])},z=async e=>{let t=await fetch(D.c.url+"/clientes/cartera/".concat(e.CLIENTE),{method:"GET",headers:{"Content-Type":"application/json"}});return t.ok||404!==t.status?t.json():(console.log("No hay cartera para este cliente."),[])},M=()=>{let{cliente:e}=(0,C.A)(),t=(0,N.useRouter)(),[l]=(0,j.useState)([]),[O,E]=(0,j.useState)(3),[w,D]=(0,j.useState)([]),[F,M]=(0,j.useState)([]),[U,k]=(0,j.useState)([]),[V,_]=(0,j.useState)(!1),[B,$]=(0,j.useState)(e[0]),[H,J]=(0,j.useState)(0),[G,Z]=(0,j.useState)(0),q=(0,s.A)("(max-width: 600px)");(0,j.useEffect)(()=>{_(!0),B&&(Y(B.CLIENTE),W(B.CLIENTE),Q(B.CLIENTE))},[O]),(0,j.useEffect)(()=>{if(Array.isArray(w)){let e=Number(w.reduce((e,t)=>e+t.SMayorA60,0)).toFixed(0);Z("".concat(parseFloat(e).toLocaleString()));let t=Number(w.reduce((e,t)=>e+t.SALDO,0)).toFixed(0);J("".concat(parseFloat(t).toLocaleString()))}},[w]);let Y=async()=>{let e=await L(B);e?M(e):(console.log("Error al obtener los datos"),M([])),_(!1)},W=async()=>{let e=await P(B);e?k(e):(console.log("Error al obtener los datos"),k([])),_(!1)},Q=async()=>{let e=await z(B);e?D(e):(console.log("Error al obtener los datos"),D([])),_(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.default,{children:(0,a.jsx)(A.A,{})}),(0,a.jsx)(i.default,{children:(0,a.jsxs)(r.A,{elevation:3,sx:{padding:3,margin:3,marginTop:3},children:[(0,a.jsxs)(i.default,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,a.jsxs)(i.default,{sx:{display:"flex",flexDirection:q?"column":"row",justifyContent:"flex-end",alignItems:"center",gap:2},children:[(0,a.jsxs)(n.default,{variant:"contained",sx:{bgcolor:"#ffa28a",color:"white"},onClick:()=>{t.push("./"),localStorage.removeItem("clientTemp"),$("")},children:[" ","Cerrar"," "]}),(0,a.jsx)(n.default,{variant:"contained",sx:{bgcolor:"#12e7dd",color:"white"},LinkComponent:I(),href:".././pedidos/crearPedido",children:"Crear Pedido"})]}),(0,a.jsx)(o.A,{}),(0,a.jsxs)(i.default,{sx:{dispĺay:"flex",justifyContent:"space-around",alignItems:"center",gap:2,flexWrap:q?"wrap":"nowrap"},children:[(0,a.jsxs)(i.default,{sx:{dispĺay:"flex",alignItems:"center",gap:1},children:[(0,a.jsx)(d.A,{label:"INDIVIDUAL",control:(0,a.jsx)(c.A,{})}),(0,a.jsx)(d.A,{label:"COMPA\xd1IA",control:(0,a.jsx)(c.A,{})})]}),(0,a.jsx)(i.default,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,a.jsxs)(h.A,{variant:"text","aria-label":"text button group",sx:{height:60},children:[(0,a.jsxs)(n.default,{sx:{flexDirection:"column"},children:[(0,a.jsxs)(x.default,{sx:{display:"flex",fontSize:14,paddingRight:5},gutterBottom:!0,children:["$",H]}),(0,a.jsx)("strong",{children:"Saldo"})]}),(0,a.jsxs)(n.default,{sx:{flexDirection:"column"},children:[(0,a.jsxs)(x.default,{sx:{display:"flex",fontSize:14,paddingRight:5},gutterBottom:!0,children:["$",G]}),(0,a.jsx)("strong",{children:"Saldo Mayor a 60"})]})]})})]})]}),(0,a.jsx)(o.A,{orientation:"horizontal"}),(0,a.jsx)("h3",{children:(0,a.jsx)("strong",{style:{fontSize:20,color:"#6d32f7"},children:(null==B?void 0:B.NOMBREALIAS)||""})}),(0,a.jsx)(i.default,{sx:{display:"flex",justifyContent:"space-between",flexDirection:q?"column":"row",alignItems:"center"},children:(0,a.jsxs)(g.A,{container:!0,rowSpacing:1.5,columnSpacing:{xs:1,sm:2,md:3},sx:{p:1},children:[(0,a.jsxs)(g.A,{size:{xs:9,sm:6,md:3},children:[(0,a.jsx)("strong",{children:"NIT"}),(0,a.jsx)(x.default,{sx:{mb:1.5,display:"flex"},children:(null==B?void 0:B.CLIENTE)||""})]}),(0,a.jsxs)(g.A,{size:{xs:9,sm:6,md:3},children:[(0,a.jsx)("strong",{children:"Cupo"}),(0,a.jsxs)(x.default,{sx:{mb:1.5,display:"flex",color:"#16f50f"},children:["$",Number((null==B?void 0:B.CUPO)||"0").toLocaleString("es-ES")]})]}),(0,a.jsxs)(g.A,{size:{xs:9,sm:6,md:3},children:[(0,a.jsx)("strong",{children:"Debe"}),(0,a.jsxs)(x.default,{sx:{mb:1.5,display:"flex",color:"#f50f0f"},children:["$",Number((null==B?void 0:B.SALDO)||"0").toLocaleString("es-ES")]})]}),(0,a.jsxs)(g.A,{size:{xs:9,sm:6,md:3},children:[(0,a.jsx)("strong",{children:"Direcci\xf3n"}),(0,a.jsx)(x.default,{sx:{mb:1.5,display:"flex"},children:(null==B?void 0:B.DIRECCION)||""})]}),(0,a.jsxs)(g.A,{size:{xs:9,sm:6,md:3},children:[(0,a.jsx)("strong",{children:"Tel\xe9fono"}),(0,a.jsx)(x.default,{sx:{mb:1.5,display:"flex"},children:(null==B?void 0:B.TELEFONO1)||""})]}),(0,a.jsxs)(g.A,{size:{xs:9,sm:6,md:3},children:[(0,a.jsx)("strong",{children:"Celular"}),(0,a.jsx)(x.default,{sx:{mb:1.5,display:"flex"},children:(null==B?void 0:B.TELEFONO1)||""})]}),(0,a.jsxs)(g.A,{size:{xs:9,sm:6,md:3},children:[(0,a.jsx)("strong",{children:"Ciudad"}),(0,a.jsx)(x.default,{sx:{mb:1.5,display:"flex"},children:(null==B?void 0:B.CIUDAD)||""})]}),(0,a.jsxs)(g.A,{size:{xs:9,sm:6,md:3},children:[(0,a.jsx)("strong",{children:"Departamento"}),(0,a.jsx)(x.default,{sx:{mb:1.5,display:"flex"},children:(null==B?void 0:B.DEPARTAMENTO)||""})]}),(0,a.jsxs)(g.A,{size:{xs:12,sm:8,md:6},children:[(0,a.jsx)("strong",{children:"Email"}),(0,a.jsx)(x.default,{sx:{mb:1.5,display:"flex"},children:(null==B?void 0:B.E_MAIL)||""})]})]})}),(0,a.jsx)(u.A,{id:"outlined-basic",multiline:!0,rows:3,defaultValue:(null==B?void 0:B.NOTAS)||"",variant:"outlined",sx:{width:"100%",border:"2px solid #13ace9"}}),(0,a.jsxs)(i.default,{sx:{width:"100%",mt:3},children:[(0,a.jsxs)(m.A,{value:O,onChange:(e,t)=>{E(t)},"aria-label":"basic tabs example",children:[(0,a.jsx)(f.A,{label:"Pedidos",...b(0),onClick:Y}),(0,a.jsx)(f.A,{label:"Facturas",...b(1),onClick:W}),(0,a.jsx)(f.A,{label:"Cartera",...b(2),onClick:Q}),(0,a.jsx)(f.A,{label:"",...b(3)})]}),(0,a.jsx)(T,{value:O,index:0,children:(0,a.jsx)(i.default,{sx:{width:"100%",height:350},children:!0===V?(0,a.jsx)(i.default,{sx:{width:"100%"},children:(0,a.jsx)(p.A,{})}):F.length<=0?(0,a.jsx)("h2",{children:"NO HAY PEDIDOS"}):(0,a.jsx)(S.z,{density:"compact",rows:F,columns:y,pageSizeOptions:[5,10],rowSelectionModel:l,getRowId:e=>e.PEDIDO,initialState:{pagination:{paginationModel:{page:0,pageSize:10}}}})})}),(0,a.jsx)(T,{value:O,index:1,children:(0,a.jsx)(i.default,{sx:{width:"100%",height:350},children:!0===V?(0,a.jsx)(i.default,{sx:{width:"100%"},children:(0,a.jsx)(p.A,{})}):U.length<=0?(0,a.jsx)("h2",{children:"NO HAY FACTURAS"}):(0,a.jsx)(S.z,{density:"compact",rows:U,columns:R,getRowId:e=>e.ID,pageSize:[5,10],rowSelectionModel:l,initialState:{pagination:{paginationModel:{page:0,pageSize:10}}}})})}),(0,a.jsx)(T,{value:O,index:2,children:(0,a.jsx)(i.default,{sx:{width:"100%",height:350},children:!0===V?(0,a.jsx)(i.default,{sx:{width:"100%"},children:(0,a.jsx)(p.A,{})}):w.length<=0?(0,a.jsx)("h2",{children:"NO HAY CARTERA"}):(0,a.jsx)(S.z,{density:"compact",rows:w,columns:v,pageSizeOptions:[5,10],rowSelectionModel:l,getRowId:e=>e.NUMDOC,initialState:{pagination:{paginationModel:{page:0,pageSize:10}}}})})})]})]})})]})}},8889:(e,t,l)=>{"use strict";l.d(t,{c:()=>a});let a={url:"http://172.20.20.3:8001"}},70689:(e,t,l)=>{"use strict";l.d(t,{A:()=>d,AuthProvider:()=>o});var a=l(95155),i=l(12115),s=l(76046),r=l(89208);let n=(0,i.createContext)({login:e=>{},logout:()=>{}}),o=e=>{let{children:t}=e,l=(0,s.useRouter)(),[o]=(0,i.useState)(!0),[d,c]=(0,i.useState)({}),[h,x]=(0,i.useState)(null),[u,m]=(0,i.useState)({}),[f,p]=(0,i.useState)({}),[A,C]=(0,i.useState)({}),[j,S]=(0,i.useState)({}),[N,g]=(0,i.useState)({}),O=(0,i.useCallback)(function(e){r.A.set("authTokens",JSON.stringify(e)),localStorage.setItem("auth",JSON.stringify(e)),x(e)},[]),E=(0,i.useCallback)(function(){r.A.remove("authTokens"),localStorage.removeItem("auth"),x(null),l.push("/")},[]);(0,i.useEffect)(()=>{let e=localStorage.getItem("auth"),t=localStorage.getItem("caja"),l=localStorage.getItem("pedido"),a=localStorage.getItem("pedidoV"),i=localStorage.getItem("cartera"),s=localStorage.getItem("cliente"),r=localStorage.getItem("clienteV");r&&C(JSON.parse(r)),a&&S(JSON.parse(a)),i&&g(JSON.parse(i)),e&&x(JSON.parse(e)),s&&p(JSON.parse(s)),l&&m(JSON.parse(l)),t&&c(JSON.parse(t))},[]);let w=(0,i.useMemo)(()=>({auth:h,cliente:f,setCliente:p,pedido:u,setPedido:m,caja:d,setCaja:c,clienteV:A,setClienteV:C,pedidosV:j,setPedidosV:S,carteraV:N,setCarteraV:g,loading:o,login:O,logout:E}),[h,f,u,d,A,j,N,O,E]);return(0,a.jsx)(n.Provider,{value:w,children:t})},d=()=>(0,i.useContext)(n)}},e=>{var t=t=>e(e.s=t);e.O(0,[339,8320,6058,5854,994,5975,1260,6403,152,8173,2670,7493,6675,7653,6899,914,4520,8441,1517,7358],()=>t(72754)),_N_E=e.O()}]);