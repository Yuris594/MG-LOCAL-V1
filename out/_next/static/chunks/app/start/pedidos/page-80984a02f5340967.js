(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3945],{20067:function(){},72061:function(){},42796:function(e,t,o){Promise.resolve().then(o.bind(o,16497))},9504:function(e,t,o){"use strict";var r=o(23963);t.Z=void 0;var a=r(o(19118)),n=o(57437);t.Z=(0,a.default)((0,n.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu")},77699:function(e,t,o){"use strict";var r=o(23963);t.Z=void 0;var a=r(o(19118)),n=o(57437);t.Z=(0,a.default)((0,n.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},20124:function(e,t,o){"use strict";var r=o(2265),a=o(89211),n=o(95885),l=o(57437);let i="function"==typeof(0,a.zY)({}),s=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}}),d=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),c=function(e){var t,o;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={};r&&e.colorSchemes&&"function"==typeof e.getColorSchemeSelector&&Object.entries(e.colorSchemes).forEach(t=>{var o,r;let[n,l]=t,i=e.getColorSchemeSelector(n);i.startsWith("@")?a[i]={":root":{colorScheme:null===(o=l.palette)||void 0===o?void 0:o.mode}}:a[i.replace(/\s*&/,"")]={colorScheme:null===(r=l.palette)||void 0===r?void 0:r.mode}});let n={html:s(e,r),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...d(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...a},l=null===(o=e.components)||void 0===o?void 0:null===(t=o.MuiCssBaseline)||void 0===t?void 0:t.styleOverrides;return l&&(n=[n,l]),n},u="mui-ecs",h=e=>{let t=c(e,!1),o=Array.isArray(t)?t[0]:t;return!e.vars&&o&&(o.html[":root:has(".concat(u,")")]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(t=>{var r,a;let[n,l]=t,i=e.getColorSchemeSelector(n);i.startsWith("@")?o[i]={[":root:not(:has(.".concat(u,"))")]:{colorScheme:null===(r=l.palette)||void 0===r?void 0:r.mode}}:o[i.replace(/\s*&/,"")]={["&:not(:has(.".concat(u,"))")]:{colorScheme:null===(a=l.palette)||void 0===a?void 0:a.mode}}}),t},x=(0,a.zY)(i?e=>{let{theme:t,enableColorScheme:o}=e;return c(t,o)}:e=>{let{theme:t}=e;return h(t)});t.default=function(e){let{children:t,enableColorScheme:o=!1}=(0,n.i)({props:e,name:"MuiCssBaseline"});return(0,l.jsxs)(r.Fragment,{children:[i&&(0,l.jsx)(x,{enableColorScheme:o}),!i&&!o&&(0,l.jsx)("span",{className:u,style:{display:"none"}}),t]})}},15656:function(e,t,o){"use strict";var r=o(2265),a=o(33822),n=o(92384),l=o(22960),i=o(95931),s=o(60909),d=o(57437);let c={entering:{transform:"none"},entered:{transform:"none"}},u=r.forwardRef(function(e,t){let o=(0,l.default)(),u={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{addEndListener:h,appear:x=!0,children:f,easing:m,in:p,onEnter:g,onEntered:j,onEntering:S,onExit:b,onExited:C,onExiting:v,style:y,timeout:w=u,TransitionComponent:Z=a.ZP,...E}=e,O=r.useRef(null),k=(0,s.Z)(O,(0,n.Z)(f),t),P=e=>t=>{if(e){let o=O.current;void 0===t?e(o):e(o,t)}},D=P(S),N=P((e,t)=>{(0,i.n)(e);let r=(0,i.C)({style:y,timeout:w,easing:m},{mode:"enter"});e.style.webkitTransition=o.transitions.create("transform",r),e.style.transition=o.transitions.create("transform",r),g&&g(e,t)}),A=P(j),I=P(v),T=P(e=>{let t=(0,i.C)({style:y,timeout:w,easing:m},{mode:"exit"});e.style.webkitTransition=o.transitions.create("transform",t),e.style.transition=o.transitions.create("transform",t),b&&b(e)}),R=P(C);return(0,d.jsx)(Z,{appear:x,in:p,nodeRef:O,onEnter:N,onEntered:A,onEntering:D,onExit:T,onExited:R,onExiting:I,addEndListener:e=>{h&&h(O.current,e)},timeout:w,...E,children:(e,t)=>r.cloneElement(f,{style:{transform:"scale(0)",visibility:"exited"!==e||p?void 0:"hidden",...c[e],...y,...f.props.style},ref:k,...t})})});t.Z=u},13726:function(e,t,o){"use strict";o.d(t,{Z:function(){return R}});var r=o(57437),a=o(20124),n=o(31193),l=o(71733),i=o(79806),s=o(60335),d=o(60091),c=o(83719),u=o(62501),h=o(6291),x=o(11656),f=o(66325),m=o(90922),p=o(26032),g=o(55693),j=o(42188),S=o(66299),b=o(78457),C=o(21704),v=o(66246),y=o(9504),w=o(16463),Z=o(85800),E=o(2265),O=o(32184),k=o(7547),P=o(57300),D=o(86917),N=o(47905),A=o(87138),I=e=>{let{page:t}=e;return(0,r.jsx)(n.default,{children:(0,r.jsx)(O.Z,{children:t.map(e=>(0,r.jsx)(k.ZP,{disablePadding:!0,children:(0,r.jsxs)(P.Z,{LinkComponent:A.default,href:e.url,onClick:e.onClick,children:[(0,r.jsx)(D.Z,{children:e.icon}),(0,r.jsx)(N.Z,{children:e.title})]})},e.title))})})};let T={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",alignItems:"center",justifyContext:"center",boxShadow:24,pt:2,px:4,pb:3};var R=()=>{let e=(0,w.useRouter)(),{auth:t,logout:o}=(0,Z.a)(),[O,k]=(0,E.useState)(!1),[P,D]=(0,E.useState)(null),[N,R]=(0,E.useState)(!1),M=()=>{R(!1),D(null)},_=[{title:"USUARIOS ",url:"../start/usuarios",icon:(0,r.jsx)(f.Z,{})},{title:"PEDIDOS",url:"/start/pedidos",icon:(0,r.jsx)(m.Z,{})},{title:"CLIENTES",url:"/start/clients",icon:(0,r.jsx)(p.Z,{})},{title:"PRODUCTOS",icon:(0,r.jsx)(g.Z,{}),onClick:e=>{R(!0),D(e.currentTarget)}},{title:"FACTURAS",url:"/start/facturas",icon:(0,r.jsx)(j.Z,{})},{title:"CAJA",url:"../start/pedidos/pedidosCaja",icon:(0,r.jsx)(S.Z,{})}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.default,{}),(0,r.jsxs)(n.default,{sx:{flexGrow:1},children:[(0,r.jsx)(l.Z,{position:"static",sx:{bgcolor:"#262626",width:"auto"},children:(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(s.Z,{color:"inherit",onClick:e=>{D(e.currentTarget)},sx:{display:{xs:"flex",md:"none"}},children:(0,r.jsx)(y.Z,{})}),(0,r.jsx)(n.default,{sx:{display:{xs:"none",md:"flex"}},children:_.map(e=>(0,r.jsx)(d.default,{sx:{fontWeight:"bold"},color:"inherit",size:"large",LinkComponent:A.default,href:e.url,onClick:e.onClick,children:e.title},e.title))}),(0,r.jsx)(c.default,{variant:"h6",sx:{flexGrow:1}}),(0,r.jsx)(d.default,{component:A.default,href:"/start",color:"inherit",children:(0,r.jsx)(v.Z,{})}),(0,r.jsxs)(d.default,{color:"inherit",children:[(0,r.jsx)(C.Z,{}),t&&t.PER_Nom]}),(0,r.jsx)(d.default,{color:"inherit",onClick:()=>k(!0),children:(0,r.jsx)(b.Z,{})})]})}),(0,r.jsx)(u.Z,{open:O,onClose:()=>k(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,r.jsxs)(n.default,{sx:T,children:[(0,r.jsx)(c.default,{id:"modal-modal-title",variant:"h6",component:"h2",children:"\xbfEstas seguro que quiere salir?"}),(0,r.jsx)(n.default,{children:(0,r.jsx)(d.default,{sx:{bgcolor:"red"},variant:"contained",onClick:()=>{o(),e.push("/")},children:"SALIR"})})]})}),(0,r.jsxs)(h.Z,{id:"basic-menu",anchorEl:P,open:N,onClose:M,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,r.jsx)(x.Z,{onClick:M,component:A.default,href:"../start/productos",children:"Productos Por Bodega"}),(0,r.jsx)(x.Z,{onClick:M,component:A.default,href:"../start/productosMG",children:"Productos-MG"})]}),(0,r.jsx)(h.Z,{id:"basic-menu",anchorEl:P,MenuListProps:{"aria-labelledby":"basic-button"},open:!!P,onClose:()=>{D(null)},sx:{display:{xs:"flex",md:"none"}},children:(0,r.jsx)(I,{page:_})})]})]})}},10416:function(e,t,o){"use strict";var r=o(57437),a=o(27800),n=o(2265),l=o(60091);t.Z=e=>{let{datos:t}=e,[o,i]=(0,n.useState)(!1);return(0,r.jsx)(l.default,{variant:"outlined",color:"success",onClick:()=>{if(!Array.isArray(t)||0===t.length){console.error("Datos no est\xe1n en el formato correcto o est\xe1n vac\xedos.");return}i(!0);try{let e=a.P6.book_new(),o=a.P6.json_to_sheet(t);a.P6.book_append_sheet(e,o,"Datos"),a.NC(e,"datos.xlsx")}catch(e){console.error("Error al generar el archivo Excel",e)}finally{i(!1)}},disabled:o,children:o?"Loading...":"Excel"})}},16497:function(e,t,o){"use strict";o.r(t);var r=o(57437),a=o(83719),n=o(31193),l=o(99128),i=o(60091),s=o(28027),d=o(74275),c=o(60335),u=o(15656),h=o(62501),x=o(14595),f=o(2265),m=o(85800),p=o(52610),g=o(16463),j=o(10416),S=o(77699),b=o(13726),C=o(87138);let v={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"white",width:800,height:450,boxShadow:24,p:4},y=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),w=[{field:"FECHA_PEDIDO",headerName:"Fecha",width:170,renderCell:e=>y(e.value)},{field:"PEDIDO",headerName:"Pedido",width:160},{field:"ESTADO",headerName:"Estado",width:70},{field:"IMPRESO",headerName:"IMP",width:70},{field:"AUTORIZADONOM",headerName:"Autorizado",width:200,renderCell:e=>{let t=e.row.AUTORIZADONOM;return(0,r.jsx)(a.default,{style:{color:"APROBADO"===t?"#00FC00":"RETENIDO"===t?"#FF1507":"#000000",backgroundColor:"transparent"},children:t})}},{field:"U_COMPESPECIAL",headerName:"Esp",width:190},{field:"VENDEDOR",headerName:"Vend",width:100},{field:"COMENTARIO_CXC",headerName:"AUT.sistema",width:200},{field:"TOTAL_A_FACTURAR",headerName:"A FACT",width:120},{field:"NOMBRE_RAZON",headerName:"Cliente",width:400},{field:"U_EDITADOPOR",headerName:"Usuario MG",width:100},{field:"DEPTO",headerName:"Departamento",width:130},{field:"CIUDAD",headerName:"Ciudad",width:200}],Z=async()=>{let e=await fetch("/api/pedidos/listar",{method:"GET",headers:{"Content-Type":"application/json"}});return await e.json()};t.default=()=>{let e=(0,g.useRouter)(),{setPedido:t}=(0,m.a)(),[o,y]=(0,f.useState)([]),[E,O]=(0,f.useState)(!1),[k,P]=(0,f.useState)([]),[D,N]=(0,f.useState)([]),[A,I]=(0,f.useState)(!1),[T,R]=(0,f.useState)(!0),[M,_]=(0,f.useState)([]),z=(0,f.useMemo)(()=>k,[k]);(0,f.useEffect)(()=>{F()},[]);let F=async()=>{let e=await Z();try{e&&(P(e),y(e),R(!1),setTimeout(()=>{I(!0)},100))}catch(e){console.log("Error al obtener los datos",e)}},L=e=>{e.preventDefault(),N(e.target.value),U(e.target.value)},U=e=>{P(o.filter(t=>Object.values(t).map(e=>e?e.toString().toLowerCase():"").some(t=>t.includes(e))))},B=(0,f.useCallback)(r=>{if(_(r),r.length>0){let a=o.filter(e=>{let t=e.PEDIDO;return!!t&&t.toString().includes(r[0])});localStorage.setItem("pedidoTemp",JSON.stringify(a)),t(a),e.push("./pedidos/pedidosC")}},[k]),J=()=>O(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.default,{marginBottom:"50px",children:[" ","  ",(0,r.jsx)(b.Z,{})," "," "]}),(0,r.jsx)("div",{className:"container",children:!0===T?(0,r.jsx)(n.default,{sx:{width:"100%"},children:(0,r.jsx)(l.Z,{})}):(0,r.jsxs)(n.default,{children:[(0,r.jsxs)("div",{style:{height:"auto",width:"100%"},children:[(0,r.jsx)(a.default,{variant:"h5",component:"h1",gutterBottom:!0,sx:{display:"flex",justifyContent:"column",alignItems:"center",width:"auto",margin:0,color:"#000"},children:"PEDIDOS"}),(0,r.jsx)(n.default,{children:(0,r.jsxs)(n.default,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"auto",margin:1},children:[(0,r.jsxs)(n.default,{sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,r.jsxs)(i.default,{variant:"outlined",sx:{margin:"10px"},onClick:()=>O(!0),children:[" "," Nuevo "," "]}),(0,r.jsx)(j.Z,{datos:k})]}),(0,r.jsxs)(s.Z,{sx:{p:"2px 4px",display:"flex",alignItems:"flex-rigth",width:1100,margin:"10px"},children:[(0,r.jsx)(d.ZP,{sx:{ml:1,flex:1},placeholder:"Buscar...",inputProps:{"aria-label":"search google maps"},autoFocus:!0,name:"PER_Usuario",value:D,onChange:L}),(0,r.jsx)(c.Z,{title:"buscar",sx:{p:"10px"},"aria-label":"search",children:(0,r.jsx)(S.Z,{})})]})]})}),(0,r.jsx)(u.Z,{in:A,children:(0,r.jsx)(n.default,{sx:{height:950,width:"100%"},children:(0,r.jsx)(p._,{rows:z,columns:w,initialState:{pagination:{paginationModel:{page:0,pageSize:16}}},pageSizeOptions:[5,16],onRowSelectionModelChange:B,rowSelectionModel:M,getRowId:e=>e.PEDIDO,sx:{backgroundColor:"#ffffff"}})})})]}),(0,r.jsx)(h.Z,{open:E,onClose:J,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,r.jsx)(n.default,{sx:v,children:(0,r.jsxs)(n.default,{children:[(0,r.jsxs)(a.default,{id:"modal-modal-title",variant:"h6",component:"h2",children:[" "," Seleccionar articulo "," "]}),(0,r.jsx)(x.Z,{sx:{height:4,m:.5,marginBottom:""},orientation:"horizontal"}),(0,r.jsxs)(n.default,{sx:{display:"flex",alignItems:"center",justifyContent:"right"},children:[(0,r.jsx)(C.default,{href:"../pedidos",children:(0,r.jsxs)(i.default,{variant:"filled",sx:{margin:"2px",bgcolor:"#b6ff91"},children:[" "," Agregear "," "]})}),(0,r.jsxs)(i.default,{variant:"filled",sx:{margin:"2px",bgcolor:"#ffa28a"},onClick:J,children:[" "," Cerrar "," "]})]}),(0,r.jsxs)(s.Z,{sx:{p:"2px 4px",display:"flex",alignItems:"center",width:250,boxShadow:3},children:[(0,r.jsx)(d.ZP,{sx:{ml:1,flex:1},placeholder:"Buscar",inputProps:{"aria-label":"search google maps"},value:D,onChange:L}),(0,r.jsx)(c.Z,{type:"button",sx:{p:"10px"},"aria-label":"search",children:(0,r.jsx)(S.Z,{})}),(0,r.jsx)(x.Z,{sx:{height:28,m:.5},orientation:"vertical"})]}),(0,r.jsx)(n.default,{sx:{height:200,width:"100%"},children:(0,r.jsx)(p._,{rows:k,columns:w,getRowId:e=>e.PEDIDO,initialState:{pagination:{paginationModel:{page:0,pageSize:18}}},pageSizeOptions:[5,18],rowSelectionModel:M,onRowSelectionModelChange:B})})]})})})]})})]})}},85800:function(e,t,o){"use strict";o.d(t,{AuthProvider:function(){return i},a:function(){return s}});var r=o(57437),a=o(2265),n=o(44785);let l=(0,a.createContext)({login:e=>{},logout:()=>{}}),i=e=>{let{children:t}=e,[o,i]=(0,a.useState)(null),[s,d]=(0,a.useState)({}),[c,u]=(0,a.useState)({}),[h,x]=(0,a.useState)({}),[f,m]=(0,a.useState)(!0),p=(0,a.useCallback)(function(e){n.Z.set("authTokens",JSON.stringify(e)),i(e)},[]),g=(0,a.useCallback)(function(){n.Z.remove("authTokens")},[]);(0,a.useEffect)(()=>{let e=localStorage.getItem("datos"),t=localStorage.getItem("clientTemp"),o=localStorage.getItem("pedidoTemp"),r=localStorage.getItem("caja");e&&i(JSON.parse(e)),t&&d(JSON.parse(t)),o&&u(JSON.parse(o)),r&&x(JSON.parse(r))},[]);let j=(0,a.useMemo)(()=>({auth:o,cliente:s,setCliente:d,pedido:c,setPedido:u,caja:h,setCaja:x,loading:f,login:p,logout:g}),[o,s,c,h,p,g]);return(0,r.jsx)(l.Provider,{value:j,children:t})},s=()=>(0,a.useContext)(l)}},function(e){e.O(0,[1425,4797,4129,6291,4275,3983,2561,6981,2610,9105,2971,7023,1744],function(){return e(e.s=42796)}),_N_E=e.O()}]);