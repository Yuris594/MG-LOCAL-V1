(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3433],{63713:function(e,t,a){Promise.resolve().then(a.bind(a,83865))},13726:function(e,t,a){"use strict";a.d(t,{Z:function(){return w}});var l=a(57437),n=a(33579),o=a.n(n),i=a(20124),r=a(31193),s=a(71733),c=a(79806),_=a(60335),u=a(60091),d=a(83719),f=a(62501),h=a(6291),x=a(11656),m=a(66325),p=a(90922),C=a(26032),S=a(55693),T=a(42188),E=a(66299),g=a(40301),I=a(78457),O=a(21704),N=a(66246),b=a(16463),A=a(85800),j=a(2265),y=a(32184),L=a(7547),R=a(57300),D=a(86917),v=a(47905),P=a(87138),Z=e=>{let{page:t}=e;return(0,l.jsx)(r.default,{children:(0,l.jsx)(y.Z,{children:t.map(e=>(0,l.jsx)(L.ZP,{disablePadding:!0,children:(0,l.jsxs)(R.Z,{LinkComponent:P.default,href:e.url,onClick:e.onClick,children:[(0,l.jsx)(D.Z,{children:e.icon}),(0,l.jsx)(v.Z,{primaryTypographyProps:{fontSize:15,fontWeight:"medium",letterSpacing:0},children:e.title})]})},e.title))})})};let F={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",alignItems:"center",justifyContext:"center",boxShadow:24,textAlign:"center",pt:2,px:4,pb:3};var w=()=>{let e=(0,b.useRouter)(),{auth:t,logout:a}=(0,A.a)(),[n,y]=(0,j.useState)(!1),[L,R]=(0,j.useState)(null),[D,v]=(0,j.useState)(!1),w=()=>{v(!1),R(null)},k=[{title:"USUARIOS ",url:"/components/usuarios",icon:(0,l.jsx)(m.Z,{})},{title:"PEDIDOS",url:"/components/pedidos",icon:(0,l.jsx)(p.Z,{})},{title:"CLIENTES",url:"/components/clientes",icon:(0,l.jsx)(C.Z,{})},{title:"PRODUCTOS",icon:(0,l.jsx)(S.Z,{}),onClick:e=>{v(!0),R(e.currentTarget)}},{title:"FACTURAS",url:"/start/facturas",icon:(0,l.jsx)(T.Z,{})},{title:"CAJA",url:"/start/pedidos/pedidosCaja",icon:(0,l.jsx)(E.Z,{})}];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.default,{}),(0,l.jsxs)(r.default,{sx:{flexGrow:1},children:[(0,l.jsx)(s.Z,{position:"static",sx:{bgcolor:"#262626",width:"auto"},children:(0,l.jsxs)(c.Z,{children:[(0,l.jsx)(_.Z,{color:"inherit",onClick:e=>{R(e.currentTarget)},sx:{display:{xs:"flex",md:"none"}},children:(0,l.jsx)(g.Z,{})}),(0,l.jsx)(r.default,{sx:{display:{xs:"none",md:"flex"}},children:k.map(e=>(0,l.jsx)(u.default,{sx:{fontSize:"15px"},color:"inherit",size:"large",LinkComponent:P.default,href:e.url,onClick:e.onClick,children:e.title},e.title))}),(0,l.jsx)(d.default,{variant:"h6",sx:{flexGrow:1}}),(0,l.jsx)(u.default,{component:P.default,href:"/start",color:"inherit",children:(0,l.jsx)(N.Z,{})}),(0,l.jsxs)(u.default,{className:o().className,color:"inherit",sx:{fontSize:"15px"},children:[(0,l.jsx)(O.Z,{}),t&&t.PER_Nom]}),(0,l.jsx)(u.default,{color:"inherit",onClick:()=>y(!0),children:(0,l.jsx)(I.Z,{})})]})}),(0,l.jsx)(f.Z,{open:n,onClose:()=>y(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,l.jsxs)(r.default,{sx:F,children:[(0,l.jsx)(d.default,{id:"modal-modal-title",variant:"h6",component:"h2",children:"\xbfEstas seguro que quiere salir?"}),(0,l.jsx)(r.default,{children:(0,l.jsx)(u.default,{sx:{bgcolor:"red"},variant:"contained",onClick:()=>{a(),e.push("/")},children:"SALIR"})})]})}),(0,l.jsxs)(h.Z,{id:"basic-menu",anchorEl:L,open:D,onClose:w,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,l.jsx)(x.Z,{onClick:w,component:P.default,href:"/start/productos",children:"Productos Por Bodega"}),(0,l.jsx)(x.Z,{onClick:w,component:P.default,href:"/start/productosMG",children:"Productos-MG"})]}),(0,l.jsx)(h.Z,{id:"basic-menu",anchorEl:L,MenuListProps:{"aria-labelledby":"basic-button"},open:!!L,onClose:()=>{R(null)},sx:{display:{xs:"flex",md:"none"}},children:(0,l.jsx)(Z,{page:k})})]})]})}},42716:function(e,t,a){"use strict";a.d(t,{c:function(){return n}});var l=a(2265);let n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,a]=(0,l.useState)(e);return{form:t,changed:e=>{let{name:l,value:n}=e.target;a({...t,[l]:n})},setForm:a}}},83865:function(e,t,a){"use strict";a.r(t);var l=a(57437),n=a(80743),o=a.n(n),i=a(31193),r=a(28027),s=a(83719),c=a(23983),_=a(60091),u=a(13726),d=a(42716),f=a(2265),h=a(76235),x=a(64379),m=a.n(x),p=a(97501);a(27824);let C=()=>{m().fire({title:"Factura no existe!",icon:"error",button:"Aceptar"})},S=async e=>(await fetch("/api/clientes/factura_lineas/".concat(e),{method:"GET",headers:{"Content-Type":"application/json"}})).json();t.default=()=>{let{form:e,changed:t}=(0,d.c)({}),[a,n]=(0,f.useState)(null),[x,m]=(0,f.useState)([]),[T]=(0,f.useState)((0,h.WU)(new Date,"dd/MM/yyyy HH:mm:ss")),[E,g]=(0,f.useState)({}),I=async t=>{t.preventDefault();let a=e.factura,l=await S(a);console.log(l);try{if(l){n(l[0]);let e=["ARTICULO","CANTIDAD","DESCRIPCION","PORCIVA","PORDESC","PRECIO_UNITARIO","PRECIO_TOTAL","TOTAL_IMPUESTO1","DESC_TOT_LINEA","TOTAL_MERCADERIA"],t=l.map(t=>{let a=Object.fromEntries(Object.entries(t).filter(t=>{let[a]=t;return e.includes(a)}));return"PRECIO_TOTAL"in a&&(a.PRECIO_TOTAL=Math.floor(a.PRECIO_TOTAL)),"DESC_TOT_LINEA"in a&&(a.DESC_TOT_LINEA=Math.floor(a.DESC_TOT_LINEA)),a});m(t);let a=0,o=0;t.forEach(e=>{a+=e.PRECIO_TOTAL||0,o+=e.DESC_TOT_LINEA||0});let i=.19*a,r=a+i;g({sumatotal:a.toLocaleString("es-ES"),descuento:o.toLocaleString("es-ES"),impuesto:i.toLocaleString("es-ES"),totalConImpuesto:r.toLocaleString("es-ES")})}else C()}catch(e){console.error("Error al realizar la peticion;",e),C()}};(0,f.useEffect)(()=>{a&&x&&(O(),n(),m([]))},[a,x]);let O=()=>{let e=new p.default("portrait","pt","letter"),t=[{field:"ARTICULO",headerName:"Ref.",width:200},{field:"CANTIDAD",headerName:"CANT",width:200,align:"right"},{field:"CPed",headerName:"UND",width:200,type:"number",align:"right"},{field:"DESCRIPCION",headerName:"DESCRIPCI\xd3N",width:1e3},{field:"PORCIVA",headerName:"IVA",width:200,align:"right"},{field:"PORDESC",headerName:"DTO",width:200,align:"right"},{field:"PRECIO_UNITARIO",headerName:"VALOR UNI",width:200,valueFormatter:e=>{let t=Number(e.value).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"PRECIO_TOTAL",headerName:"TOTAL",width:250,type:"number",valueFormatter:e=>{let t=Number(e.value).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"}],l=x.map(e=>{let a=[];return t.forEach(t=>{a.push(e[t.field])}),a});e.setFontSize(11),e.text("Nuestra direcci\xf3n y lineas de atenci\xf3n han cambiado:(4) 604 3380 - 3203509705",100,17),e.setFontSize(13),e.text("_________________________________________________________________________________",12,20),e.setFontSize(13),e.addImage("/logo_factura.png","PNG",10,30,200,25),e.setFontSize(15),e.text("REMISI\xd3N N\xb0:   ".concat(a.FACTURA),350,45),e.setFontSize(9),e.text(" ".concat(a.FECHA_DESPACHO),500,65),e.setFontSize(11),e.text("FECHA",460,65),e.text("NIT.830.900.137-1",50,65),e.setFontSize(13),e.text("_________________________________________________________________________________",12,70),e.setFontSize(9),e.text("CLIENTE:    ".concat(a.CLIENTE),12,85),e.text("NIT/CEDULA:    ".concat(a.CreatedBy),12,98),e.text("TEL:    ".concat(a.CreatedBy),200,98),e.text("VENDEDOR:    ".concat(a.CreatedBy),350,98),e.text("MUNICIPIO:    ".concat(a.CreatedBy,"-").concat(a.CreatedBy),12,112),e.text("PEDIDO:    ".concat(a.PEDIDO),340,112),e.text("CREADO:    ".concat(a.CreatedBy),450,112),e.text("DIRECCION:    ".concat(a.CreatedBy),12,125),e.text("NOTA:   ".concat(a.OBSERVACIONES),12,139),e.autoTable({head:[t.map(e=>e.headerName)],body:l,startY:150,theme:"plain",columnStyles:{cellWidth:"auto"},styles:{theme:"plain",tableWidth:"auto",lineColor:[200,200,200],lineWidth:.1,font:"helvetica",fontStyle:"normal",textColor:[0,0,0],dispaly:"flex",fontSize:8}}),e.setFontSize(10),e.text("TOTAL ITEMS:        ".concat(x.length),350,e.autoTable.previous.finalY+20),e.text("SubTotal:     ".concat(a.TOTAL_MERCADERIA.toLocaleString("es-ES")),470,e.autoTable.previous.finalY+20),e.text("Desc:           ".concat(E.descuento.toLocaleString("es-ES")),470,e.autoTable.previous.finalY+40),e.text("IVA:              ".concat(E.impuesto),470,e.autoTable.previous.finalY+60),e.text("TOTAL:        ".concat(E.totalConImpuesto),470,e.autoTable.previous.finalY+80),e.setFontSize(11),e.text("ACEPTO este documento y declaro haber recibido real y \n materialmente los articulos arriba descritos ",12,e.autoTable.previous.finalY+20),e.text("FECHA RECIBIDO_____________",280,e.autoTable.previous.finalY+72),e.text("FIRMA Y SELLO",12,e.autoTable.previous.finalY+90),e.text("HORA:____:____",280,e.autoTable.previous.finalY+86),e.text("".concat(T),12,e.autoTable.previous.finalY+106),e.rect(10,e.autoTable.previous.finalY+9,450,88),e.rect(463,e.autoTable.previous.finalY+9,120,88),e.output("dataurlnewwindow")};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(i.default,{children:[" "," ",(0,l.jsx)(u.Z,{})," "]}),(0,l.jsx)(i.default,{className:"container",children:(0,l.jsx)(i.default,{className:o().className,sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"44vw"},children:(0,l.jsxs)(r.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center",bgcolor:"#eeee",padding:2},children:[(0,l.jsx)(s.default,{className:o().className,component:"h1",variant:"h5",children:"Digite el n\xfamero de la Factura"}),(0,l.jsxs)(i.default,{component:"form",noValidate:!0,sx:{mt:1},children:[(0,l.jsx)(c.Z,{required:!0,fullWidth:!0,id:"factura",name:"factura",autoComplete:"factura",autoFocus:!0,value:e.factura||"",onChange:t}),(0,l.jsx)(_.default,{className:o().className,type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:I,children:"Buscar"})]})]})})})]})}},85800:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return r},a:function(){return s}});var l=a(57437),n=a(2265),o=a(44785);let i=(0,n.createContext)({login:e=>{},logout:()=>{}}),r=e=>{let{children:t}=e,[a,r]=(0,n.useState)(null),[s,c]=(0,n.useState)({}),[_,u]=(0,n.useState)({}),[d,f]=(0,n.useState)({}),[h]=(0,n.useState)(!0),x=(0,n.useCallback)(function(e){o.Z.set("authTokens",JSON.stringify(e)),localStorage.setItem("auth",JSON.stringify(e)),r(e)},[]),m=(0,n.useCallback)(function(){o.Z.remove("authTokens"),localStorage.removeItem("auth"),r(null)},[]);(0,n.useEffect)(()=>{let e=localStorage.getItem("auth"),t=localStorage.getItem("cliente"),a=localStorage.getItem("pedido"),l=localStorage.getItem("caja");e&&r(JSON.parse(e)),t&&c(JSON.parse(t)),a&&u(JSON.parse(a)),l&&f(JSON.parse(l))},[]);let p=(0,n.useMemo)(()=>({auth:a,cliente:s,setCliente:c,pedido:_,setPedido:u,caja:d,setCaja:f,loading:h,login:x,logout:m}),[a,s,_,d,x,m]);return(0,l.jsx)(i.Provider,{value:p,children:t})},s=()=>(0,n.useContext)(i)}},function(e){e.O(0,[4488,9289,9461,2505,4797,4129,6291,2561,4275,3983,6981,9105,4936,7726,2971,7023,1744],function(){return e(e.s=63713)}),_N_E=e.O()}]);