(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3433],{63713:function(e,t,o){Promise.resolve().then(o.bind(o,83865))},20124:function(e,t,o){"use strict";var a=o(2265),r=o(89211),n=o(95885),l=o(57437);let i="function"==typeof(0,r.zY)({}),s=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}}),c=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),u=function(e){var t,o;let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={};a&&e.colorSchemes&&"function"==typeof e.getColorSchemeSelector&&Object.entries(e.colorSchemes).forEach(t=>{var o,a;let[n,l]=t,i=e.getColorSchemeSelector(n);i.startsWith("@")?r[i]={":root":{colorScheme:null===(o=l.palette)||void 0===o?void 0:o.mode}}:r[i.replace(/\s*&/,"")]={colorScheme:null===(a=l.palette)||void 0===a?void 0:a.mode}});let n={html:s(e,a),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...c(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...r},l=null===(o=e.components)||void 0===o?void 0:null===(t=o.MuiCssBaseline)||void 0===t?void 0:t.styleOverrides;return l&&(n=[n,l]),n},d="mui-ecs",_=e=>{let t=u(e,!1),o=Array.isArray(t)?t[0]:t;return!e.vars&&o&&(o.html[":root:has(".concat(d,")")]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(t=>{var a,r;let[n,l]=t,i=e.getColorSchemeSelector(n);i.startsWith("@")?o[i]={[":root:not(:has(.".concat(d,"))")]:{colorScheme:null===(a=l.palette)||void 0===a?void 0:a.mode}}:o[i.replace(/\s*&/,"")]={["&:not(:has(.".concat(d,"))")]:{colorScheme:null===(r=l.palette)||void 0===r?void 0:r.mode}}}),t},p=(0,r.zY)(i?e=>{let{theme:t,enableColorScheme:o}=e;return u(t,o)}:e=>{let{theme:t}=e;return _(t)});t.default=function(e){let{children:t,enableColorScheme:o=!1}=(0,n.i)({props:e,name:"MuiCssBaseline"});return(0,l.jsxs)(a.Fragment,{children:[i&&(0,l.jsx)(p,{enableColorScheme:o}),!i&&!o&&(0,l.jsx)("span",{className:d,style:{display:"none"}}),t]})}},60335:function(e,t,o){"use strict";o.d(t,{Z:function(){return S}});var a=o(2265),r=o(44839),n=o(76990),l=o(6031),i=o(48024),s=o(339),c=o(95885),u=o(60781),d=o(12272),_=o(72296),p=o(70587);function h(e){return(0,p.ZP)("MuiIconButton",e)}let f=(0,_.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]);var m=o(57437);let x=e=>{let{classes:t,disabled:o,color:a,edge:r,size:l}=e,i={root:["root",o&&"disabled","default"!==a&&"color".concat((0,d.Z)(a)),r&&"edge".concat((0,d.Z)(r)),"size".concat((0,d.Z)(l))]};return(0,n.Z)(i,h,t)},g=(0,i.default)(u.Z,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:o}=e;return[t.root,"default"!==o.color&&t["color".concat((0,d.Z)(o.color))],o.edge&&t["edge".concat((0,d.Z)(o.edge))],t["size".concat((0,d.Z)(o.size))]]}})((0,s.Z)(e=>{let{theme:t}=e;return{textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:{disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,l.Fq)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]}}),(0,s.Z)(e=>{let{theme:t}=e;return{variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(e=>{let[,t]=e;return t&&t.main}).map(e=>{let[o]=e;return{props:{color:o},style:{color:(t.vars||t).palette[o].main}}}),...Object.entries(t.palette).filter(e=>{let[,t]=e;return t&&t.main}).map(e=>{let[o]=e;return{props:{color:o,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?"rgba(".concat((t.vars||t).palette[o].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,l.Fq)((t.vars||t).palette[o].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}}}),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],["&.".concat(f.disabled)]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}}}));var S=a.forwardRef(function(e,t){let o=(0,c.i)({props:e,name:"MuiIconButton"}),{edge:a=!1,children:n,className:l,color:i="default",disabled:s=!1,disableFocusRipple:u=!1,disableRipple:d=!1,size:_="medium",...p}=o,h={...o,edge:a,color:i,disabled:s,disableFocusRipple:u,disableRipple:d,size:_},f=x(h);return(0,m.jsx)(g,{className:(0,r.Z)(f.root,l),centerRipple:!0,focusRipple:!u,disabled:s,disableRipple:d,ref:t,...p,ownerState:h,children:n})})},13726:function(e,t,o){"use strict";o.d(t,{Z:function(){return P}});var a=o(57437),r=o(20124),n=o(31193),l=o(71733),i=o(79806),s=o(60335),c=o(60091),u=o(83719),d=o(62501),_=o(6291),p=o(11656),h=o(66325),f=o(90922),m=o(26032),x=o(55693),g=o(42188),S=o(66299),C=o(78457),b=o(21704),v=o(66246),y=o(9504),T=o(16463),E=o(85800),O=o(2265),I=o(32184),j=o(7547),A=o(57300),R=o(86917),N=o(47905),Z=o(87138),L=e=>{let{page:t}=e;return(0,a.jsx)(n.default,{children:(0,a.jsx)(I.Z,{children:t.map(e=>(0,a.jsx)(j.ZP,{disablePadding:!0,children:(0,a.jsxs)(A.Z,{LinkComponent:Z.default,href:e.url,onClick:e.onClick,children:[(0,a.jsx)(R.Z,{children:e.icon}),(0,a.jsx)(N.Z,{children:e.title})]})},e.title))})})};let D={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",alignItems:"center",justifyContext:"center",boxShadow:24,pt:2,px:4,pb:3};var P=()=>{let e=(0,T.useRouter)(),{auth:t,logout:o}=(0,E.a)(),[I,j]=(0,O.useState)(!1),[A,R]=(0,O.useState)(null),[N,P]=(0,O.useState)(!1),k=()=>{P(!1),R(null)},z=[{title:"USUARIOS ",url:"../start/usuarios",icon:(0,a.jsx)(h.Z,{})},{title:"PEDIDOS",url:"/start/pedidos",icon:(0,a.jsx)(f.Z,{})},{title:"CLIENTES",url:"/start/clients",icon:(0,a.jsx)(m.Z,{})},{title:"PRODUCTOS",icon:(0,a.jsx)(x.Z,{}),onClick:e=>{P(!0),R(e.currentTarget)}},{title:"FACTURAS",url:"/start/facturas",icon:(0,a.jsx)(g.Z,{})},{title:"CAJA",url:"../start/pedidos/pedidosCaja",icon:(0,a.jsx)(S.Z,{})}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.default,{}),(0,a.jsxs)(n.default,{sx:{flexGrow:1},children:[(0,a.jsx)(l.Z,{position:"static",sx:{bgcolor:"#262626",width:"auto"},children:(0,a.jsxs)(i.Z,{children:[(0,a.jsx)(s.Z,{color:"inherit",onClick:e=>{R(e.currentTarget)},sx:{display:{xs:"flex",md:"none"}},children:(0,a.jsx)(y.Z,{})}),(0,a.jsx)(n.default,{sx:{display:{xs:"none",md:"flex"}},children:z.map(e=>(0,a.jsx)(c.default,{sx:{fontWeight:"bold"},color:"inherit",size:"large",LinkComponent:Z.default,href:e.url,onClick:e.onClick,children:e.title},e.title))}),(0,a.jsx)(u.default,{variant:"h6",sx:{flexGrow:1}}),(0,a.jsx)(c.default,{component:Z.default,href:"/start",color:"inherit",children:(0,a.jsx)(v.Z,{})}),(0,a.jsxs)(c.default,{color:"inherit",children:[(0,a.jsx)(b.Z,{}),t&&t.PER_Nom]}),(0,a.jsx)(c.default,{color:"inherit",onClick:()=>j(!0),children:(0,a.jsx)(C.Z,{})})]})}),(0,a.jsx)(d.Z,{open:I,onClose:()=>j(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,a.jsxs)(n.default,{sx:D,children:[(0,a.jsx)(u.default,{id:"modal-modal-title",variant:"h6",component:"h2",children:"\xbfEstas seguro que quiere salir?"}),(0,a.jsx)(n.default,{children:(0,a.jsx)(c.default,{sx:{bgcolor:"red"},variant:"contained",onClick:()=>{o(),e.push("/")},children:"SALIR"})})]})}),(0,a.jsxs)(_.Z,{id:"basic-menu",anchorEl:A,open:N,onClose:k,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,a.jsx)(p.Z,{onClick:k,component:Z.default,href:"../start/productos",children:"Productos Por Bodega"}),(0,a.jsx)(p.Z,{onClick:k,component:Z.default,href:"../start/productosMG",children:"Productos-MG"})]}),(0,a.jsx)(_.Z,{id:"basic-menu",anchorEl:A,MenuListProps:{"aria-labelledby":"basic-button"},open:!!A,onClose:()=>{R(null)},sx:{display:{xs:"flex",md:"none"}},children:(0,a.jsx)(L,{page:z})})]})]})}},42716:function(e,t,o){"use strict";o.d(t,{c:function(){return r}});var a=o(2265);let r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,o]=(0,a.useState)(e);return{form:t,changed:e=>{let{name:a,value:r}=e.target;o({...t,[a]:r})},setForm:o}}},83865:function(e,t,o){"use strict";o.r(t);var a=o(57437),r=o(31193),n=o(28027),l=o(83719),i=o(23983),s=o(60091),c=o(13726),u=o(42716),d=o(2265),_=o(76235),p=o(64379),h=o.n(p),f=o(97501);o(27824);let m=()=>{h().fire({title:"Factura no existe!",icon:"error",button:"Aceptar"})},x=async e=>(await fetch("/api/clientes/factura_lineas/".concat(e),{method:"GET",headers:{"Content-Type":"application/json"}})).json();t.default=()=>{let{form:e,changed:t}=(0,u.c)({}),[o,p]=(0,d.useState)(null),[h,g]=(0,d.useState)([]),[S]=(0,d.useState)((0,_.WU)(new Date,"dd/MM/yyyy HH:mm:ss")),[C,b]=(0,d.useState)({}),v=async t=>{t.preventDefault();let o=e.factura,a=await x(o);console.log(a);try{if(a){p(a[0]);let e=["ARTICULO","CANTIDAD","DESCRIPCION","PORCIVA","PORDESC","PRECIO_UNITARIO","PRECIO_TOTAL","TOTAL_IMPUESTO1","DESC_TOT_LINEA","TOTAL_MERCADERIA"],t=a.map(t=>{let o=Object.fromEntries(Object.entries(t).filter(t=>{let[o]=t;return e.includes(o)}));return"PRECIO_TOTAL"in o&&(o.PRECIO_TOTAL=Math.floor(o.PRECIO_TOTAL)),"DESC_TOT_LINEA"in o&&(o.DESC_TOT_LINEA=Math.floor(o.DESC_TOT_LINEA)),o});g(t);let o=0,r=0;t.forEach(e=>{o+=e.PRECIO_TOTAL||0,r+=e.DESC_TOT_LINEA||0});let n=.19*o,l=o+n;b({sumatotal:o.toLocaleString("es-ES"),descuento:r.toLocaleString("es-ES"),impuesto:n.toLocaleString("es-ES"),totalConImpuesto:l.toLocaleString("es-ES")})}else m()}catch(e){console.error("Error al realizar la peticion;",e),m()}};(0,d.useEffect)(()=>{o&&h&&(y(),p(),g([]))},[o,h]);let y=()=>{let e=new f.default("portrait","pt","letter"),t=[{field:"ARTICULO",headerName:"Ref.",width:200},{field:"CANTIDAD",headerName:"CANT",width:200,align:"right"},{field:"CPed",headerName:"UND",width:200,type:"number",align:"right"},{field:"DESCRIPCION",headerName:"DESCRIPCI\xd3N",width:1e3},{field:"PORCIVA",headerName:"IVA",width:200,align:"right"},{field:"PORDESC",headerName:"DTO",width:200,align:"right"},{field:"PRECIO_UNITARIO",headerName:"VALOR UNI",width:200,valueFormatter:e=>{let t=Number(e.value).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"PRECIO_TOTAL",headerName:"TOTAL",width:250,type:"number",valueFormatter:e=>{let t=Number(e.value).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"}],a=h.map(e=>{let o=[];return t.forEach(t=>{o.push(e[t.field])}),o});e.setFontSize(11),e.text("Nuestra direcci\xf3n y lineas de atenci\xf3n han cambiado:(4) 604 3380 - 3203509705",100,17),e.setFontSize(13),e.text("_________________________________________________________________________________",12,20),e.setFontSize(13),e.addImage("/logo_factura.png","PNG",10,30,200,25),e.setFontSize(15),e.text("REMISI\xd3N N\xb0:   ".concat(o.FACTURA),350,45),e.setFontSize(9),e.text(" ".concat(o.FECHA_DESPACHO),500,65),e.setFontSize(11),e.text("FECHA",460,65),e.text("NIT.830.900.137-1",50,65),e.setFontSize(13),e.text("_________________________________________________________________________________",12,70),e.setFontSize(9),e.text("CLIENTE:    ".concat(o.CLIENTE),12,85),e.text("NIT/CEDULA:    ".concat(o.CreatedBy),12,98),e.text("TEL:    ".concat(o.CreatedBy),200,98),e.text("VENDEDOR:    ".concat(o.CreatedBy),350,98),e.text("MUNICIPIO:    ".concat(o.CreatedBy,"-").concat(o.CreatedBy),12,112),e.text("PEDIDO:    ".concat(o.PEDIDO),340,112),e.text("CREADO:    ".concat(o.CreatedBy),450,112),e.text("DIRECCION:    ".concat(o.CreatedBy),12,125),e.text("NOTA:   ".concat(o.OBSERVACIONES),12,139),e.autoTable({head:[t.map(e=>e.headerName)],body:a,startY:150,theme:"plain",columnStyles:{cellWidth:"auto"},styles:{theme:"plain",tableWidth:"auto",lineColor:[200,200,200],lineWidth:.1,font:"helvetica",fontStyle:"normal",textColor:[0,0,0],dispaly:"flex",fontSize:8}}),e.setFontSize(10),e.text("TOTAL ITEMS:        ".concat(h.length),350,e.autoTable.previous.finalY+20),e.text("SubTotal:     ".concat(o.TOTAL_MERCADERIA.toLocaleString("es-ES")),470,e.autoTable.previous.finalY+20),e.text("Desc:           ".concat(C.descuento.toLocaleString("es-ES")),470,e.autoTable.previous.finalY+40),e.text("IVA:              ".concat(C.impuesto),470,e.autoTable.previous.finalY+60),e.text("TOTAL:        ".concat(C.totalConImpuesto),470,e.autoTable.previous.finalY+80),e.setFontSize(11),e.text("ACEPTO este documento y declaro haber recibido real y \n materialmente los articulos arriba descritos ",12,e.autoTable.previous.finalY+20),e.text("FECHA RECIBIDO_____________",280,e.autoTable.previous.finalY+72),e.text("FIRMA Y SELLO",12,e.autoTable.previous.finalY+90),e.text("HORA:____:____",280,e.autoTable.previous.finalY+86),e.text("".concat(S),12,e.autoTable.previous.finalY+106),e.rect(10,e.autoTable.previous.finalY+9,450,88),e.rect(463,e.autoTable.previous.finalY+9,120,88),e.output("dataurlnewwindow")};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.default,{marginBottom:"50px",children:[" "," ",(0,a.jsx)(c.Z,{})," "]}),(0,a.jsx)(r.default,{className:"container",children:(0,a.jsx)(r.default,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"44vw"},children:(0,a.jsxs)(n.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center",bgcolor:"#eeee",padding:2},children:[(0,a.jsx)(l.default,{component:"h1",variant:"h5",children:"Digite n\xfamero de factura"}),(0,a.jsxs)(r.default,{component:"form",noValidate:!0,sx:{mt:1},children:[(0,a.jsx)(i.Z,{required:!0,fullWidth:!0,id:"factura",name:"factura",autoComplete:"factura",autoFocus:!0,value:e.factura||"",onChange:t}),(0,a.jsx)(s.default,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:v,children:"Buscar"})]})]})})})]})}},85800:function(e,t,o){"use strict";o.d(t,{AuthProvider:function(){return i},a:function(){return s}});var a=o(57437),r=o(2265),n=o(44785);let l=(0,r.createContext)({login:e=>{},logout:()=>{}}),i=e=>{let{children:t}=e,[o,i]=(0,r.useState)(null),[s,c]=(0,r.useState)({}),[u,d]=(0,r.useState)({}),[_,p]=(0,r.useState)({}),[h,f]=(0,r.useState)(!0),m=(0,r.useCallback)(function(e){n.Z.set("authTokens",JSON.stringify(e)),i(e)},[]),x=(0,r.useCallback)(function(){n.Z.remove("authTokens")},[]);(0,r.useEffect)(()=>{let e=localStorage.getItem("datos"),t=localStorage.getItem("clientTemp"),o=localStorage.getItem("pedidoTemp"),a=localStorage.getItem("caja");e&&i(JSON.parse(e)),t&&c(JSON.parse(t)),o&&d(JSON.parse(o)),a&&p(JSON.parse(a))},[]);let g=(0,r.useMemo)(()=>({auth:o,cliente:s,setCliente:c,pedido:u,setPedido:d,caja:_,setCaja:p,loading:h,login:m,logout:x}),[o,s,u,_,m,x]);return(0,a.jsx)(l.Provider,{value:g,children:t})},s=()=>(0,r.useContext)(l)},8620:function(e,t,o){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}o.d(t,{Z:function(){return a}})}},function(e){e.O(0,[9461,2505,4797,4129,6291,4275,3983,2561,6981,9105,6951,2971,7023,1744],function(){return e(e.s=63713)}),_N_E=e.O()}]);