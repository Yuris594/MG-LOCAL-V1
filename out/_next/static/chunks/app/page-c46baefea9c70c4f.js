(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{44887:function(e,t,n){Promise.resolve().then(n.bind(n,9960))},9960:function(e,t,n){"use strict";n.r(t),n.d(t,{Copyright:function(){return b},default:function(){return N}});var r=n(57437),a=n(83719),o=n(31193),s=n(13100),i=n(71733),l=n(79806),u=n(60091),c=n(15656),d=n(48801),x=n(20124),f=n(23983),h=n(25774),m=n(24563),g=n(11810),p=n(19490),j=n(16463),v=n(27270),S=n(2265),y=n(66648),C=n(87138),w=n(85800);let Z=S.forwardRef(function(e,t){return(0,r.jsx)(v.Z,{elevation:6,ref:t,variant:"filled",...e})});function b(e){return(0,r.jsxs)(a.default,{variant:"body2",color:"text.secondary",align:"center",...e,children:["Departamento de Sistemas ",new Date().getFullYear(),"."]})}let E=async(e,t)=>{try{let n=await fetch("http://172.20.20.3:8001/usuarios/listar/".concat(e,"/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}}),r=await n.json();if(!n.ok||!r||(r.length,0))return{error:"Usuario o Clave incorrecta"};return r}catch(e){return console.error("Error en la petici\xf3n: ",e),{error:"Error en la conexi\xf3n"}}};function N(){let e=(0,j.useRouter)(),{login:t,auth:n}=(0,w.a)(),[v,N]=(0,S.useState)(),[I,O]=(0,S.useState)(""),[k,_]=(0,S.useState)(!1),[T,D]=(0,S.useState)(!1),[J,W]=(0,S.useState)(!1),[P,R]=(0,S.useState)(""),U=async n=>{n.preventDefault();let r=await E(P,I);r.error?(W(!0),D(!0),console.log("Error",r.error)):(localStorage.setItem("usuarios",JSON.stringify(r)),t(r),_(!0),N(!0),e.push("../start"))},z=e=>{"clicaway"!==e&&_(!1)};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(o.default,{sx:{height:180},children:[(0,r.jsx)(s.Z,{direction:"down",in:!0,mountOnEnter:!0,unmountOnExit:!0,children:(0,r.jsx)(i.Z,{position:"static",sx:{bgcolor:"#262626",height:"80px"},children:(0,r.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,r.jsx)(a.default,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1,marginLeft:"10px"},children:" "}),(0,r.jsx)(u.default,{component:C.default,href:"/components/ingresos",sx:{color:"white"},title:"Control de entredas y salidas de los empleados",children:(0,r.jsx)(m.Z,{sx:{fontSize:40}})})]})})}),(0,r.jsx)(o.default,{sx:{zoom:1.2},children:(0,r.jsx)(c.Z,{in:!0,children:(0,r.jsxs)(d.default,{className:"login",component:"main",maxWidth:"xs",children:[(0,r.jsx)(x.default,{}),(0,r.jsxs)(o.default,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center",height:"auto"},children:[(0,r.jsx)(a.default,{variant:"h6",noWrap:!0,component:"div",sx:{margin:2},children:(0,r.jsx)(y.default,{className:"logo",src:"/logo_miguelgomez.png",width:"230",height:"230",alt:"Logo",priority:!0})}),"saved"==v?(0,r.jsx)(p.Z,{sx:{color:"green"}}):"","error"==v?(0,r.jsx)(g.Z,{sx:{color:"red"}}):"",(0,r.jsxs)(o.default,{component:"form",noValidate:!0,onSubmit:U,sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsx)(f.Z,{error:J,id:"usuario",label:"Usuario",margin:"normal",fullWidth:!0,name:"PER_Usuario",value:P,onChange:e=>R(e.target.value)}),(0,r.jsx)(f.Z,{error:J,margin:"normal",required:!0,fullWidth:!0,type:"password",name:"PER_Clave",id:"contrase\xf1a",label:"Contrase\xf1a",value:I,onChange:e=>O(e.target.value)}),(0,r.jsx)(u.default,{type:"submit",variant:"contained",color:"success",sx:{marginTop:2,display:"flex",justifyContent:"center",alignItems:"center",minWidth:398},children:"Iniciar sesi\xf3n"})]}),k?(0,r.jsx)(h.Z,{open:k,autoHideDuration:6e3,onClose:z,children:(0,r.jsx)(Z,{onClose:z,variant:"outlined",severity:"success",sx:{width:"100%"},children:"Usuario identificado."})}):"",T?(0,r.jsx)(h.Z,{open:T,autoHideDuration:6e3,onClose:z,children:(0,r.jsx)(Z,{onClose:z,variant:"outlined",severity:"error",sx:{width:"100%"},children:"El usuario o la contrase\xf1a son incorrectos."})}):""]}),(0,r.jsx)(b,{sx:{mt:5,mb:5}})]})})})]})})}},85800:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return i},a:function(){return l}});var r=n(57437),a=n(2265),o=n(44785);let s=(0,a.createContext)({login:e=>{},logout:()=>{}}),i=e=>{let{children:t}=e,[n,i]=(0,a.useState)(null),[l,u]=(0,a.useState)({}),[c,d]=(0,a.useState)({}),[x,f]=(0,a.useState)({}),[h,m]=(0,a.useState)(!0),g=(0,a.useCallback)(function(e){o.Z.set("authTokens",JSON.stringify(e)),i(e)},[]),p=(0,a.useCallback)(function(){o.Z.remove("authTokens")},[]);(0,a.useEffect)(()=>{let e=localStorage.getItem("datos"),t=localStorage.getItem("clientTemp"),n=localStorage.getItem("pedidoTemp"),r=localStorage.getItem("caja");e&&i(JSON.parse(e)),t&&u(JSON.parse(t)),n&&d(JSON.parse(n)),r&&f(JSON.parse(r))},[]);let j=(0,a.useMemo)(()=>({auth:n,cliente:l,setCliente:u,pedido:c,setPedido:d,caja:x,setCaja:f,loading:h,login:g,logout:p}),[n,l,c,x,g,p]);return(0,r.jsx)(s.Provider,{value:j,children:t})},l=()=>(0,a.useContext)(s)}},function(e){e.O(0,[4797,4129,6291,4275,3983,2561,7734,6648,712,1842,2971,7023,1744],function(){return e(e.s=44887)}),_N_E=e.O()}]);