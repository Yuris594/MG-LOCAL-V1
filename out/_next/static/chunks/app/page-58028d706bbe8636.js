(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{61774:(e,t,a)=>{Promise.resolve().then(a.bind(a,39319))},39319:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Copyright:()=>C,default:()=>b});var r=a(95155),o=a(9561),n=a(75436),s=a(11451),l=a(46805),i=a(2295),u=a(78562),c=a(70152),d=a(80906),h=a(39244),x=a(70689),m=a(35761),g=a(76046),p=a(10897),f=a(8889),j=a(12115),S=a(48173),v=a.n(S);let w=j.forwardRef(function(e,t){return(0,r.jsx)(p.A,{elevation:6,ref:t,variant:"filled",...e})});function C(e){return(0,r.jsxs)(o.default,{variant:"body2",color:"text.secondary",align:"center",...e,children:["Departamento de Sistemas \xa9 Version 0.2 - ",new Date().getFullYear(),"."]})}let y=async(e,t)=>{let a=await fetch(f.c.url+"/usuarios/listar/".concat(e,"/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});return a.ok?a.json():404===a.status?{error:{detail:"Credenciales incorrectas"}}:{error:{detail:"Error desconocido"}}},b=function(){(0,m.default)();let e=(0,g.useRouter)(),{login:t,auth:a}=(0,x.A)(),[p,f]=(0,j.useState)(""),[S,b]=(0,j.useState)(!1),[A,k]=(0,j.useState)(!1),[I,N]=(0,j.useState)(!1),[E,O]=(0,j.useState)(""),_=async a=>{if(a.preventDefault(),!E||!p){N(!0),k(!0);return}try{let a=await y(E,p);a.error?(N(!0),k(!0)):(t(a),e.push("./start"),b(!0))}catch(e){N(!0),k(!0),console.log("Error en la pagina Iniciar Sesi\xf3n",e)}},D=e=>{"clicaway"!==e&&(b(!1),k(!1))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.default,{sx:{flexGrow:1},children:(0,r.jsx)(s.A,{position:"static",sx:{bgcolor:"#262626",height:"70px"},children:(0,r.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,r.jsx)(o.default,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1}}),(0,r.jsx)(i.default,{component:v(),href:"./components/ingresos",sx:{color:"white"},title:"Control de entredas y salidas de los empleados",children:(0,r.jsx)(h.A,{sx:{fontSize:40}})})]})})}),(0,r.jsx)(n.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",mt:5},children:(0,r.jsxs)(u.A,{component:"main",elevation:3,sx:{width:"380px",padding:"20px",borderRadius:"15px",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"white",boxShadow:3},children:[(0,r.jsx)(n.default,{sx:{textAlign:"center",marginBottom:"20px",width:{xs:"250px",sm:"280px",md:"320px"},height:"auto"},children:(0,r.jsx)("img",{src:"/logo_miguelgomez.png",alt:"LOGO",style:{width:"100%",height:"auto",objectFit:"contain"}})}),(0,r.jsxs)(n.default,{component:"form",onSubmit:_,noValidate:!0,sx:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[(0,r.jsx)(c.A,{error:I,id:"usuario",label:"Usuario",margin:"normal",fullWidth:!0,name:"PER_Usuario",value:E,onChange:e=>O(e.target.value)}),(0,r.jsx)(c.A,{error:I,margin:"normal",required:!0,fullWidth:!0,type:"password",name:"PER_Clave",id:"contrase\xf1a",label:"Contrase\xf1a",value:p,onChange:e=>f(e.target.value)}),(0,r.jsx)(i.default,{type:"submit",fullWidth:!0,sx:{mt:2,backgroundColor:"#11eb6c",color:"white","$:hover":{backgroundColor:"#35eb11"}},children:"Iniciar sesi\xf3n"})]}),(0,r.jsx)(C,{sx:{mt:3,mb:1}})]})}),S?(0,r.jsx)(d.A,{open:S,autoHideDuration:6e3,onClose:D,children:(0,r.jsx)(w,{onClose:D,variant:"outlined",severity:"success",sx:{width:"100%"},children:"\xa1Hola, ".concat(a.PER_Nom,"! Tu sesi\xf3n ha comenzado.")})}):"",A?(0,r.jsx)(d.A,{open:A,autoHideDuration:6e3,onClose:D,children:(0,r.jsx)(w,{onClose:D,variant:"outlined",severity:"error",sx:{width:"100%"},children:"No se pudo iniciar sesi\xf3n. Verifica tus credenciales."})}):""]})}},8889:(e,t,a)=>{"use strict";a.d(t,{c:()=>r});let r={url:"http://172.20.20.3:8001"}},70689:(e,t,a)=>{"use strict";a.d(t,{A:()=>u,AuthProvider:()=>i});var r=a(95155),o=a(12115),n=a(76046),s=a(89208);let l=(0,o.createContext)({login:e=>{},logout:()=>{}}),i=e=>{let{children:t}=e,a=(0,n.useRouter)(),[i]=(0,o.useState)(!0),[u,c]=(0,o.useState)(null),[d,h]=(0,o.useState)({}),[x,m]=(0,o.useState)({}),[g,p]=(0,o.useState)({}),f=(0,o.useCallback)(function(e){s.A.set("authTokens",JSON.stringify(e)),localStorage.setItem("auth",JSON.stringify(e)),c(e)},[]),j=(0,o.useCallback)(function(){a.push("/"),s.A.remove("authTokens"),localStorage.removeItem("auth"),c(null)},[]);(0,o.useEffect)(()=>{let e=localStorage.getItem("auth")||s.A.get("authTokens"),t=localStorage.getItem("pedido"),a=localStorage.getItem("caja"),r=localStorage.getItem("cliente");r&&h(JSON.parse(r)),t&&m(JSON.parse(t)),a&&p(JSON.parse(a)),e&&c(JSON.parse(e))},[]);let S=(0,o.useMemo)(()=>({auth:u,cliente:d,setCliente:h,pedido:x,setPedido:m,caja:g,setCaja:p,loading:i,login:f,logout:j}),[u,d,x,g,f,j]);return(0,r.jsx)(l.Provider,{value:S,children:t})},u=()=>(0,o.useContext)(l)}},e=>{var t=t=>e(e.s=t);e.O(0,[6058,5854,994,5975,1260,6403,152,8173,3882,1722,8441,1517,7358],()=>t(61774)),_N_E=e.O()}]);