"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1223],{11810:function(e,t,a){var i=a(23963);t.Z=void 0;var l=i(a(19118)),n=a(57437);t.Z=(0,l.default)((0,n.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"HighlightOff")},48801:function(e,t,a){var i=a(55357),l=a(12272),n=a(48024),o=a(69281);let r=(0,i.Z)({createStyledComponent:(0,n.default)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,t["maxWidth".concat((0,l.Z)(String(a.maxWidth)))],a.fixed&&t.fixed,a.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,o.default)({props:e,name:"MuiContainer"})});t.default=r},13726:function(e,t,a){a.d(t,{Z:function(){return k}});var i=a(57437),l=a(33579),n=a.n(l),o=a(20124),r=a(31193),s=a(71733),d=a(79806),u=a(60335),c=a(60091),h=a(83719),x=a(62501),m=a(6291),f=a(11656),p=a(66325),j=a(90922),E=a(26032),P=a(55693),C=a(42188),g=a(66299),v=a(40301),b=a(78457),O=a(21704),D=a(66246),S=a(16463),Z=a(85800),R=a(2265),N=a(32184),I=a(7547),y=a(57300),w=a(86917),U=a(47905),T=a(87138),_=e=>{let{page:t}=e;return(0,i.jsx)(r.default,{children:(0,i.jsx)(N.Z,{children:t.map(e=>(0,i.jsx)(I.ZP,{disablePadding:!0,children:(0,i.jsxs)(y.Z,{LinkComponent:T.default,href:e.url,onClick:e.onClick,children:[(0,i.jsx)(w.Z,{children:e.icon}),(0,i.jsx)(U.Z,{primaryTypographyProps:{fontSize:15,fontWeight:"medium",letterSpacing:0},children:e.title})]})},e.title))})})};let V={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",alignItems:"center",justifyContext:"center",boxShadow:24,textAlign:"center",pt:2,px:4,pb:3};var k=()=>{let e=(0,S.useRouter)(),{auth:t,logout:a}=(0,Z.a)(),[l,N]=(0,R.useState)(!1),[I,y]=(0,R.useState)(null),[w,U]=(0,R.useState)(!1),k=()=>{U(!1),y(null)},A=[{title:"USUARIOS ",url:"../start/usuarios",icon:(0,i.jsx)(p.Z,{})},{title:"PEDIDOS",url:"/start/pedidos",icon:(0,i.jsx)(j.Z,{})},{title:"CLIENTES",url:"/start/clients",icon:(0,i.jsx)(E.Z,{})},{title:"PRODUCTOS",icon:(0,i.jsx)(P.Z,{}),onClick:e=>{U(!0),y(e.currentTarget)}},{title:"FACTURAS",url:"/start/facturas",icon:(0,i.jsx)(C.Z,{})},{title:"CAJA",url:"/start/pedidos/pedidosCaja",icon:(0,i.jsx)(g.Z,{})}];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.default,{}),(0,i.jsxs)(r.default,{sx:{flexGrow:1},children:[(0,i.jsx)(s.Z,{position:"static",sx:{bgcolor:"#262626",width:"auto"},children:(0,i.jsxs)(d.Z,{children:[(0,i.jsx)(u.Z,{color:"inherit",onClick:e=>{y(e.currentTarget)},sx:{display:{xs:"flex",md:"none"}},children:(0,i.jsx)(v.Z,{fontSize:"large"})}),(0,i.jsx)(r.default,{sx:{display:{xs:"none",md:"flex"}},children:A.map(e=>(0,i.jsx)(c.default,{sx:{fontSize:"15px"},color:"inherit",size:"large",LinkComponent:T.default,href:e.url,onClick:e.onClick,children:e.title},e.title))}),(0,i.jsx)(h.default,{variant:"h6",sx:{flexGrow:1}}),(0,i.jsx)(c.default,{component:T.default,href:"/start",color:"inherit",children:(0,i.jsx)(D.Z,{fontSize:"large"})}),(0,i.jsxs)(c.default,{className:n().className,color:"inherit",sx:{fontSize:"15px"},children:[(0,i.jsx)(O.Z,{fontSize:"large"}),t&&t.PER_Nom]}),(0,i.jsx)(c.default,{color:"inherit",onClick:()=>N(!0),children:(0,i.jsx)(b.Z,{fontSize:"large"})})]})}),(0,i.jsx)(x.Z,{open:l,onClose:()=>N(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,i.jsxs)(r.default,{sx:V,children:[(0,i.jsx)(h.default,{id:"modal-modal-title",variant:"h6",component:"h2",children:"\xbfEstas seguro que quiere salir?"}),(0,i.jsx)(r.default,{children:(0,i.jsx)(c.default,{sx:{bgcolor:"red"},variant:"contained",onClick:()=>{a(),e.push("/")},children:"SALIR"})})]})}),(0,i.jsxs)(m.Z,{id:"basic-menu",anchorEl:I,open:w,onClose:k,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,i.jsx)(f.Z,{onClick:k,component:T.default,href:"/start/productos",children:"Productos Por Bodega"}),(0,i.jsx)(f.Z,{onClick:k,component:T.default,href:"/start/productosMG",children:"Productos-MG"})]}),(0,i.jsx)(m.Z,{id:"basic-menu",anchorEl:I,MenuListProps:{"aria-labelledby":"basic-button"},open:!!I,onClose:()=>{y(null)},sx:{display:{xs:"flex",md:"none"}},children:(0,i.jsx)(_,{page:A})})]})]})}},42716:function(e,t,a){a.d(t,{c:function(){return l}});var i=a(2265);let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,a]=(0,i.useState)(e);return{form:t,changed:e=>{let{name:i,value:l}=e.target;a({...t,[i]:l})},setForm:a}}},3378:function(e,t,a){a.r(t);var i=a(57437),l=a(48801),n=a(20124),o=a(31193),r=a(83719),s=a(58433),d=a(23983),u=a(60091),c=a(25774),h=a(27270),x=a(42716),m=a(2265);let f=async e=>(await fetch("/api/usuarios/actualizar/",{method:"POST",body:JSON.stringify({form:e}),headers:{"Content-Type":"application/json"}})).json();t.default=e=>{let{usuario:t}=e,[a,p]=(0,m.useState)(!1),[j,E]=(0,m.useState)(!1),{form:P,setForm:C,changed:g}=(0,x.c)();(0,m.useEffect)(()=>{t&&t.length>0&&C({IdPer:t[0].IdPer,PER_Nom:t[0].PER_Nom||"",PER_Usuario:t[0].PER_Usuario||"",PER_Clave:t[0].PER_Clave||"",IdDiv:t[0].IdDiv||"",PERAUTOPED:t[0].PERAUTOPED||"",CODVEND:t[0].CODVEND||"",PREFIJO:t[0].PREFIJO||"",CONSECUTIVOPED:t[0].CONSECUTIVOPED||""})},[t]);let v=async e=>{e.preventDefault();try{(await f(P)).ok?(p(!0),setTimeout(()=>{window.location.reload()},2e3)):(console.log("Error",response.statusText),E(!0))}catch(e){console.error("Error al enviar la solicitud:",e),E(!0)}},b=e=>{"clickaway"!==e&&(p(!1),E(!1))};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(l.default,{component:"main",maxWidth:"xs",children:[(0,i.jsx)(n.default,{}),(0,i.jsxs)(o.default,{sx:{display:"flex",flexDirection:"column",alignItems:"center",padding:2},children:[(0,i.jsx)(r.default,{component:"h1",variant:"h5",children:"Actualizacion de usuario"}),(0,i.jsx)(o.default,{component:"form",onSubmit:v,noValidate:!0,sx:{mt:3},children:(0,i.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,i.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsx)(d.Z,{required:!0,fullWidth:!0,id:"PER_Nom",label:"PER_Nom",name:"PER_Nom",autoFocus:!0,value:P.PER_Nom||"",onChange:g})}),(0,i.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsx)(d.Z,{required:!0,fullWidth:!0,id:"PER_Usuario",label:"PER_Usuario",name:"PER_Usuario",value:P.PER_Usuario||"",onChange:g})}),(0,i.jsx)(s.ZP,{item:!0,xs:12,children:(0,i.jsx)(d.Z,{required:!0,fullWidth:!0,id:"PER_Clave",label:"PER_Clave",type:"password",name:"PER_Clave",value:P.PER_Clave||"",onChange:g})}),(0,i.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsx)(d.Z,{required:!0,fullWidth:!0,name:"IdDiv",label:"IdDiv",type:"number",id:"IdDiv",value:P.IdDiv||"",onChange:g})}),(0,i.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsx)(d.Z,{required:!0,fullWidth:!0,id:"PERAUTOPED",label:"PERAUTOPED",type:"number",name:"PERAUTOPED",value:P.PERAUTOPED||"",onChange:g})}),(0,i.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,i.jsx)(d.Z,{fullWidth:!0,id:"CODVEND",label:"CODVEND",name:"CODVEND",value:P.CODVEND||"",onChange:g})}),(0,i.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,i.jsx)(d.Z,{fullWidth:!0,id:"PREFIJO",label:"PREFIJO",name:"PREFIJO",value:P.PREFIJO||"",onChange:g})}),(0,i.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,i.jsx)(d.Z,{fullWidth:!0,id:"CONSECUTIVOPED",label:"CONSECUTIVOPED",type:"number",name:"CONSECUTIVOPED",value:P.CONSECUTIVOPED||"",onChange:g})}),(0,i.jsx)(u.default,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Actualizar"})]})}),a&&(0,i.jsx)(c.Z,{open:a,autoHideDuration:2e3,onClose:b,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,i.jsx)(h.Z,{onClose:b,severity:"success",sx:{width:"100%"},children:"Actualizacion Exitosa"})}),j&&(0,i.jsx)(c.Z,{open:j,autoHideDuration:2e3,onClose:b,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,i.jsx)(h.Z,{onClose:b,severity:"error",sx:{width:"100%"},children:"Actualizacion Denegada"})})]})]})})}},41223:function(e,t,a){a.r(t),a.d(t,{conexion:function(){return D}});var i=a(57437),l=a(31193),n=a(15656),o=a(62501),r=a(83719),s=a(60091),d=a(28027),u=a(74275),c=a(60335),h=a(11810),x=a(2265),m=a(77699),f=a(13726),p=a(68265),j=a(22294),E=a(46182),P=a(3378),C=a(64379),g=a.n(C),v=a(85800),b=a(16463);let O={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"auto",height:"auto",bgcolor:"background.paper",boxShadow:24};function D(){g().fire({title:"No existe conexion",text:"Verifique la conexion con la empresa o no tiene internet",icon:"warning",button:"Aceptar"})}let S=[{field:"PER_Nom",headerName:"Nombre",width:200,editable:!0},{field:"PER_Usuario",headerName:"Usuario",width:150,editable:!0},{field:"PER_Clave",headerName:"Contrase\xf1a",width:150,editable:!0},{field:"IdDiv",headerName:"ID Divisi\xf3n",type:"number",width:120,editable:!0},{field:"PERAUTOPED",headerName:"Auto Pedidos",type:"number",width:130,editable:!0},{field:"CODVEND",headerName:"C\xf3digo Vendedor",width:150,editable:!0},{field:"PREFIJO",headerName:"Prefijo",width:120,editable:!0},{field:"CONSECUTIVOPED",headerName:"Consecutivo Pedidos",type:"number",width:180,editable:!0}];t.default=function(e){let{usuarios:t}=e,{auth:a}=(0,v.a)();(0,b.useRouter)();let[C,g]=(0,x.useState)(!0),[D,Z]=(0,x.useState)(!1),[R,N]=(0,x.useState)(),[I,y]=(0,x.useState)(!1),[w,U]=(0,x.useState)([]),[T,_]=(0,x.useState)(!1),[V,k]=(0,x.useState)([]),[A,W]=(0,x.useState)(t),J=async()=>{try{let e=await fetch("http://172.20.20.3:8001/usuarios/listar",{method:"GET",headers:{"Content-Type":"application/json"}});return{props:{usuarios:(await e.json()).map(e=>({IdPer:e.IdPer,PER_Nom:e.PER_Nom,PER_Usuario:e.PER_Usuario,PER_Clave:e.PER_Clave,IdDiv:e.IdDiv,PERAUTOPED:e.PERAUTOPED,CODVEND:e.CODVEND,PREFIJO:e.PREFIJO,CONSECUTIVOPED:e.CONSECUTIVOPED}))},revalidate:60}}catch(e){return console.error("Error al obtener usuarios:",e),{props:{usuarios:[]}}}};(0,x.useEffect)(()=>{J(),_()},[]);let F=e=>{N(A.filter(t=>Object.values(t).map(e=>e?e.toString().toLowerCase():"").some(t=>t.includes(e))))},z=(0,x.useCallback)(e=>{k(e),e.length>0&&(N(A.filter(t=>{let a=t.IdPer;return!!a&&a.toString().includes(e[0])})),y(!0))},[t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.default,{children:[" "," ",(0,i.jsx)(f.Z,{})," "," "]}),(0,i.jsx)(l.default,{className:"container",children:(0,i.jsx)(n.Z,{in:T,children:(0,i.jsxs)(l.default,{style:{height:"auto",width:"100%"},children:[(0,i.jsx)(o.Z,{open:D,onClose:()=>Z(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,i.jsx)(l.default,{sx:O,children:(0,i.jsx)(E.default,{})})}),(0,i.jsx)(o.Z,{open:I,onClose:()=>{N([]),y(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,i.jsx)(l.default,{sx:O,children:(0,i.jsx)(P.default,{usuario:R})})}),(0,i.jsx)(r.default,{variant:"h5",sx:{display:"flex",justifyContent:"column",alignItems:"center",width:"auto",color:"#000000",margin:0},children:"USUARIOS"}),(0,i.jsxs)(l.default,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"auto",margin:1},children:[(0,i.jsx)(s.default,{variant:"outlined",onClick:()=>Z(!0),sx:{margin:"10px"},color:"primary",children:"Nuevo Usuario"}),(0,i.jsxs)(d.Z,{elevation:3,sx:{p:"2px 4px",display:"flex",alignItems:"flex-rigth",width:1100,margin:"10px"},children:[(0,i.jsx)(u.ZP,{sx:{ml:1,flex:1},placeholder:"Buscar...",inputProps:{"aria-label":"search google maps"},autoFocus:!0,value:w,onChange:e=>{e.preventDefault(),U(e.target.value),F(e.target.value)}}),0==w.length?(0,i.jsx)(c.Z,{title:"buscar",sx:{p:"10px"},"aria-label":"search",children:(0,i.jsx)(m.Z,{})}):(0,i.jsx)(c.Z,{title:"buscar",sx:{p:"10px"},"aria-label":"buscar",onClick:()=>{U(),W(t)},children:(0,i.jsx)(h.Z,{})})]})]}),(0,i.jsx)(l.default,{sx:{height:950,width:"100%"},children:(0,i.jsx)(p._,{rows:t,columns:S,initialState:{pagination:{paginationModel:{page:0,pageSize:16}}},pageSizeOptions:[5,16],onRowSelectionModelChange:z,rowSelectionModel:V,getRowId:e=>e.IdPer,slots:{toolbar:j.n},sx:{"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"bold"}}})})]})})})]})}},46182:function(e,t,a){a.r(t);var i=a(57437),l=a(48801),n=a(20124),o=a(25774),r=a(27270),s=a(31193),d=a(83719),u=a(58433),c=a(23983),h=a(60091),x=a(2265);let m=async e=>(await fetch("/api/usuarios/nuevo",{method:"POST",body:JSON.stringify({form:e}),headers:{"Content-Type":"application/json"}})).json();t.default=()=>{let[e,t]=(0,x.useState)({}),[a,f]=(0,x.useState)(!1),[p,j]=(0,x.useState)(!1),E=a=>{t({...e,[a.target.name]:a.target.value})},P=async t=>{if(t.preventDefault(),!e.PER_Nom||!e.IdDiv){j(!0);return}let a=await m(e);a.ok?(f(!0),console.log("Salida exitosa"),window.location.reload()):(j(!0),console.error("Error al enviar la solicitud: ",a.statusText))},C=e=>{"clickaway"!==e&&(f(!1),j(!1))};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(l.default,{component:"main",maxWidth:"xs",children:[(0,i.jsx)(n.default,{}),a?(0,i.jsx)(o.Z,{open:a,autoHideDuration:2e3,onClose:C,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,i.jsx)(r.Z,{onClose:C,severity:"success",sx:{width:"100%"},children:"Registro Exitoso"})}):"",p?(0,i.jsx)(o.Z,{open:p,autoHideDuration:2e3,onClose:C,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,i.jsx)(r.Z,{onClose:C,severity:"error",sx:{width:"100%"},children:"Registro denegado"})}):"",(0,i.jsxs)(s.default,{sx:{display:"flex",flexDirection:"column",alignItems:"center",padding:2},children:[(0,i.jsx)(d.default,{component:"h1",variant:"h5",children:"Registro de usuario"}),(0,i.jsxs)(s.default,{component:"form",noValidate:!0,onSubmit:P,sx:{mt:3},children:[(0,i.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,i.jsx)(u.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsx)(c.Z,{autoComplete:"given-name",name:"PER_Nom",required:!0,fullWidth:!0,id:"PER_Nom",label:"Nombre",autoFocus:!0,value:e.PER_Nom||"",onChange:E})}),(0,i.jsx)(u.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsx)(c.Z,{required:!0,fullWidth:!0,id:"Usuario",label:"Usuario",name:"PER_Usuario",autoComplete:"family-name",value:e.PER_Usuario||"",onChange:E})}),(0,i.jsx)(u.ZP,{item:!0,xs:12,children:(0,i.jsx)(c.Z,{required:!0,fullWidth:!0,id:"Clave",label:"Clave",type:"password",name:"PER_Clave",autoComplete:"email",value:e.PER_Clave||"",onChange:E})}),(0,i.jsx)(u.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsx)(c.Z,{required:!0,fullWidth:!0,name:"IdDiv",label:"IdDiv",type:"number",id:"IdDiv",autoComplete:"new-password",value:e.IdDiv||"",onChange:E})}),(0,i.jsx)(u.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsx)(c.Z,{fullWidth:!0,id:"PERAUTOPED",label:"PERAUTOPED",type:"number",name:"PERAUTOPED",autoComplete:"email",value:e.PERAUTOPED||"",onChange:E})}),(0,i.jsx)(u.ZP,{item:!0,xs:12,sm:4,children:(0,i.jsx)(c.Z,{fullWidth:!0,id:"CODVEND",label:"CODVEND",name:"CODVEND",autoComplete:"email",value:e.CODVEND||"",onChange:E})}),(0,i.jsx)(u.ZP,{item:!0,xs:12,sm:4,children:(0,i.jsx)(c.Z,{fullWidth:!0,id:"PREFIJO",label:"PREFIJO",name:"PREFIJO",autoComplete:"email",value:e.PREFIJO||"",onChange:E})}),(0,i.jsx)(u.ZP,{item:!0,xs:12,sm:4,children:(0,i.jsx)(c.Z,{fullWidth:!0,id:"CONSECUTIVOPED",label:"CONSECUTIVOPED",type:"number",name:"CONSECUTIVOPED",autoComplete:"email",value:e.CONSECUTIVOPED||"",onChange:E})})]}),(0,i.jsx)(h.default,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"registrar"})]})]})]})})}},85800:function(e,t,a){a.d(t,{AuthProvider:function(){return r},a:function(){return s}});var i=a(57437),l=a(2265),n=a(44785);let o=(0,l.createContext)({login:e=>{},logout:()=>{}}),r=e=>{let{children:t}=e,[a,r]=(0,l.useState)(null),[s,d]=(0,l.useState)({}),[u,c]=(0,l.useState)({}),[h,x]=(0,l.useState)({}),[m]=(0,l.useState)(!0),f=(0,l.useCallback)(function(e){n.Z.set("authTokens",JSON.stringify(e)),localStorage.setItem("auth",JSON.stringify(e)),r(e)},[]),p=(0,l.useCallback)(function(){n.Z.remove("authTokens"),localStorage.removeItem("auth"),r(null)},[]);(0,l.useEffect)(()=>{let e=localStorage.getItem("auth"),t=localStorage.getItem("cliente"),a=localStorage.getItem("pedido"),i=localStorage.getItem("caja");e&&r(JSON.parse(e)),t&&d(JSON.parse(t)),a&&c(JSON.parse(a)),i&&x(JSON.parse(i))},[]);let j=(0,l.useMemo)(()=>({auth:a,cliente:s,setCliente:d,pedido:u,setPedido:c,caja:h,setCaja:x,loading:m,login:f,logout:p}),[a,s,u,h,f,p]);return(0,i.jsx)(o.Provider,{value:j,children:t})},s=()=>(0,l.useContext)(o)}}]);