(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4733],{28997:function(e,t,a){Promise.resolve().then(a.bind(a,51020))},51020:function(e,t,a){"use strict";a.r(t);var n=a(57437),l=a(31193),r=a(28027),o=a(83719),i=a(23983),s=a(60091),c=a(13726),u=a(2265),_=a(97501);a(27824);var d=a(76235),f=a(64379),x=a.n(f),h=a(15408),p=a(42716);a(85935);let m=()=>{x().fire({title:"Factura no existe!",icon:"error",button:"Aceptar"})};t.default=()=>{let{form:e,changed:t}=(0,p.c)({}),[a,f]=(0,u.useState)(null),[x,C]=(0,u.useState)([]),[T]=(0,u.useState)((0,d.WU)(new Date,"dd/MM/yyyy HH:mm:ss")),[I,E]=(0,u.useState)({}),O=async t=>{t.preventDefault();let a=e.factura;try{let{datos:e}=await (0,h.Z)("/api/clientes/factura_lineas/"+a,"GET");if(e){f(e[0]);let t=["ARTICULO","CANTIDAD","DESCRIPCION","PORCIVA","PORDESC","PRECIO_UNITARIO","PRECIO_TOTAL","TOTAL_IMPUESTO1","DESC_TOT_LINEA","TOTAL_MERCADERIA"],a=e.map(e=>{let a=Object.fromEntries(Object.entries(e).filter(e=>{let[a]=e;return t.includes(a)}));return"PRECIO_TOTAL"in a&&(a.PRECIO_TOTAL=Math.floor(a.PRECIO_TOTAL)),a});C(a)}else m()}catch(e){console.error("Error al realizar la peticion;",e),m()}};(0,u.useEffect)(()=>{a&&x&&(S(),f(),C([]))},[a,x]);let S=()=>{let e=x.reduce((e,t)=>e+t.PRECIO_TOTAL,0),t=x.reduce((e,t)=>e+t.DESC_TOT_LINEA,0),n=x.reduce((e,t)=>e+t.TOTAL_IMPUESTO1,0),l={sumatotal:parseInt(e),descuento:parseInt(t),impuesto:parseInt(n),totalConImpuesto:parseInt(e-t+n)};E(l),console.log(l);let r=new _.default("portrait","pt","letter"),o=[{field:"ARTICULO",headerName:"Ref.",width:200},{field:"CANTIDAD",headerName:"CANT",width:200,align:"right"},{field:"CPed",headerName:"UND",width:200,type:"number",align:"right"},{field:"DESCRIPCION",headerName:"DESCRIPCI\xd3N",width:1e3},{field:"PORCIVA",headerName:"IVA",width:200,align:"right"},{field:"PORDESC",headerName:"DTO",width:200,align:"right"},{field:"PRECIO_UNITARIO",headerName:"VALOR UNI",width:200,valueFormatter:e=>{let t=Number(e.value).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"PRECIO_TOTAL",headerName:"TOTAL",width:250,type:"number",valueFormatter:e=>{let t=Number(e.value).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"}],i=x.map(e=>{let t=[];return o.forEach(a=>{t.push(e[a.field])}),t});r.setFontSize(11),r.text("Nuestra direcci\xf3n y lineas de atenci\xf3n han cambiado:(4) 604 3380 - 3203509705",100,17),r.setFontSize(13),r.text("_________________________________________________________________________________",12,20),r.setFontSize(13),r.setFontSize(15),r.text("REMISI\xd3N N\xb0:   ".concat(a.FACTURA),350,45),r.setFontSize(9),r.text(" ".concat(a.FECHA_DESPACHO),500,65),r.setFontSize(11),r.text("FECHA",460,65),r.text("NIT.830.900.137-1",50,65),r.setFontSize(13),r.text("_________________________________________________________________________________",12,70),r.setFontSize(9),r.text("CLIENTE:    ".concat(a.CLIENTE),12,85),r.text("NIT/CEDULA:    ".concat(a.CreatedBy),12,98),r.text("TEL:    ".concat(a.CreatedBy),200,98),r.text("VENDEDOR:    ".concat(a.CreatedBy),350,98),r.text("MUNICIPIO:    ".concat(a.CreatedBy,"-").concat(a.CreatedBy),12,112),r.text("PEDIDO:    ".concat(a.PEDIDO),340,112),r.text("CREADO:    ".concat(a.CreatedBy),450,112),r.text("DIRECCION:    ".concat(a.CreatedBy),12,125),r.text("NOTA:   ".concat(a.OBSERVACIONES),12,139),r.autoTable({head:[o.map(e=>e.headerName)],body:i,startY:150,theme:"plain",columnStyles:{cellWidth:"auto"},styles:{theme:"plain",tableWidth:"auto",lineColor:[200,200,200],lineWidth:.1,font:"helvetica",fontStyle:"normal",textColor:[0,0,0],dispaly:"flex",fontSize:8}}),r.setFontSize(10),r.text("TOTAL ITEMS:        ".concat(x.length),350,r.autoTable.previous.finalY+20),r.text("SubTotal:     ".concat(I.sumatotal),470,r.autoTable.previous.finalY+20),r.text("Desc:           ".concat(I.descuento),470,r.autoTable.previous.finalY+40),r.text("IVA:              ".concat(I.impuesto),470,r.autoTable.previous.finalY+60),r.text("TOTAL:        ".concat(I.totalConImpuesto),470,r.autoTable.previous.finalY+80),r.setFontSize(11),r.text("ACEPTO este documento y declaro haber recibido real y \n materialmente los articulos arriba descritos ",12,r.autoTable.previous.finalY+20),r.text("FECHA RECIBIDO_____________",280,r.autoTable.previous.finalY+72),r.text("FIRMA Y SELLO",12,r.autoTable.previous.finalY+90),r.text("HORA:____:____",280,r.autoTable.previous.finalY+86),r.text("".concat(T),12,r.autoTable.previous.finalY+106),r.rect(10,r.autoTable.previous.finalY+9,450,88),r.rect(463,r.autoTable.previous.finalY+9,120,88),r.output("dataurlnewwindow")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.default,{marginBottom:"50px",children:[" ",(0,n.jsx)(c.Z,{})," "]}),(0,n.jsx)(l.default,{className:"container",children:(0,n.jsx)(l.default,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"44vw"},children:(0,n.jsxs)(r.default,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center",bgcolor:"#eeee",padding:2},children:[(0,n.jsx)(o.default,{component:"h1",variant:"h5",children:"Digite n\xfamero de factura"}),(0,n.jsxs)(l.default,{component:"form",noValidate:!0,sx:{mt:1},children:[(0,n.jsx)(i.Z,{required:!0,fullWidth:!0,id:"factura",name:"factura",autoComplete:"factura",autoFocus:!0,value:e.factura||"",onChange:t}),(0,n.jsx)(s.default,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:O,children:"Buscar"})]})]})})})]})}},13726:function(e,t,a){"use strict";a.d(t,{Z:function(){return F}});var n=a(57437),l=a(20124),r=a(31193),o=a(71733),i=a(79806),s=a(60335),c=a(60091),u=a(83719),_=a(62501),d=a(6291),f=a(11656),x=a(85465),h=a(66325),p=a(90922),m=a(26032),C=a(55693),T=a(42188),I=a(66299),E=a(78457),O=a(21704),S=a(66246),g=a(9504),j=a(16463),b=a(39987),A=a(2265),N=a(32184),v=a(7547),y=a(57300),P=a(86917),R=a(47905),D=a(87138),L=e=>{let{page:t}=e;return(0,n.jsx)(r.default,{sx:{width:250},children:(0,n.jsx)("nav",{children:(0,n.jsx)(N.Z,{children:t.map(e=>(0,n.jsx)(v.ZP,{disablePadding:!0,children:(0,n.jsxs)(y.Z,{LinkComponent:D.default,href:e.url,onClick:e.onClick,children:[(0,n.jsx)(P.Z,{children:e.icon}),(0,n.jsx)(R.Z,{children:e.title})]})},e.title))})})})};let Z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",alignItems:"center",justifyContext:"center",boxShadow:24,pt:2,px:4,pb:3};var F=()=>{let e=(0,j.useRouter)(),{auth:t}=(0,b.Z)(),[a,N]=(0,A.useState)(!1),[v,y]=(0,A.useState)(null),[P,R]=(0,A.useState)(!1),[F,w]=(0,A.useState)(null),k=()=>{R(!1),y(null)},U=[{title:"USUARIOS ",url:"../../usuarios",icon:(0,n.jsx)(h.Z,{})},{title:"PEDIDOS",url:"../../pedidos",icon:(0,n.jsx)(p.Z,{})},{title:"CLIENTES",url:"../../clients",icon:(0,n.jsx)(m.Z,{})},{title:"PRODUCTOS",icon:(0,n.jsx)(C.Z,{}),onClick:e=>{R(!0),y(e.currentTarget)}},{title:"FACTURAS",url:"../../facturas",icon:(0,n.jsx)(T.Z,{})},{title:"CAJA",url:"../../pedidos/pedidosCaja",icon:(0,n.jsx)(I.Z,{})}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.default,{}),(0,n.jsxs)(r.default,{sx:{flexGrow:1},children:[(0,n.jsx)(o.Z,{position:"static",sx:{bgcolor:"#262626",width:"auto"},children:(0,n.jsxs)(i.Z,{children:[(0,n.jsx)(s.default,{color:"inherit",size:"large",onClick:e=>{w(e.currentTarget)},sx:{display:{xs:"flex",md:"none"}},children:(0,n.jsx)(g.default,{})}),(0,n.jsx)(r.default,{sx:{display:{xs:"none",md:"flex"}},children:U.map(e=>(0,n.jsx)(c.default,{color:"inherit",LinkComponent:D.default,href:e.url,onClick:e.onClick,children:e.title},e.title))}),(0,n.jsx)(u.default,{variant:"h6",sx:{flexGrow:1}}),(0,n.jsx)(c.default,{component:D.default,href:"/start",color:"inherit",children:(0,n.jsx)(S.Z,{})}),(0,n.jsxs)(c.default,{color:"inherit",children:[(0,n.jsx)(O.Z,{}),t.PER_Nom]}),(0,n.jsx)(c.default,{color:"inherit",onClick:()=>N(!0),children:(0,n.jsx)(E.Z,{})})]})}),(0,n.jsx)(_.Z,{open:a,onClose:()=>N(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,n.jsxs)(r.default,{sx:Z,children:[(0,n.jsx)(u.default,{id:"modal-modal-title",variant:"h6",component:"h2",children:"\xbfEstas seguro que quiere salir?"}),(0,n.jsx)(r.default,{children:(0,n.jsx)(c.default,{sx:{bgcolor:"red"},variant:"contained",onClick:()=>{e.push("/")},children:"SALIR"})})]})}),(0,n.jsxs)(d.Z,{id:"basic-menu",anchorEl:v,open:P,onClose:k,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,n.jsx)(f.Z,{onClick:k,component:D.default,href:"../../productos",children:"Productos Por Bodega"}),(0,n.jsx)(f.Z,{onClick:k,component:D.default,href:"../../productosMG",children:"Productos-MG"})]}),(0,n.jsx)(x.ZP,{open:!!F,onClose:()=>{w(null)},sx:{display:{xs:"flex",md:"none"}},children:(0,n.jsx)(L,{page:U})})]})]})}},39987:function(e,t,a){"use strict";a.d(t,{a:function(){return r}});var n=a(85800),l=a(2265);let r=()=>(0,l.useContext)(n.default);t.Z=r},42716:function(e,t,a){"use strict";a.d(t,{c:function(){return l}});var n=a(2265);let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,a]=(0,n.useState)(e);return{form:t,changed:e=>{let{name:n,value:l}=e.target;a({...t,[n]:l})},setForm:a}}},85935:function(e,t,a){"use strict";a.d(t,{x:function(){return n}});let n={url:"http://172.20.20.3:8001"}},15408:function(e,t){"use strict";let a=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0;try{let l=!0,r={method:"GET"};("GET"===t||"DELETE"===t)&&(r={method:t}),("POST"===t||"PUT"===t)&&(JSON.stringify(a),n?r={method:t,body:a}:r.body=JSON.stringify(a));let o=await fetch(e,r);if(!o.ok)return{error:"Error en la solicitud Fetch",status:o.status,cargando:!1};let i=await o.json();return l=!1,{datos:i,cargando:l}}catch(e){return{datos:null,cargando:!1}}};t.Z=a},85800:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return o}});var n=a(57437),l=a(2265);let r=(0,l.createContext)(),o=e=>{let{children:t}=e,[a,o]=(0,l.useState)({}),[i,s]=(0,l.useState)({}),[c,u]=(0,l.useState)({}),[_,d]=(0,l.useState)({}),[f,x]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let e=localStorage.getItem("datos"),t=localStorage.getItem("clientTemp"),a=localStorage.getItem("pedidoTemp"),n=localStorage.getItem("caja");e&&o(JSON.parse(e)),t&&s(JSON.parse(t)),a&&u(JSON.parse(a)),n&&d(JSON.parse(n))},[]),(0,n.jsx)(r.Provider,{value:{auth:a,setAuth:o,cliente:i,setCliente:s,pedido:c,setPedido:u,caja:_,setCaja:d,loading:f},children:t})};t.default=r}},function(e){e.O(0,[9461,2505,4797,4129,6291,2561,4275,3983,6540,1878,4486,4936,4620,2971,7023,1744],function(){return e(e.s=28997)}),_N_E=e.O()}]);