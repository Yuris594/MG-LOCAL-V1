(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6672],{20067:function(){},72061:function(){},746:function(e,t,a){Promise.resolve().then(a.bind(a,94358))},94358:function(e,t,a){"use strict";a.r(t);var l=a(57437),i=a(83719),r=a(31193),s=a(99128),n=a(60091),o=a(28027),d=a(74275),c=a(60335),h=a(15656),u=a(62501),f=a(14595),x=a(2265),p=a(10416),m=a(77699),g=a(13726),j=a(52610),w=a(16463),C=a(15408),O=a(39987),D=a(87138),E=a(60559);a(85935);let S={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"white",width:800,height:450,boxShadow:24,p:4},b=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),N=[{field:"FECHA_PEDIDO",headerName:"Fecha",width:170,renderCell:e=>b(e.value)},{field:"PEDIDO",headerName:"Pedido",width:160},{field:"ESTADO",headerName:"Estado",width:70},{field:"IMPRESO",headerName:"IMP",width:70},{field:"AUTORIZADONOM",headerName:"Autorizado",width:200,renderCell:e=>{let t=e.row.AUTORIZADONOM;return(0,l.jsx)(i.default,{style:{color:"APROBADO"===t?"#00FC00":"RETENIDO"===t?"#FF1507":"#000000",backgroundColor:"transparent"},children:t})}},{field:"U_COMPESPECIAL",headerName:"Esp",width:190},{field:"VENDEDOR",headerName:"Vend",width:100},{field:"COMENTARIO_CXC",headerName:"AUT.sistema",width:200},{field:"TOTAL_A_FACTURAR",headerName:"A FACT",width:120},{field:"NOMBRE_RAZON",headerName:"Cliente",width:400},{field:"U_EDITADOPOR",headerName:"Usuario MG",width:100},{field:"DEPTO",headerName:"Departamento",width:130},{field:"CIUDAD",headerName:"Ciudad",width:200}];t.default=()=>{let e=(0,w.useRouter)(),{setPedido:t}=(0,O.Z)(),[a,b]=(0,x.useState)([]),[A,I]=(0,x.useState)(!1),[y,v]=(0,x.useState)([]),[P,_]=(0,x.useState)([]),[R,M]=(0,x.useState)(!1),[T,k]=(0,x.useState)(!0),[Z,F]=(0,x.useState)([]),U=(0,x.useMemo)(()=>y,[y]);(0,x.useEffect)(()=>{B()},[]);let B=async()=>{try{let{datos:e}=await (0,C.Z)("/api/pedidos/listar","GET");e&&(v(e),b(e),k(!1),setTimeout(()=>{M(!0)},100))}catch(e){(0,E.conexion)()}},z=e=>{e.preventDefault(),_(e.target.value),L(e.target.value)},L=e=>{v(a.filter(t=>Object.values(t).map(e=>e?e.toString().toLowerCase():"").some(t=>t.includes(e))))},G=(0,x.useCallback)(l=>{if(F(l),l.length>0){let i=a.filter(e=>{let t=e.PEDIDO;return!!t&&t.toString().includes(l[0])});localStorage.setItem("pedidoTemp",JSON.stringify(i)),t(i),e.push("./pedidos/pedidosC")}},[y]),V=()=>I(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(r.default,{marginBottom:"50px",children:[" ","  ",(0,l.jsx)(g.Z,{})," "," "]}),(0,l.jsx)("div",{className:"container",children:!0===T?(0,l.jsx)(r.default,{sx:{width:"100%"},children:(0,l.jsx)(s.Z,{})}):(0,l.jsxs)(r.default,{children:[(0,l.jsxs)("div",{style:{height:"auto",width:"100%"},children:[(0,l.jsx)(i.default,{variant:"h5",component:"h1",gutterBottom:!0,sx:{display:"flex",justifyContent:"column",alignItems:"center",width:"auto",margin:0,color:"#000"},children:"PEDIDOS"}),(0,l.jsx)(r.default,{children:(0,l.jsxs)(r.default,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"auto",margin:1},children:[(0,l.jsxs)(r.default,{sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,l.jsxs)(n.default,{variant:"outlined",sx:{margin:"10px"},onClick:()=>I(!0),children:[" "," Nuevo "," "]}),(0,l.jsx)(p.Z,{datos:y})]}),(0,l.jsxs)(o.default,{sx:{p:"2px 4px",display:"flex",alignItems:"flex-rigth",width:1100,margin:"10px"},children:[(0,l.jsx)(d.default,{sx:{ml:1,flex:1},placeholder:"Buscar...",inputProps:{"aria-label":"search google maps"},autoFocus:!0,name:"PER_Usuario",value:P,onChange:z}),(0,l.jsx)(c.default,{title:"buscar",sx:{p:"10px"},"aria-label":"search",children:(0,l.jsx)(m.default,{})})]})]})}),(0,l.jsx)(h.Z,{in:R,children:(0,l.jsx)(r.default,{sx:{height:950,width:"100%"},children:(0,l.jsx)(j._,{rows:U,columns:N,initialState:{pagination:{paginationModel:{page:0,pageSize:16}}},pageSizeOptions:[5,16],onRowSelectionModelChange:G,rowSelectionModel:Z,getRowId:e=>e.PEDIDO,sx:{backgroundColor:"#ffffff"}})})})]}),(0,l.jsx)(u.Z,{open:A,onClose:V,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,l.jsx)(r.default,{sx:S,children:(0,l.jsxs)(r.default,{children:[(0,l.jsxs)(i.default,{id:"modal-modal-title",variant:"h6",component:"h2",children:[" "," Seleccionar articulo "," "]}),(0,l.jsx)(f.default,{sx:{height:4,m:.5,marginBottom:""},orientation:"horizontal"}),(0,l.jsxs)(r.default,{sx:{display:"flex",alignItems:"center",justifyContent:"right"},children:[(0,l.jsx)(D.default,{href:"../pedidos",children:(0,l.jsxs)(n.default,{variant:"filled",sx:{margin:"2px",bgcolor:"#b6ff91"},children:[" "," Agregear "," "]})}),(0,l.jsxs)(n.default,{variant:"filled",sx:{margin:"2px",bgcolor:"#ffa28a"},onClick:V,children:[" "," Cerrar "," "]})]}),(0,l.jsxs)(o.default,{sx:{p:"2px 4px",display:"flex",alignItems:"center",width:250,boxShadow:3},children:[(0,l.jsx)(d.default,{sx:{ml:1,flex:1},placeholder:"Buscar",inputProps:{"aria-label":"search google maps"},value:P,onChange:z}),(0,l.jsx)(c.default,{type:"button",sx:{p:"10px"},"aria-label":"search",children:(0,l.jsx)(m.default,{})}),(0,l.jsx)(f.default,{sx:{height:28,m:.5},orientation:"vertical"})]}),(0,l.jsx)(r.default,{sx:{height:200,width:"100%"},children:(0,l.jsx)(j._,{rows:y,columns:N,getRowId:e=>e.PEDIDO,initialState:{pagination:{paginationModel:{page:0,pageSize:18}}},pageSizeOptions:[5,18],rowSelectionModel:Z,onRowSelectionModelChange:G})})]})})})]})})]})}},10416:function(e,t,a){"use strict";var l=a(57437),i=a(27800),r=a(2265),s=a(60091);t.Z=e=>{let{datos:t}=e,[a,n]=(0,r.useState)(!1);return(0,l.jsx)(s.default,{variant:"outlined",color:"success",onClick:()=>{if(!Array.isArray(t)||0===t.length){console.error("Datos no est\xe1n en el formato correcto o est\xe1n vac\xedos.");return}n(!0);try{let e=i.P6.book_new(),a=i.P6.json_to_sheet(t);i.P6.book_append_sheet(e,a,"Datos"),i.NC(e,"datos.xlsx")}catch(e){console.error("Error al generar el archivo Excel",e)}finally{n(!1)}},disabled:a,children:a?"Loading...":"Excel"})}}},function(e){e.O(0,[1425,9461,4797,4129,6291,2561,4275,3983,6540,1878,4486,2610,8249,8433,2067,559,2971,7023,1744],function(){return e(e.s=746)}),_N_E=e.O()}]);