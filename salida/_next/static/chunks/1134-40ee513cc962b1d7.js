(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1134],{20067:function(){},72061:function(){},14596:function(e,t,a){"use strict";a.r(t);var l=a(57437),i=a(2265),r=a(30736),n=a(40468),o=a(97183),d=a(99128),s=a(24959),c=a(61169),u=a(77699),h=a(60335),f=a(83719),x=a(23983),g=a(74275),m=a(52610),p=a(28027),j=a(92355),C=a(31193),S=a(41448),w=a.n(S),N=a(13726),E=a(10416),b=a(15408),O=a(85935);function I(e){let{children:t,value:a,index:i,...r}=e;return(0,l.jsx)("div",{role:"tabpanel",hidden:a!==i,id:"simple-tabpanel-".concat(i),"aria-labelledby":"simple-tab-".concat(i),...r,children:a===i&&(0,l.jsx)(C.default,{sx:{p:3},children:t})})}function A(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}I.propTypes={children:w().node,index:w().number.isRequired,value:w().number.isRequired};let R=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),D=[{field:"ARTICULO",headerName:"Cod",width:130},{field:"DESCRIPCION",headerName:"Referencia",width:700},{field:"SUBLINEA",headerName:"Sublinea",width:300},{field:"TOTAL_DISP",headerName:"Disp",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"PRECIO",headerName:"Precio",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"PORC_IMPUESTO",headerName:"IVA",width:130},{field:"PRECIOMASIVA",headerName:"Masiva",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"PORC_DCTO",headerName:"D1",width:130},{field:"UNIDAD_EMPAQUE",headerName:"Emp",width:130},{field:"EXIST_REAL",headerName:"Existreal",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"}],P=[{field:"FACTURA",headerName:"Factura",width:130},{field:"FECHA_DESPACHO",headerName:"Fecha",width:190,renderCell:e=>R(e.value)},{field:"ANULADA",headerName:"AN",width:50},{field:"PRECIO_TOTAL",headerName:"V.fact",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"PEDIDO",headerName:"Pedido",width:130},{field:"ARTICULO",headerName:"Articulo",width:130},{field:"DESCRIPCION",headerName:"Descripcion",width:700},{field:"CANTIDAD",headerName:"Cant",width:130,valueFormatter:e=>Number(e).toFixed(1),align:"right"},{field:"PRECIO_UNITARIO",headerName:"PrecioUni",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"PORCIVA",headerName:"IVA",width:130,align:"right"},{field:"PORDESC",headerName:"Desc",width:130,align:"right"},{field:"VDESC",headerName:"VDesc",width:130},{field:"TOTAL_MERCADERIA",headerName:"VTotal ",width:130,valueFormatter:e=>{let t=Number(e).toFixed(0);return"".concat(parseFloat(t).toLocaleString())},align:"right"},{field:"IDRUTERO",headerName:"IdRutero",width:130},{field:"FECHARUT",headerName:"FechaRut",width:300},{field:"IDGUIA",headerName:"IdGuia",width:130},{field:"FECHAGUIA",headerName:"FechaGuia",width:250,renderCell:e=>R(e.value)},{field:"OBSERVACIONES",headerName:"Observaciones",width:800},{field:"RUBRO1",headerName:"Docs2",width:500}],v=[{field:"FECHA",headerName:"Fecha",width:250,renderCell:e=>R(e.value)},{field:"CLIENTE",headerName:"Cliente",width:160},{field:"PEDIDO",headerName:"Pedido",width:100},{field:"VE",headerName:"VEND",width:80,align:"right"},{field:"PED",headerName:"Ped",width:100,align:"right"},{field:"DESP",headerName:"Desp",width:100,align:"right"},{field:"PEND",headerName:"Pend",width:100,align:"right"},{field:"ESTADO",headerName:"Estado",width:120},{field:"AUTORIZADONOM",headerName:"Autortizado",width:200,renderCell:e=>{let t=e.row.AUTORIZADONOM;return(0,l.jsx)(f.default,{style:{color:"APROBADO"===t?"#00FC00":"RETENIDO"===t?"#FF1507":"#000000",backgroundColor:"transparent"},children:t})}}];t.default=function(){let e=(0,i.useRef)(),[t,a]=(0,i.useState)(0),[S,w]=(0,i.useState)(!1),[R,T]=(0,i.useState)([]),[F,Z]=(0,i.useState)([]),[y,L]=(0,i.useState)([]),[U,k]=(0,i.useState)([]),[_,M]=(0,i.useState)(""),[B,G]=(0,i.useState)([]),[V,z]=(0,i.useState)(!0),[H,J]=(0,i.useState)([]),[q,Y]=(0,i.useState)([]),[Q,X]=(0,i.useState)(null);(0,i.useLayoutEffect)(()=>{},[Q]),(0,i.useLayoutEffect)(()=>{ee()},[]),(0,i.useEffect)(()=>{e.current.focus(),K()},[Q]),(0,i.useEffect)(()=>{z(!0)},[t]);let K=async()=>{try{if(Q){w(!0);let{datos:e}=await (0,b.Z)(O.x.url+"/productos/listar/"+Q.BODEGA,"GET");e?(w(!1),G(e),Y(e)):(w(!1),G([])),z(!1)}}catch(e){w(!1)}},W=async()=>{k([]);try{if(Q){let{datos:e}=await (0,b.Z)(O.x.url+"/productos/facturas/"+_.ARTICULO,"GET");console.log(e),e?k(e):k([]),z(!1)}}catch(e){w(!1)}},$=async()=>{Z([]);try{if(Q){let{datos:e}=await (0,b.Z)(O.x.url+"/productos/pedidos/"+_.ARTICULO,"GET");e?Z(e):Z([]),z(!1)}}catch(e){console.log(e)}},ee=async()=>{try{let{datos:e}=await (0,b.Z)(O.x.url+"/productos/bodegas");e&&T(e)}catch(e){console.log(e)}},et=e=>{let t=e.toLowerCase();G(q.filter(e=>Object.values(e).map(e=>e?e.toString().toLowerCase():"").some(e=>e.includes(t))))},ea=(0,i.useCallback)(e=>{J(e),e.length>0&&M(q.filter(t=>{let a=t.ARTICULO;return!!a&&a.toString().includes(e[0])})[0])},[B]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(C.default,{marginBottom:"50px",children:[" ",(0,l.jsx)(N.Z,{})," "]}),(0,l.jsxs)("div",{className:"container conatiner-datgrid",children:[(0,l.jsx)(r.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:S,children:(0,l.jsx)(n.default,{color:"inherit"})}),(0,l.jsxs)("div",{style:{height:"auto",width:"100%"},children:[(0,l.jsxs)(C.default,{children:[(0,l.jsx)(f.default,{variant:"h5",component:"h1",gutterBottom:!0,sx:{display:"flex",justifyContent:"column",alignItems:"center",width:"auto",margin:0,color:"#000000"},children:"PRODUCTOS"}),(0,l.jsxs)(C.default,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,l.jsx)(p.default,{children:(0,l.jsx)(c.Z,{disablePortal:!0,id:"combo-box-demo",options:R,value:Q,getOptionLabel:e=>e.NOMBRE||"Bodegas",onChange:(e,t)=>{X(t),K()},sx:{width:350},isOptionEqualToValue:(e,t)=>e.NOMBRE===t.NOMBRE,renderInput:e=>(0,l.jsx)(x.Z,{...e,label:"Bodegas",placeholder:"Selecciona una bodega",variant:"standard"}),disableCloseOnSelect:!0})}),(0,l.jsx)(C.default,{children:(0,l.jsx)(f.default,{variant:"h5",component:"h1",gutterBottom:!0,sx:{display:"flex",justifyContent:"column",alignItems:"center",width:"auto",margin:0,color:"#920b0d"},children:_.DESCRIPCION})}),(0,l.jsxs)(C.default,{sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:[B.length>0?(0,l.jsx)(E.Z,{datos:B}):"",(0,l.jsxs)(p.default,{sx:{p:"2px 4px",display:"flex",alignItems:"flex-rigth",width:800,margin:"10px"},children:[(0,l.jsx)(g.default,{sx:{ml:1,flex:1},placeholder:"Buscar",inputProps:{"aria-label":"search google maps"},id:"usuario",label:"Usuario",name:"PER_usuario",autoComplete:"usuario",autoFocus:!0,value:y,onChange:e=>{e.preventDefault(),L(e.target.value),et(e.target.value)},inputRef:e}),(0,l.jsx)(h.default,{title:"buscar",sx:{p:"10px"},"aria-label":"search",children:(0,l.jsx)(u.default,{})})]})]})]})]}),(0,l.jsxs)(C.default,{sx:{width:"100%"},children:[(0,l.jsx)(C.default,{sx:{borderBottom:1,borderColor:"divider"},children:(0,l.jsxs)(j.Z,{value:t,onChange:(e,t)=>{a(t)},"aria-label":"basic tabs example",children:[(0,l.jsx)(o.Z,{label:"Articulos",...A(0)}),(0,l.jsx)(o.Z,{label:"Pedidos:".concat(F.length),...A(1),onClick:$}),(0,l.jsx)(o.Z,{label:"Facturas:".concat(U.length),...A(2),onClick:W})]})}),(0,l.jsx)(I,{component:C.default,value:t,index:0,children:(0,l.jsx)(C.default,{sx:{width:"100%",height:950},children:B.length<=0?(0,l.jsxs)(C.default,{sx:{width:"100%"},title:"Seleccione una bodega en la lista de arriba",children:[" ",(0,l.jsx)(s.Z,{})," "]}):(0,l.jsx)(m._,{rows:B,columns:D,initialState:{pagination:{paginationModel:{page:0,pageSize:16}}},pageSizeOptions:[5,16,20],onRowSelectionModelChange:ea,rowSelectionModel:H,getRowId:e=>e.ARTICULO,sx:{backgroundColor:"#ffffff"}})})}),(0,l.jsx)(I,{component:C.default,value:t,index:1,children:!0===V?(0,l.jsx)(C.default,{sx:{width:"100%"},children:(0,l.jsx)(d.Z,{})}):F.length<=0?(0,l.jsx)("h1",{children:"NO HAY PEDIDOS"}):(0,l.jsx)(C.default,{sx:{width:"100%",height:950},children:(0,l.jsx)(m._,{rows:F,columns:v,initialState:{pagination:{paginationModel:{page:0,pageSize:16}}},pageSizeOptions:[5,16,20],getRowId:e=>e.PEDIDO,sx:{backgroundColor:"#ffffff"}})})}),(0,l.jsx)(I,{component:C.default,value:t,index:2,children:!0===V?(0,l.jsx)(C.default,{sx:{width:"100%"},children:(0,l.jsx)(d.Z,{})}):U.length<=0?(0,l.jsx)("h1",{children:"NO HAY FACTURAS"}):(0,l.jsx)(C.default,{sx:{width:"100%",height:950},children:(0,l.jsx)(m._,{rows:U,columns:P,initialState:{pagination:{paginationModel:{page:0,pageSize:16}}},pageSizeOptions:[5,16,20],getRowId:e=>e.FACTURA,sx:{backgroundColor:"#ffffff"}})})})]})]})]})]})}},13726:function(e,t,a){"use strict";a.d(t,{Z:function(){return L}});var l=a(57437),i=a(20124),r=a(31193),n=a(71733),o=a(79806),d=a(60335),s=a(60091),c=a(83719),u=a(62501),h=a(6291),f=a(11656),x=a(85465),g=a(66325),m=a(90922),p=a(26032),j=a(55693),C=a(42188),S=a(66299),w=a(78457),N=a(21704),E=a(66246),b=a(9504),O=a(16463),I=a(39987),A=a(2265),R=a(32184),D=a(7547),P=a(57300),v=a(86917),T=a(47905),F=a(87138),Z=e=>{let{page:t}=e;return(0,l.jsx)(r.default,{sx:{width:250},children:(0,l.jsx)("nav",{children:(0,l.jsx)(R.Z,{children:t.map(e=>(0,l.jsx)(D.ZP,{disablePadding:!0,children:(0,l.jsxs)(P.Z,{LinkComponent:F.default,href:e.url,onClick:e.onClick,children:[(0,l.jsx)(v.Z,{children:e.icon}),(0,l.jsx)(T.Z,{children:e.title})]})},e.title))})})})};let y={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",alignItems:"center",justifyContext:"center",boxShadow:24,pt:2,px:4,pb:3};var L=()=>{let e=(0,O.useRouter)(),{auth:t}=(0,I.Z)(),[a,R]=(0,A.useState)(!1),[D,P]=(0,A.useState)(null),[v,T]=(0,A.useState)(!1),[L,U]=(0,A.useState)(null),k=()=>{T(!1),P(null)},_=[{title:"USUARIOS ",url:"../../usuarios",icon:(0,l.jsx)(g.Z,{})},{title:"PEDIDOS",url:"../../pedidos",icon:(0,l.jsx)(m.Z,{})},{title:"CLIENTES",url:"../../clients",icon:(0,l.jsx)(p.Z,{})},{title:"PRODUCTOS",icon:(0,l.jsx)(j.Z,{}),onClick:e=>{T(!0),P(e.currentTarget)}},{title:"FACTURAS",url:"../../facturas",icon:(0,l.jsx)(C.Z,{})},{title:"CAJA",url:"../../pedidos/pedidosCaja",icon:(0,l.jsx)(S.Z,{})}];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.default,{}),(0,l.jsxs)(r.default,{sx:{flexGrow:1},children:[(0,l.jsx)(n.Z,{position:"static",sx:{bgcolor:"#262626",width:"auto"},children:(0,l.jsxs)(o.Z,{children:[(0,l.jsx)(d.default,{color:"inherit",size:"large",onClick:e=>{U(e.currentTarget)},sx:{display:{xs:"flex",md:"none"}},children:(0,l.jsx)(b.default,{})}),(0,l.jsx)(r.default,{sx:{display:{xs:"none",md:"flex"}},children:_.map(e=>(0,l.jsx)(s.default,{color:"inherit",LinkComponent:F.default,href:e.url,onClick:e.onClick,children:e.title},e.title))}),(0,l.jsx)(c.default,{variant:"h6",sx:{flexGrow:1}}),(0,l.jsx)(s.default,{component:F.default,href:"/start",color:"inherit",children:(0,l.jsx)(E.Z,{})}),(0,l.jsxs)(s.default,{color:"inherit",children:[(0,l.jsx)(N.Z,{}),t.PER_Nom]}),(0,l.jsx)(s.default,{color:"inherit",onClick:()=>R(!0),children:(0,l.jsx)(w.Z,{})})]})}),(0,l.jsx)(u.Z,{open:a,onClose:()=>R(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,l.jsxs)(r.default,{sx:y,children:[(0,l.jsx)(c.default,{id:"modal-modal-title",variant:"h6",component:"h2",children:"\xbfEstas seguro que quiere salir?"}),(0,l.jsx)(r.default,{children:(0,l.jsx)(s.default,{sx:{bgcolor:"red"},variant:"contained",onClick:()=>{e.push("/")},children:"SALIR"})})]})}),(0,l.jsxs)(h.Z,{id:"basic-menu",anchorEl:D,open:v,onClose:k,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,l.jsx)(f.Z,{onClick:k,component:F.default,href:"../../productos",children:"Productos Por Bodega"}),(0,l.jsx)(f.Z,{onClick:k,component:F.default,href:"../../productosMG",children:"Productos-MG"})]}),(0,l.jsx)(x.ZP,{open:!!L,onClose:()=>{U(null)},sx:{display:{xs:"flex",md:"none"}},children:(0,l.jsx)(Z,{page:_})})]})]})}},39987:function(e,t,a){"use strict";a.d(t,{a:function(){return r}});var l=a(85800),i=a(2265);let r=()=>(0,i.useContext)(l.default);t.Z=r},10416:function(e,t,a){"use strict";var l=a(57437),i=a(27800),r=a(2265),n=a(60091);t.Z=e=>{let{datos:t}=e,[a,o]=(0,r.useState)(!1);return(0,l.jsx)(n.default,{variant:"outlined",color:"success",onClick:()=>{if(!Array.isArray(t)||0===t.length){console.error("Datos no est\xe1n en el formato correcto o est\xe1n vac\xedos.");return}o(!0);try{let e=i.P6.book_new(),a=i.P6.json_to_sheet(t);i.P6.book_append_sheet(e,a,"Datos"),i.NC(e,"datos.xlsx")}catch(e){console.error("Error al generar el archivo Excel",e)}finally{o(!1)}},disabled:a,children:a?"Loading...":"Excel"})}},85935:function(e,t,a){"use strict";a.d(t,{x:function(){return l}});let l={url:"http://172.20.20.3:8001/"}},15408:function(e,t){"use strict";let a=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=arguments.length>3?arguments[3]:void 0;try{let i=!0,r={method:"GET"};("GET"===t||"DELETE"===t)&&(r={method:t}),("POST"===t||"PUT"===t)&&(JSON.stringify(a),l?r={method:t,body:a}:r.body=JSON.stringify(a));let n=await fetch(e,r);if(!n.ok)return{error:"Error en la solicitud Fetch",status:n.status,cargando:!1};let o=await n.json();return i=!1,{datos:o,cargando:i}}catch(e){return{datos:null,cargando:!1}}};t.Z=a},85800:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return n}});var l=a(57437),i=a(2265);let r=(0,i.createContext)(),n=e=>{let{children:t}=e,[a,n]=(0,i.useState)({}),[o,d]=(0,i.useState)({}),[s,c]=(0,i.useState)({}),[u,h]=(0,i.useState)({}),[f,x]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{let e=localStorage.getItem("datos"),t=localStorage.getItem("clientTemp"),a=localStorage.getItem("pedidoTemp"),l=localStorage.getItem("caja");e&&n(JSON.parse(e)),t&&d(JSON.parse(t)),a&&c(JSON.parse(a)),l&&h(JSON.parse(l))},[]),(0,l.jsx)(r.Provider,{value:{auth:a,setAuth:n,cliente:o,setCliente:d,pedido:s,setPedido:c,caja:u,setCaja:h,loading:f},children:t})};t.default=r}}]);